<!doctype html>
<html manifest='offline.manifest'>
<head>
<meta charset="utf-8">
<meta name="viewport" content='width=720,user-scalable=no'/>
<title>创意罗盘</title>
<style>
body,html,canvas{margin:0;padding:0;}
body,html{width: 100%;height:100%;}
canvas{/*transform-origin:0 0;transform:scale(0.5,0.5);/* */}
</style>
<script>
localStorage.$init_script && window.eval(localStorage.$init_script)
function init(){
	var width = document.body.clientWidth;
	var height = document.body.clientHeight;
	
	if(!width && window.nativeHost){
		width = nativeHost.getWidth(0);
		height = nativeHost.getHeight(0);
	}
	if(width && height){
		//minimum-scale=1.0, maximum-scale=1.0, user-scalable=no
		//document.getElementsByTagName('meta')[0].setAttribute('content','width=980,initial-scale='+scale+',user-scalable=no')
		//compass.init(960,Math.ceil(height*scale))
		compass.init(width,height)
		init = Function.prototype;
	}
}
//var start = +new Date,inc = 0;requestAnimationFrame(testFPS);function testFPS(){if(inc++==60){if(prompt('刷新率:',inc/(new Date - start) * 1000))return;start = +new Date;inc = 0}requestAnimationFrame(testFPS);
//var c = document.body.firstChild.getContext('2d');var t = +new Date;while(new Date - t<3)c.fillRect(0,Math.random()*900|0,100,100);}
window.onload = init;
var mm = navigator.userAgent.replace(/^.*?(\bMicroMessenger\/\d[\.\d]+)?.*/,'$1');
//!mm && document.write('<script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"><\/script>')
</script>
<script>var compass = function() {
function l(l, v, h, s, c, u, d) {
switch (l) {
case -1:
t = [ c, u ], i && (i = i.cancel()), r = null, e = De(h, s), a = 0 == e ? 2 : e > 0 && (1 & e) + 1, 
-2 == e && (i = we(), i && (i.index = -2, i.move(c, u, e)));
var p = new Date();
n = p;
break;
case -2:
if (null != i) {
var g = De(c, u, !0);
i.move(c, u, g), r = g;
} else (e > 0 || null == e) && Te(t, t = [ c, u ]);
break;
case -3:
i && f(v, c, u), a && d == a && o(d);
break;
case 0:
if (e > 0 && 1 & e) {
var m = e >> 1;
i = qt(m), i.index = m;
}
break;
case 2:
case 1:
a != l && o(l, "base");
break;
case 3:        }
-1 == l ? re(-1, e) : -3 >= e && re(l, e, De(c, u, !0));
}
function o(t) {
if (e > 0) if (1 & e) {
var a = e >> 1;
1 == t ? be(a) : fe(a);
} else v(e >> 1); else 0 == e ? t > 1 && fe(-1) : -1 == e && Me();
}
function v(t) {
var e = "", a = {
title: e,
children: []
};
me(a, t);
}
function f() {
var n = i.index;
if (-2 == r) ye(n, i); else if (-3 == r) n >= 0 && xe(n), i = i.cancel(); else if (-2 == n && null == r) ye(n, i), 
i = i.cancel(); else {
if (0 == r) n >= 0 && ge(n, n + 1); else if (r > 0) {
var l = r >> 1;
1 & r ? n != l && ce(n, l) : pe(n, l);
} else -1 == r && ce(n, -1);
i = i.cancel();
}
}
function g(t, e) {
s = t, c = e, u = s * Ze * .8, d = Le, p = t / 3;
}
function m(t, e, a, r, i, n) {
t.fillStyle = "#FFF", t.fillRect(0, 0, a, r);
var l = a / 2, o = r / 2, v = r / 3, f = w(e), h = 2 * v;
if (n) {
var s = .7 * v, c = .3 * v, u = 1.1 * v;
t.fillStyle = n[0], t.drawImage(f, l - s, o - s, 2 * s, 2 * s);
for (var d = 0; 6 > d; d++) {
var p = Math.PI * d / 3, g = l + u * Math.cos(p), m = o + u * Math.sin(p);
n.length > 1 && (t.fillStyle = n[d + 1]), t.beginPath(), t.arc(g, m, c, 0, 2 * Math.PI, !1), 
t.fill();
}
} else t.drawImage(f, l - v, o - v, h, h);
if (e.childColors = n, i) {
var x = .1 * r;
return a *= .2, r *= .2, y(t, i, x, a, r), [ 0, x, a, x + r ];
}
}
function y(t, e, a, r, i) {
var n = We, l = i / 2, o = r - l, v = r - 1.5 * l, f = .8 * i;
t.lineWidth = n / 2, t.strokeStyle = "#ddd", t.fillStyle = "#eee", t.beginPath(), 
t.moveTo(0, a), t.arc(o, a + l, l, -Math.PI / 2, Math.PI / 2, !1), t.lineTo(0, a + i), 
t.stroke(), t.fill(), $r(t, e, (v - f) / 2, a, f), t.strokeStyle = "#E66", t.lineWidth = n, 
t.beginPath(), f *= .6, a += (i - f) / 2, t.moveTo(v, a), t.lineTo(v + f, a + f), 
t.moveTo(v, a + f), t.lineTo(v + f, a), t.stroke();
}
function w(t) {
var e = t.scale || 1, a = h(t), r = a[0];
if (a.scale != e || t.dirty) {
a.scale = e, t.dirty = !1, console.log("redraw node canvas!" + [ t.scale, t.id, r.nativeId, t.data.title ]);
var i = s * e | 0, n = i << 1, l = Le, o = r.getContext("2d");
r.width = n, r.height = n, o.save();
try {
o.clearRect(0, 0, n, n), b(o, t, i, l), M(o, t, i, l), S(o, t, i, l);
} finally {
o.restore();
}
}
return r;
}
function x(t, e, a, r, i) {
t.save();
try {
var n = s * a | 0, l = Le, o = 2 * n, v = .6 * o | 0;
t.translate(r, i), t.font = v + "px " + Ye, t.textBaseline = "middle", b(t, e, n, l), 
t.fillStyle = "#666", t.lineWidth = l, t.moveTo(n, o - l), t.lineTo(5 * s, o - l), 
t.stroke(), t.fillText(e.data.title, o + n / 2, o / 2), S(t, e, n, l);
} finally {
t.restore();
}
}
function b(t, e, a, r) {
var i = e.data.fill || "#4cd4bc", n = 2 * a, l = t.createLinearGradient(0, 0, n, n);
l.addColorStop(0, "rgba(153,153,153,0.3)"), l.addColorStop(.4, "rgba(238,238,238,0.3)"), 
l.addColorStop(1, "rgba(153,153,153,0.3)"), t.fillStyle = i, t.strokeStyle = l, 
t.lineWidth = r, t.beginPath(), t.arc(a, a, a - r, 0, 2 * Math.PI), t.fill(), t.stroke();
}
function M(t, e, a) {
var i = e.scale || 1, n = e.data.icon, l = e.data.title, o = p * i * (l.length > 5 ? .9 : 1) | 0, v = o;
if (t.textAlign = "center", t.strokeStyle = t.fillStyle = F(t.fillStyle), i > 1) {
o /= i, v /= i;
var f = B(t, l, o, a, 2), h = f.length * v, s = 1.42 * a + v + h / 2;
t.textAlign = "left";
} else {
var f = B(t, l, o, 1.68 * a, 2), h = f.length * v, s = a + h / 2, c = .8 * v, u = c / 2, d = s + v / 2, g = i == Ue && e.children.length;
e.data.content && (T(t, a - .8 * u, g ? d : d + u, .8 * c, c), g && (d += c)), g && t.fillText("...", a, d + u);
}
for (var m = f.length; m--; ) t.fillText(f[m], a, s), s -= v;
n && $r(t, n, a - .7 * o, s - 1.4 * o, 1.4 * o);
}
function S(t, e, a, r) {
if (e.data.eventEnable) {
var i = a - r, n = a - 5 * r, l = new Date(e.data.eventStart), o = (+l - new Date()) / 864e5 / 6 * Math.PI;
l = (60 * l.getHours() + l.getMinutes()) / 6 / 60 * Math.PI, t.translate(a, a), 
t.strokeStyle = "#000", t.lineWidth = 1, t.beginPath(), t.arc(0, 0, a - 1, 0, 2 * Math.PI), 
t.stroke(), t.beginPath(), o > 0 && (t.lineWidth = 2 * r, t.strokeStyle = "#bb0", 
t.arc(0, 0, a - 2 * r, 1.5 * Math.PI, 1.5 * Math.PI + o), t.stroke()), t.lineWidth = r, 
t.strokeStyle = "#FFF", t.beginPath(), t.arc(0, 0, a - r, 0, 2 * Math.PI);
for (var v = 0; 3 > v; v++) t.moveTo(0, i), t.lineTo(0, n), t.moveTo(0, -i), t.lineTo(0, -n), 
t.moveTo(i, 0), t.lineTo(n, 0), t.moveTo(-i, 0), t.lineTo(-n, 0), v || (i = a - r, 
n = a - 4 * r, t.stroke(), t.beginPath(), t.lineWidth = .8 * r), t.rotate(Math.PI / 3);
t.stroke(), t.beginPath(), t.arc(0, 0, n, .5 * Math.PI, .5 * Math.PI + l), t.stroke(), 
t.rotate(l), t.beginPath(), t.fillStyle = "#ff6", r *= 2.4, t.moveTo(0, n - r), 
t.lineTo(-r, n), t.lineTo(0, n + r), t.lineTo(r, n), t.closePath(), t.fill();
}
}
function T(t, e, a, r, i) {
var n = i >> 4, l = i >> 3;
t.lineWidth = n, wv(t, e, a, r, i, l);
for (var o = 0; 8 > o; o++) t.moveTo(e + l, a + o * l), t.lineTo(e + r - l, a + o * l);
t.stroke();
}
function F() {
return "#FFF";
}
function P(t) {
var e = new Image(), a = w(t), r = h(P)[0], i = s / 2, n = r.width = r.height = i << 1, l = r.getContext("2d");
return l.clearRect(0, 0, n, n), l.drawImage(a, 0, 0, a.width, a.height, 0, 0, n, n), 
e.src = r.toDataURL("image/png"), e.width = e.height = n, e;
}
function C(t, e) {
var a = -1 == e, r = h(C), i = r[0];
if (r[1] != u || r[2] != t || r[3] ^ a) {
r[1] = u, r[2] = t, r[3] = a;
var n = i.getContext("2d"), l = d, o = u + l << 1, v = u + l, f = v, s = u / 1.5;
i.width = i.height = o, n.clearRect(0, 0, o, o), n.beginPath(), n.lineWidth = l, 
n.strokeStyle = a ? "#933" : t ? "#999" : "#ccc", n.arc(v, f, u, 0, 2 * Math.PI), 
n.stroke(), n.lineWidth = l, n.moveTo(v, f - s), n.lineJoin = "round", n.lineTo(v - .9 * s, f - u / 5), 
n.lineTo(v - .9 * s, f + u / 2), n.lineTo(v - .3 * s, f + u / 2), n.lineTo(v - .3 * s, f + s / 8), 
n.lineTo(v + .3 * s, f + s / 8), n.lineTo(v + .3 * s, f + u / 2), n.lineTo(v + .9 * s, f + u / 2), 
n.lineTo(v + .9 * s, f - u / 5), n.closePath(), n.stroke();
}
return i;
}
function I(t, e, a, r) {
var i = t >= 0, n = i && !e ? 2 : 1, l = h(I), o = l[0], v = -3 == a;
if (l[1] != t || l[2] != e || l[3] != v || l[4] != r) {
l[1] = t, l[2] = e, l[3] = v, l[4] = r;
var f = d, s = u + f << 1, c = u + f, p = u + f, g = p, m = o.getContext("2d");
for (o.width = r * n, o.height = s, m.lineWidth = f; n--; ) {
var y = t == n;
switch (m.strokeStyle = y ? "#933" : e ? "#999" : "#ccc", m.beginPath(), m.arc(p, g, u, 0, 2 * Math.PI), 
m.fillStyle = "#fff", m.fill(), m.stroke(), n) {
case 1:
D(m, u, c);
break;
case 0:
if (e) m.fillStyle = v ? "#fff" : "#bbb", m.fill(), Rv(m, s / 4, s / 5, s / 2, .6 * s, "#fff"); else if (i) A(m, u, c); else {
m.fillStyle = "#aaa";
for (var x = -1; 1 >= x; x++) m.beginPath(), m.arc(p + x * u / 2, g, u / 8, 0, 2 * Math.PI), 
m.fill();
}
}
m.translate(r, 0);
}
}
return o;
}
function A(t, e) {
t.save(), t.globalAlpha = .3, t.lineCap = "round", t.translate(0, e), t.lineWidth = e >> 2;
for (var r = [ "#369", "#693", "#936" ], i = r.length, n = -e / 3, l = .6 * e; i--; ) t.strokeStyle = r[i], 
t.beginPath(), t.moveTo(l, n), t.lineTo(l + e, n), t.stroke(), n += .4 * e;
t.restore();
}
function D(t, e, a) {
var r = a / 12, i = 2, n = 1 * a, l = 2.5, o = .5;
for (t.save(), t.lineJoin = "round", t.strokeStyle = t.fillStyle = "#c99", t.lineWidth = r, 
t.translate(a, 1.6 * a), t.rotate(o); i--; ) t.beginPath(), t.moveTo(r, 0), t.lineTo(r, -n), 
t.lineTo(r * l, -n), t.lineTo(0, -n - r * l), t.lineTo(-r * l, -n), t.lineTo(-r, -n), 
t.lineTo(-r, 0), t.closePath(), t.fill(), t.stroke(), i ? t.rotate(2 * -o) : (t.strokeStyle = "#fff", 
t.rotate(o), t.beginPath(), t.arc(0, 0, 2 * r, 0, 2 * Math.PI, !0), t.stroke(), 
t.fill());
t.restore();
}
function R(t, e, a) {
var r = -2 == a, i = h(R), n = i[0], l = u;
if (i[1] != u || i[2] != e || i[3] ^ r || i[4] != t) {
i[1] = u, i[2] = e, i[3] = r, i[4] = t;
var o = n.getContext("2d"), v = d, f = u + v << 1;
if (n.width = n.height = f, o.clearRect(0, 0, f, f), o.beginPath(), o.lineWidth = v, 
o.strokeStyle = r ? "#933" : e ? "#999" : "#ccc", console.log("redraw pasteBoard!", o.strokeStyle, a), 
o.arc(u + v, u + v, u, 0, 2 * Math.PI), o.stroke(), t) o.drawImage(t, 0, 0, t.width, t.height, v, v, f - v - v, f - v - v); else {
o.strokeStyle = "#ccc";
var s = .45 * u, f = .9 * u, p = 1.1 * u, l = .1 * u;
o.save();
try {
o.translate(s + l / 2, s), o.beginPath(), o.arc(l, l, l, Math.PI, 1.5 * Math.PI), 
o.arc(f - l, l, l, 1.5 * Math.PI, 0), o.arc(f - l, p - l, l, 0, .5 * Math.PI), o.arc(l, p - l, l, .5 * Math.PI, 1 * Math.PI), 
o.lineTo(0, l), o.stroke(), o.beginPath(), o.translate(2.5 * l, 2.5 * l), o.moveTo(f - l - l / 2, 0), 
o.arc(f - l, l, l, 1.5 * Math.PI, 0), o.arc(f - l, p - l, l, 0, .5 * Math.PI), o.arc(l, p - l, l, .5 * Math.PI, 1 * Math.PI), 
o.lineTo(0, p - l - l / 2), o.stroke();
} finally {
o.restore();
}
}
}
return n;
}
function Y() {
return W(0, .8 * s);
}
function W(t, e) {
e = e || c;
var a = h(E[t] || W), r = a[0];
if (a[1] != t || a[2] != e) {
console.log("redraw place holder!"), a[1] = t, a[2] = e, t && (e *= 1.2);
var i = 2 * e, n = .1 * e, l = e - n, o = r.getContext("2d");
r.width = i, r.height = i, o.strokeStyle = "#ccc", o.lineWidth = n, o.lineCap = "round", 
o.beginPath(), t ? (o.arc(e, e, l, 0, 2 * Math.PI), o.stroke(), o.fillStyle = 2 == t ? "#0EE" : "#FFF", 
o.fill()) : (o.arc(e, e, l, 0, 2 * Math.PI), o.stroke(), o.lineWidth = 3 * n, l -= 4 * n, 
o.fillStyle = "#ccc", o.strokeStyle = "#FFF", o.fill(), o.beginPath(), o.moveTo(e - l, e), 
o.lineTo(e + l, e), o.moveTo(e, e - l), o.lineTo(e, e + l), o.stroke());
}
return r;
}
function B(t, e, a, r, i) {
t.font = a + "px " + Ye;
var n = t.measureText(e).width, l = n / r;
if (l > 1.1) {
var o = [], v = e.match(/\w+|./g), f = v[0];
i > l && (r = Math.min(n / Math.ceil(l), r));
for (var h = 1; h < v.length; h++) {
var s = v[h], c = f + s, n = t.measureText(c).width;
if (n > r) {
if (!(o.length < i - 1)) {
f = f.slice(0, -v[h - 1].length) + "...";
break;
}
o.push(f), f = s;
} else f = c;
}
return o.length > 0 && 1 == f.length ? o[o.length - 1] += f : o.push(f), o;
}
return [ e ];
}
function X(t) {
var e = h(X), a = e[0], r = 2 * t;
if (e[1] != t) {
a.width = a.height = r + 1 << 1;
var i = a.getContext("2d");
i.strokeStyle = "rgba(255,189,189,.1)", i.lineWidth = 24;
for (var n = 0; 4 > n; n++) i.beginPath(), i.arc(r, r, t, 0, 2 * Math.PI, !0), i.stroke(), 
t *= 1.03;
}
return a;
}
function lt(t) {
nt = t, console.log("focus action", nt), st();
}
function ot(t) {
if (console.log("focus:", t), st(), 0 == t) {
var e = U[K];
hn(e, $, H, J);
} else 1 == t && j();
nt = -1;
}
function vt() {
return N = En(0), N.mozOpaque = !0, _ = En(), _.mozOpaque = !0, L = ft(_, !0), q = ft(N, !0), 
null == q.nativeId && (document.body.appendChild(_), document.body.appendChild(N)), 
N;
}
function ft(t) {
t.style.cssText = "position:absolute;left:0;top:0;";
var e = t.getContext("2d");
return e.imageSmoothingEnabled ? e.imageSmoothingEnabled = !1 : e.webkitImageSmoothingEnabled && (e.webkitImageSmoothingEnabled = !1), 
e;
}
function ht(t, e, a, r) {
_.width = N.width = $ = t, _.height = N.height = H = e, J = a, z = J * Ze * 2, g(a, r), 
st();
}
function st() {
it = null, So(dt);
}
function ct() {
So(dt);
}
function ut(t) {
var e = t.getContext("2d"), a = t.height, r = a / $, n = (U[0], U[1]);
return e.save(), e.beginPath(), e.rect(0, 0, a, a), e.clip(), e.scale(r, r), e.translate(0, ($ - H) * n / H), 
it = -1, pt(e, e), pt(e, e), it = null, e.restore(), U[K].data.title;
}
function dt() {
return U ? pt(L, q, "#FFF") : void 0;
}
function pt(t, e, a) {
var r = [], i = [], n = [], l = xt(r, i, n), o = r.length < 3, v = o && bt();
v ? l = !0 : v = U, Rt.apply(n, v), r += "", r === it ? (e.drawImage(t.canvas, 0, 0), 
o && (Et.apply(e, v), Mt(e, i))) : (a && (t.fillStyle = a, t.fillRect(0, 0, $, H)), 
console.log("redraw pasteBoard background", o), t != e && (console.info("clearRect:", $, H), 
e.clearRect(0, 0, $, H), it = r), o ? (e.drawImage(t.canvas, 0, 0), Mt(e, i)) : (Et.apply(t, v), 
Mt(t, i), e.drawImage(t.canvas, 0, 0))), Yt(e, U[K]), Mt(e, n), e.globalAlpha = 1;
for (var f = Q.length; f--; ) Q[f]() && (l = !0);
return l;
}
function xt(t, e, a) {
var r = Tt(), i = U[K], n = i.parent;
gt += +new Date();
var l = i.children, o = tt && tt.hit || null, v = !!tt, f = R(at, v, o), h = I(nt, v, o, z), s = l.length;
for (t.push(null == tt ? -2 : [ -1, -2, -3, 0 ].indexOf(o), nt), e.push([ 1, f, $ - z, z - f.height ]), 
n ? Ft(n, e) && (r = !0) : (f = C(tt, o), e.push([ 1, f, z - f.width, z - f.height ])), 
e.push([ 1, h, $ - h.width, H - z ]), mt += +new Date(), Ft(i, e) && (r = !0), r || t.push(i.id, i.x); s--; ) {
var c = l[s];
Ft(c, a) && (r = !0);
}
for (yt += +new Date(), s = G.length; s--; ) {
var c = G[s];
Ft(c, a) ? r = !0 : 0 == c.alpha && G.splice(s, 1);
}
return r;
}
function bt() {
if (Z) {
var t = new Date() - V;
if (Ne > t) {
var e = t / Ne;
if (1 > e) {
var a = [], r = U[3], i = K;
for (a[i] = U[i], a[i + 1] = Nt(U[i + 1], Z[i + 1], e); i--; ) a[i] = Nt(U[i], Z[i], e);
return 0 == r && (a[3] = 0), Z = a;
}
Z = 0;
}
}
}
function Mt(t, e) {
for (var a = e.length; a--; ) {
var i = e[a], n = i.shift(), l = i.length;
if (t.globalAlpha = n, 9 == l) e[a] = i.slice(5, 9); else {
var o = i[0];
e[a] = [ i[1], i[2], o.width, o.height ];
}
for (;--l > 0; ) i[l] = 0 | i[l];
t.drawImage.apply(t, i);
}
}
function Tt() {
for (var t = et.length; t--; ) et[t]() && et.splice(t, 1);
return et.length;
}
function Ft(t, e) {
var a = At(t), r = t.alpha || 1, i = (t.scale || 1) * J, n = a[0], l = a[1], o = a[2], v = w(t);
if (!(t.alpha < .1)) {
if (tt && t.hit >= 0 && t.hit == tt.hit) if (tt.id != t.id) {
var f = X(i), h = f.width / 2;
e.push([ r, f, n - h, l - h ]), e.push([ r, v, n - i, l - i ]);
} else {
var h = J * Ue;
e.push([ r, v, 0, 0, i *= 2, i, n - h, l - h, h *= 2, h ]);
} else if (1 == o) e.push([ r, v, n - i, l - i ]); else {
var h = i * o;
e.push([ r, v, 0, 0, i *= 2, i, n - h, l - h, h *= 2, h ]);
}
return t.animStart;
}
}
function Pt(t, e, a, r, i) {
if (.1 > i && console.log("hide ", t.data.title), t.animStart) var n = Math.min(1, (new Date() - t.animStart) / Ne), l = _t(t.animAlpha, n), o = _t(t.animScale, n), v = _t(t.animX, n), f = _t(t.animY, n); else v = t.x || 0, 
f = t.y || 0, l = null == t.alpha ? 1 : t.alpha, o = t.scale || 1;
var h = null == i ? l : i, s = r || o;
return e == v && a == f && l == h && o == s ? (t.x = e, t.y = a, t.alpha = h, void (t.scale = s)) : (t.animAlpha = [ l, h ], 
t.animScale = [ o, s ], t.animX = [ v, e ], t.animY = [ f, a ], t.animStart = new Date(), 
void ct());
}
function At(t) {
if (t) {
if (t.animStart) {
var e = Math.min(1, (new Date() - t.animStart) / Ne), a = _t(t.animScale, e), r = _t(t.animX, e), i = _t(t.animY, e);
t.x = r, t.y = i, t.alpha = _t(t.animAlpha, e), 1 == e ? (t.animStart = null, t.animScale = null, 
t.animX = null, t.animY = null, t.animAlpha = null, t.scale = a, a = 1) : a /= t.scale || 1;
} else var r = t.x, i = t.y;
if (tt && t.scale < 1 && tt.id != t.id) {
var n = U[2], l = U[0], o = U[1], v = tt.x - r, f = tt.y - i, h = Math.min(n - J, 2 * J), s = Math.sqrt(v * v + f * f), c = tt.x - l, u = tt.y - o, d = Math.sqrt(c * c + u * u);
if (d > J && h > s && Math.abs(d - n) < h) {
var p = l - r, g = o - i, m = g / n, y = p / n, w = v * g - f * p > 0 ? 1 : -1, x = l + c / d * n - r, b = o + u / d * n - i;
s = (1 - s / h) * Math.sqrt(x * x + b * b), r -= m * s * w, i += y * s * w;
}
}
return [ r, i, a || 1 ];
}
}
function Dt(t) {
function o() {
var t = q.globalAlpha;
q.globalAlpha /= 3, q.drawImage(n, e - l, a - l), q.globalAlpha = t;
}
var e = t.x, a = t.y, n = (new Date(), t.scale, P(t)), l = n.width / 2;
return Pt(t, t.x, t.y, Ke, .5), Q.push(o), tt = {
id: t.id
}, ct(), {
move: function(t, r, i) {
null == tt && (tt = {}, Q.push(o), at == n && (at = null)), e = t, a = r - l / 2, 
tt.hit = i, tt.x = t, tt.y = r, ct();
},
pack: function() {
Lt(Q, o), at = n, tt = null, st();
},
cancel: function() {
tt = null, Lt(Q, o), t.alpha = 1, t.dirty = !0, ct();
}
};
}
function Ot(t, e, a, r, i, n, l, o, v) {
V = new Date(), Z = U, null == v && (v = 1), U = arguments, ct();
}
function Rt(t, e, a, r, i, n, l) {
if (r) {
var v = this, f = W(null == tt ? 0 : 1), s = f.width / 2, c = tt && tt.hit, u = c && 1 & ~c && J;
for (t -= s, e -= s; n > l; ) {
var d = t + a * Math.cos(l), p = e - a * Math.sin(l, u);
v.push(u && Math.abs(d - tt.x) < u && Math.abs(p - tt.y) < u ? [ 1, W(2), d, p ] : [ 1, f, d, p ]), 
l += r;
}
}
}
function Et(t, e, a, r, i, n, l, o, v) {
console.log("draw base line", [ t, e, a, v ]), this.strokeStyle = "#ddd", this.lineWidth = We, 
this.beginPath(), this.globalAlpha = v, this.arc(t, e, a, 0, 2 * Math.PI, !1), this.stroke(), 
Wt(this, o, o.parent), this.globalAlpha = 1;
}
function Yt(t, e) {
t.strokeStyle = "#ddd", t.lineWidth = We / 2, Wt(t, e, e.children[0], J);
}
function Wt(t, e, a, r) {
if (a) {
var i = e.x, n = e.y, l = a.x, o = a.y;
r && (r = 1 - r / (n == U[1] ? U[2] : Av([ i, n ], [ l, o ])), i = Nt(i, l, r), 
n = Nt(n, o, r)), t.beginPath(), t.moveTo(i, n), t.lineTo(l, o), t.stroke();
}
}
function Bt(t) {
G = [ t ], Pt(t, t.x, t.y, .1, 0);
}
function Xt(t, e) {
if (G = t = t.concat(), e) for (var a = e[0], r = e[1], i = t.length, n = .75; i--; ) {
var l = t[i];
Pt(l, Nt(l.x, a, n), Nt(l.y, r, n), n, 0);
} else for (var i = t.length; i--; ) {
var l = t[i];
Pt(l, l.x, l.y, .1, 0);
}
}
function jt(t, e) {
for (var r = e[0], i = e[1], n = .6, l = t.length; l--; ) {
var o = t[l], v = o.animX && o.animX[1] || o.x, f = o.animY && o.animY[1] || o.y, h = Ue;
o.animStart = 0, o.alpha = .1, o.x = Nt(v, r, n), o.y = Nt(f, i, n), o.scale = h, 
Pt(o, v, f, h, 1);
}
}
function Nt(t, e, a) {
return t * a + e * (1 - a);
}
function _t(t, e) {
return Nt(t[1], t[0], Math.sqrt(e));
}
function Lt(t, e) {
var a = t.indexOf(e);
a >= 0 && t.splice(a, 1);
}
function re(t, e, a) {
switch (t) {
case -1:
ae = ee, ee ? null == e || e >= -3 ? (ee = !1, lt(-1)) : -3 > e && lt(-3 - e) : -3 == e && (ee = !0, 
lt(0));
break;
case -2:
ee && lt(-3 >= a ? -3 - a : -1);
break;
case -3:
ae && (console.log("action", ae, a), lt(-1), ot(-3 - a), ee = !1);
}
}
function ie(t) {
return "function" == typeof callNativeMethod && "iosAppCall" == callNativeMethod.name ? callNativeMethod("window", "showStatusBar", [ t ]) : void 0;
}
function ne(t, e) {
var a = t.parent;
if (a) for (var r = a.children, i = r.length; i--; ) if (r[i] == t) return e.push(i), 
ne(a, e);
return e.push(t.data.id), e;
}
function le(t, e) {
var a = vt(t, e);
ev(a), t && e && (oe(t, e), Tr(a, t, e), Ni(t, e, na), ji());
}
function oe(t, e) {
Ht = t, zt = e, _e(t, e), console.log(t, e, na, la), ht(Ht, zt, na, la), Gt && Ie(Gt);
}
function ve(t) {
var e = t.parent;
e && Pt(e, 0, -na, Qe), rv(Zt);
for (var a = t.children, r = a.length; r--; ) a[r].scale = Ue;
Ie(Gt = t);
}
function fe(t, e) {
var a = -1 == t ? Gt : Gt.children[t];
he(a, e);
}
function he(t, e) {
function a(a) {
st(), rv(Zt), e && e(a), a && se(t);
}
Fr(t, a);
}
function se(t) {
t = t || Gt, kl(t.data), t.cache();
}
function ce(t, e) {
var a = Gt.children, r = -1 == e ? Gt.parent : a[e], i = t >= 0 && a[t];
if (i ? ue(Gt, i) : (i = Qt.node, i.alpha = .5, Qt = null), i.parent = r, i.x = -100, 
-1 == e) if (r) de(r, i), se(i), Me(); else {
var n = i.data.id;
i.data.root = n, i.data.parent = n, se(i), Gt = null, ji(!0);
} else r ? (de(r, i), be(t >= 0 && e > t ? e - 1 : e), se(i)) : se(i);
}
function ue(t, e) {
var a = t.children, r = a.indexOf(e);
e.data.parent = null, a.splice(r, 1);
}
function de(t, e, a) {
var r = t.children, i = r.length, n = e.data;
a = null == a ? i : Math.min(a || 0, i), r.splice(a, 0, e), n.parent = t.data.id, 
n.root = t.data.root;
var l = a > 0 && r[a - 1].data.order, o = i > a && r[a + 1].data.order;
n.order = a > 0 ? i > a ? (l + o) / 2 : l + 1 : i > a ? l - 1 : 1, console.log("new order:", n.order, r.map(function(t) {
return t.data.order;
}));
}
function pe(t, e) {
var a = Gt.children, n = (Gt.data.children, a.length, t >= 0 && a[t]);
if (t == e) {
var l = a[0];
ue(Gt, l), de(Gt, l), se(l);
} else if (t + 1 == e) {
var l = a[a.length - 1];
ue(Gt, l), de(Gt, l, 0), se(l);
} else n ? (ue(Gt, n), e > t && e--, de(Gt, n, e), se(n)) : (n = Qt.node, n.alpha = .5, 
Qt = null, n.parent = Gt, de(Gt, n, e), se(n));
Ie(Gt);
}
function ge(t, e) {
var a = t >= 0 && Gt.children[t], r = JSON.parse(JSON.stringify(a.data));
me(r, e);
}
function me(t, e, a) {
function n(t) {
if (t) {
if (Gt) {
var a = Gt.children;
(e >= a.length || null == e) && (e = a.length), de(Gt, r, e);
} else Gt = r;
se(r), Ie(Gt);
}
i && (Gt = null, ji());
}
var r = Si(t), i = !Gt;
a = a || Vt || [ Gt.x, Gt.y ], r.x = a[0], r.y = a[1], r.scale = .3, r.parent = Gt, 
t.title ? n(1) : he(r, n);
}
function ye(t, e) {
t >= 0 && (e.node = xe(t)), Ut.unshift(e), e.pack();
}
function we() {
return Ut[1] && Ut[1].pack(), Qt = Ut.shift();
}
function xe(t) {
var e = Gt.children;
if (t >= 0 && t < Gt.children.length) {
var a = e[t];
return ue(Gt, a), se(a), Bt(a), Ie(Gt), a;
}
return -2 == t ? (a = Qt.node, Qt = null, a) : void 0;
}
function be(t) {
var e = Gt, a = e.children[t], r = na << 1, i = e.parent;
i && Pt(i, -r, -r, Qe), Se(Gt = a, e);
}
function Me() {
var t = Gt, e = t.parent;
return e ? (e.parent && Pt(e.parent, 0, -na, Qe), void Se(Gt = e, t)) : (Gt = null, 
ji());
}
function Se(t, e) {
function Y() {
var a = new Date(), r = Math.min(new Date() - D, k) / k;
I == r && (console.log("no rate changed!!!"), r = 1), I = r;
var n = M + T * I, o = S + F * I, v = x + P * I, f = y + C * I, c = f * Math.cos(v) / 2, u = -f * Math.sin(v) / 2, d = n + c, p = o + u;
if (Pt(t, n - c, o - u, R), Pt(e, d, p, E), i) for (var g = h.length, m = P * I; g--; ) {
var w = h[g], b = 1 == I ? 0 : Math.pow(1 - I, 2);
v = s[g] + m, Pt(w, d + f * Math.cos(v), p - f * Math.sin(v), Ue, b);
}
if (xo(new Date() - a), 1 == I) {
clearInterval(O);
var A = l.indexOf(e);
A >= 0 && (l = l.concat(), l.splice(A, 1)), jt(l, Vt, e == t.parent);
}
}
var a = [ t.x, t.y ], r = [ e.x || 0, e.y || 0 ], i = t.parent == e, n = e.children, l = t.children, v = (Vt[3], 
Vt[4]), f = Vt[5], h = [], s = [];
if (i) {
for (var c = n.length; c--; ) {
var u = n[c], d = Re(r, [ u.x || 0, u.y || 0 ]);
(null == v || d >= v && f >= d) && u != t && (h.push(u), s.push(d));
}
Xt(n);
} else Xt(n, Vt);
for (var c = (Ie(t), l.length); c--; ) {
var u = l[c];
u != e && (u.animStart = 0, u.alpha = 0);
}
t.hit = 0, i && (Pt(e, 0, -na, Qe), e.hit = -1);
var g = [ t.animX[1], t.animY[1] ], m = [ e.animX[1], e.animY[1] ], y = Av(a, r), w = Av(g, m), x = Re(a, r), b = Re(g, m);
Math.abs(x - b) > Math.PI && (x += x > b ? -$t : $t);
var M = (a[0] + r[0]) / 2, S = (a[1] + r[1]) / 2, T = (g[0] + m[0]) / 2 - M, F = (g[1] + m[1]) / 2 - S, P = b - x, C = w - y, I = 0, k = (Math.abs(P / $t) + .5) * ze, A = Math.min(k / 8, je), D = new Date() - A, O = setInterval(Y, A), R = t.root ? Ge : 1, E = e == t.parent ? Qe : Ue;
Y();
}
function Te(t, e) {
var a = new Date();
if (te) {
var r = +new Date(), i = Math.min(r - te[0], He) / He, n = te[3] + i * (te[2] - te[1]), l = n - te[3] + te[1];
Gt.angle = n, te[0] = r, clearInterval(te[4]);
} else n = Gt.angle || 0, te = [ new Date() ], l = Re(Vt, t);
var o = te[2] = Re(Vt, e), v = je;
Math.abs(l - o) > Math.PI && (l += l > o ? -$t : $t), v = Math.min(v, He / (Math.abs(l - o) / .01)), 
te[0] -= v, te[1] = l, te[3] = n, te[4] = setInterval(Fe, v), xo(new Date() - a, "routeChild"), 
Fe();
}
function Fe() {
var t = new Date(), e = Math.min(+new Date() - te[0], He) / He, a = te[3] + e * (te[2] - te[1]);
return a == Gt.angle && (e = 1, console.log("no angle changed!!!")), Gt.angle = a, 
Ie(Gt, Vt), xo(new Date() - t, "routeAnimator"), 1 == e ? (te = clearInterval(te[4]), 
!0) : void 0;
}
function Ie(t, e) {
Vt = e || Ae(Gt);
var a = Vt[0], r = Vt[1], i = Vt[2], n = t.angle || 0, l = t.children, o = l.length, v = Vt[3], f = 0, h = a, s = r;
if (v) {
h && (h -= na, s -= na), n += .25 * $t, f = ke(o, n), n += f * v, n %= $t, f %= o, 
0 > f && (f += o);
var c = Vt[4], u = Vt[5], d = n - v / 2;
0 != f && (l = l.slice(f).concat(l.slice(0, f)));
} else v = $t / (o || 4), n %= $t, c = d = o ? n + v / 2 : n, u = c + $t;
t.hit = 0, Pt(t, h, s, 1, 1);
var p = [ a, r, i, v, c, u, d, t ];
Ot.apply(null, p);
for (var g = 0; o > g; g++) {
var m = a + i * Math.cos(n), y = r - i * Math.sin(n), w = l[g];
n > u && c && (v = (c + $t - u) / (o - g), c = 0), n += v, w.hit = 2 * f + 1, Pt(l[g], m, y, Ue, 1), 
++f == o && (f = 0);
}
return p;
}
function ke(t, e) {
var a = Vt[3], r = Vt[4], i = r - e;
return 0 | i / a;
}
function Ae(t) {
var e = t.children.length, a = Ue * na;
if (5 > e || ia * Math.sin(Math.PI / e) - a > a / 3) return [ Ht / 2, zt / 2, ia ];
var r = Ht - a, i = zt - a;
zt > Ht ? i -= a : r -= a;
var n = Math.min(r - a, i - a), l = 2 * Math.asin(1.5 * a / n), o = Math.PI / 2 - Math.asin((Ht - r + a) / n), v = Math.PI + Math.asin((zt - i + a) / n), f = [ r, i ];
return f.push(n), f.push(l), f.push(o), f.push(v), f;
}
function De(t, e, a) {
var r = [ t, e ], i = Vt[2], n = i + na, l = Av([ Gt.x, Gt.y ], r, n), o = Vt.length > 4, v = Ze * na * 2;
if (na >= l) return 0;
if (o && (l = Av(Vt, r, n)), n > l) {
var f = Math.abs(l - i);
if (na > f) {
for (var h = Gt.children, s = h.length, c = na * Ue, u = a ? Math.max(na >> 1, la) : la, d = 0; s > d; d++) {
var p = h[d], g = [ p.x, p.y ], m = Av(g, r, c);
if (c >= m) return 2 * d + 1;
}
if (u += 16, u > f && (u = Oe(i, s, u, r))) return u;
}
} else {
var y = Gt.parent, w = y ? na * Qe : v, x = y ? [ y.x, y.y ] : [ 0, 0 ];
if (Av(x, r, w) < n) return -1;
if (Av([ Ht, 0 ], r, v) < n) return -2;
}
if (e > zt - v) {
var b = v, M = (Ht - t) / b | 0;
return -3 - M;
}
}
function Oe(t, e, a, r) {
var i = Re(Vt, r), n = 2 * Math.asin(a / t), l = Gt.angle || 0, o = Vt[3], v = e;
if (o) {
var f = Vt[5], h = ke(e, l += $t / 4);
l += h * o - o / 2, h--, l %= $t, v = Math.floor((f - l) / o);
} else e ? (o = $t / e, l += o / 2) : (o = $t / 4, v = 4);
for (var s = 0; v > s; s++) {
var c = Math.abs(i - l) % $t;
if (n > c) return h && (s += h, s %= e, 0 > s && (s += e)), 2 * s + 2;
l += o;
}
}
function Re(t, e) {
var a = e[0] - t[0], r = e[1] - t[1], i = Math.acos(a / Math.sqrt(a * a + r * r)) || 0;
return r > 0 && (i = $t - i), i;
}
function pa(t, e, a, r, i) {
function u(t, e, a) {
t.fillStyle = "#ddd", t.fillRect(0, 0, e, a);
}
t.add(new fv(r, i, u), 0, a), ua = e, da = ua.data;
var n = a >> 3, l = a + n, o = 0 | .8 * a, v = l + o + n, f = i - v - n, h = .6 * o | 0, s = .3 * o | 0, c = [ "left:", n, "px;width:", r - n - n, "px;border:0;margin:0;padding:0;position:absolute;z-index:9;display:block;font-size:" ];
if (null == sa) {
var d = document.body;
sa = document.createElement("input"), ca = document.createElement("textarea"), sa.placeholder = "输入显示标题", 
ca.placeholder = "添加详细注备", sa.setAttribute("style", c.concat(h, "px;top:", l, "px;height:", o, "px").join("")), 
ca.setAttribute("style", c.concat(s, "px;top:", v, "px;height:", f, "px").join("")), 
d.appendChild(sa), d.appendChild(ca);
} else {
if ("block" == sa.style.display) return;
sa.style.display = "block", ca.style.display = "block";
}
sa.value = da.title || "", ca.value = da.content || "";
}
function Fa(t, e, a, r, i) {
wa = e, ya = .618 * a;
var n = r / 6, l = r - n - n, o = a + ya / 2, v = o + 1.5 * ya, f = i - v;
xa = new fv(l, ya, Ca, Ia), ba = new fv(r, f), t.add(xa, n, o), t.add(ba, 0, v), 
Ta = Sa = Ma = null, Pa(ga);
}
function Pa(t) {
switch (ga = t, ba.clear(), xa.repaint(), t) {
case 0:
return Ma || (Ma = Da()), ba.add(Ma);
case 1:
return Sa || (Sa = ka()), ba.add(Sa);
case 2:
return Ta || (Ta = Aa()), ba.add(Ta);
}
}
function Ca(t, e, a) {
var r = ma.map(function(t, e) {
return 0 == e && wa.data.eventEnable && (t += "√"), t;
});
this.bound = Mv(t, 0, a, 0, e, ga, Pv, r);
}
function Ia(t, e, a) {
if (-1 == t) for (var i = this.bound, n = i.length; n--; ) if (a > i[n]) {
ga != n && Pa(n);
break;
}
}
function ka() {
var t = new _l(ba.width, ba.height, "投票功能开发中...", "#333");
return t;
}
function Aa() {
var t = new _l(ba.width, ba.height, "开发中...", "#333");
return t;
}
function Da() {
function h(t) {
wa.data.eventEnable != t && ((wa.data.eventEnable = t) && (o.checked || v.checked || (v.checked = o.checked = !0, 
v.repaint(), o.repaint())), wa.dirty = !0, i.repaint(), xa.repaint(), f.repaint());
}
var t = ba.width, e = ba.height, a = new fv(t, e), r = e - 6 * ya, i = new fv(t, .55 * r, Ra), n = new oo(t, .45 * r, Oa(), function(t, e, a, r, n) {
wa.data.eventStart = new Date(t, e, a, r, n).getTime(), h(!0), wa.dirty = !0, i.repaint();
}), l = .1 * t, o = new to(t / 2 - l, .8 * ya, "使用声音"), v = new to(t / 2, .8 * ya, "使用振动"), f = new fv(t - l, ya, Ea, function(t) {
1 == t && h(!wa.data.eventEnable);
});
return v.event = o.event = function(t) {
1 == t && (this.repaint(), (this.checked = !this.checked) ? h(!0) : v.checked || o.checked || h(!1));
}, a.add(i), a.add(n), a.add(o, l, e - 5.4 * ya), a.add(v, t / 2, e - 5.4 * ya), 
a.add(f, (t - f.width) / 2, e - 1.6 * ya), a;
}
function Oa() {
return new Date(wa.data.eventStart || +new Date() + 18e5);
}
function Ra(t, e, a) {
m(t, wa, e / 3, a);
var r = wa.data.eventStart && Oa();
if (r) {
t.fillStyle = r >= new Date() ? "#666" : "#600";
var i = a / 6 | 0, n = Wv(new Date(r)).replace(/^\s+|\s+$/g, "").split("\n");
} else {
n = wa.data.eventStart ? [ "", "事件未启用", "" ] : [ "", "请设置时间...", "(滑动时间选择器)", "" ];
var i = a / 8 | 0;
t.fillStyle = "#aaa";
}
t.textBaseline = "middle";
for (var l = .3 * a / n.length, o = (a - 2 * l) / n.length, v = l + o / 2, f = 0; f < n.length; f++) {
var h = Math.max(.4 * e, a), s = n[f], c = /[^\d\-]+/gm, u = c.exec(s), d = 0;
if (t.font = (u ? i : .8 * i | 0) + "px " + Ye, u) do {
var p = s.substring(d, d = u.index);
p && (t.fillText(p, h, v), h += t.measureText(p).width + (i >> 2));
var p = u[0];
d += p.length, t.font = (.65 * i | 0) + "px " + Ye, t.fillText(p, h, v), h += t.measureText(p).width + (i >> 2), 
t.font = i + "px " + Ye;
} while (u = c.exec(s));
t.fillText(s.substr(d), h, v), v += o;
}
}
function Ea(t, e, a) {
wa.data.eventEnable ? Mv(t, 0, a, 0, e, 0, Tv, [ "停用提醒" ]) : Mv(t, 0, a, 0, e, 0, Tv, [ "启用提醒" ]);
}
function Za(t, e, a, r, i) {
var n = .618 * a, l = i / 2.8, o = l + n, v = l + 1.2 * n, f = i - v, h = f - 3 * n;
Xa = n >> 1, Ba = r, Wa = e, za = new fv(Ba, l - a, Va, tr), Ga = new fv(Ba, o - l, er, ar), 
Qa = new fv(Ba, f, lr), Qa.supportScroll = !0, Ua = new fv(Ba, f), Ua.add(new fv(Ba, h, or, vr)), 
Ua.add(new fv(Ba, .9 * n, ir, nr), 0, h + n / 2), Ua.add(new fv(Ba, .9 * n, fr, sr), 0, f - n), 
Ka = new fv(Ba - Xa, f, cr, ur), t.add(za), t.add(Ga, 0, l), t.add(Qa, 0, v), $a ? Qa.add(Ka, Xa / 2) : Qa.add(Ua), 
rr(Wa);
}
function Va(t, e, a) {
if (La > 0 && 0 == $a) var r = Ja[ja] || Ja[0], i = Math.max(Na, 0), n = 2 == La ? r.slice(i).concat(r.slice(0, i)) : [ Wa.data.fill || r[i] ];
this.iconRange = m(t, Wa, e, a, Wa.data.icon, n), Wa.childColor = n;
}
function tr(t, e, a, r) {
var i = this.iconRange;
i && Wa.data.icon && a <= i[2] && r <= i[3] && a >= i[0] && r >= i[1] && (Wa.data.icon = "", 
Wa.dirty = !0, this.repaint());
}
function er(t, e, a) {
var r = Xa, i = e - r, n = Mv(t, 0, a, r, i, $a);
if ($a) {
n("颜色", .3);
var l = 1 == $a ? null : "#ddd", o = 2 == $a ? null : "#ddd";
Ha ? (n("图标", .25, Fv, l), n(Ha, .2, hr, o), this.bound = n("更多", .25, Cv, "#ddd")) : (n("图标", .35, Fv, l), 
this.bound = n("更多", .35, Cv, o));
} else n("颜色", .5, Fv), this.bound = n("图标", .5, Cv);
}
function ar(t, e, a) {
if (1 == t) for (var i = this.bound, n = i.length; n--; ) if (a > i[n]) {
if ($a != n) {
if (!n != !$a) {
Qa.clear();
var l = n ? Ka : Ua;
Qa.add(l, (Ba - l.width) / 2);
} else Ka.resize(Ka.width, Qa.height);
Qa.offsetY = 0, Qa.drawOffsetY = 0, 3 == n && (n = 2, Ha = ""), $a = n, this.repaint(), 
Qa.repaint();
}
break;
}
}
function rr(t) {
var e = t.data.fill || "", a = e.toUpperCase();
if (_a >= 0 && (Na = Ja[_a].indexOf(a), Na >= 0)) return void (ja = _a);
ja = 0, Na = -1;
for (var r = Ja.length; r; ) if (Na = Ja[--r].indexOf(a), Na >= 0) {
ja = _a = r;
break;
}
}
function ir(t, e, a) {
Mv(t, 0, a, Xa, e - Xa, _a, null, qa);
}
function nr(t, e, a) {
-1 == t && (_a = Math.min((a - Xa) / (Ba - Xa - Xa) * qa.length | 0, qa.length - 1), 
Ua.repaint());
}
function lr(t, e, a) {
t.fillStyle = "#FFF", t.fillRect(0, 0, e, a);
}
function or(t, e, a) {
for (var r = Ja[_a], i = a / 4, n = (e - Xa - Xa) / 7, l = .309 * Math.min(i, n), o = ja == _a ? Na : -1, v = 0, f = 0, h = i / 2; 4 > f; f++) {
for (var s = 0, c = Xa + n / 2; 7 > s; s++, v++) {
var u = t.fillStyle = r[v];
o == v && (t.strokeStyle = u, t.lineWidth = .1 * l, t.beginPath(), t.arc(c, h, 1.2 * l, 0, 2 * Math.PI, !1), 
t.stroke()), t.beginPath(), t.arc(c, h, l, 0, 2 * Math.PI, !1), t.fill(), c += n;
}
h += i;
}
}
function vr(t, e, a, r) {
if (1 == t) {
var i = this.height;
a = Math.min(6, 0 | (a - Xa) / (Ba - Xa - Xa) * 7), r = 0 | (4 * r - .1) / i;
var n = 7 * r + a, l = Ja[_a];
n >= 0 && (_a != ja || Na != n) && (ja = _a, Na = n, Wa.data.fill = l[n], Wa.dirty = !0, 
za.repaint(), Ua.repaint());
}
}
function fr(t, e, a) {
if (0 > La) Mv(t, 0, a, 0, e, -1, hr, [ "批量修改子节点颜色" ]); else {
var r = [ "重置", "设置同色", "自动变色" ];
Mv(t, 0, a, 0, e, La, hr, r);
}
}
function hr(t, e, a, r, i) {
t.fillRect(r, e, i - r, a - e);
}
function sr(t, e, a) {
if (1 == t) if (0 > La) La = 0, this.repaint(); else {
var i = Math.min(0 | 3 * a / this.width, 2);
console.log(i, a, this.width, La), i != La && (La = i, console.log("new childColor:", La), 
za.repaint(), Ua.repaint());
}
}
function cr(t, e, a) {
t.fillStyle = "#FFF", t.fillRect(0, 0, e, a);
var r = this.parentWidget.height;
if (1 == $a) var i = Jr(e, a); else if (2 == $a) if (Ha) var n = ti.indexOf(Ha), i = Gr(n, e); else var i = Lr(e, a);
var l = i.height, o = this.parentWidget.offsetY;
if (this.resize(this.width, l), t.drawImage(i, 0, 0), l > r && o >= 0) {
var v = r >> 3, f = r - v + o, h = t.createLinearGradient(0, f, 0, f + v);
h.addColorStop(0, "rgba(255,255,255,.01)"), h.addColorStop(.1, "rgba(255,255,255,.2)"), 
h.addColorStop(.5, "rgba(255,255,255,.8)"), h.addColorStop(1, "rgba(255,255,255,1)"), 
t.fillStyle = h, t.fillRect(0, f, e, v);
}
}
function ur(t, e, a, r, i, n) {
if (1 == t && $a) {
var l = this.width, o = this.height;
if (2 != $a || Ha) {
if (Ha && 2 == $a) var v = ti.indexOf(Ha), f = Zr(v, i, n); else var f = Vr(i, n);
f && (Wa.data.icon = f, Wa.dirty = !0, za.repaint());
} else i = 0 | Math.min(3 * i / l, 2), n = 0 | Math.min(3 * n / o, 2), Ha = ti[3 * n + i], 
this.repaint(), Ga.repaint();
}
}
function Tr(t, e, a) {
mr = e, yr = a;
}
function Fr(t, e) {
dr = t, pr = Or(t), wr = mr / 6 | 0, xr = e, Cr(t.data.title ? gr : 0), ha();
}
function Pr() {
var t = JSON.stringify(pr), e = JSON.stringify(Or(dr)), a = dr.childColors;
if (a) for (var r = dr.children, i = r.length; i--; ) r[i].data.fill = a[(i + 1) % a.length], 
r[i].dirty = 1;
delete dr.childColors, xr(t != e || a), xr = null;
}
function Cr(t) {
Mr = Ir(t), t ? 1 == t ? Za(Mr, dr, wr, mr, yr) : Fa(Mr, dr, wr, mr, yr) : pa(Mr, dr, wr, mr, yr);
}
function Ir(t) {
gr = t;
var e = new fv(mr, yr, function(t) {
t.fillStyle = "#FFF", t.fillRect(0, wr, mr, yr - wr);
});
return e.add(new fv(mr, wr, kr, Dr)), e.attach(), e;
}
function kr(t, e, a) {
t.clearRect(t, 0, 0, e, a), Mv(t, 0, a, 0, e, gr, Ar, br), gr || window.scrollTo(0, 0);
}
function Ar(t, e, a, r, i) {
if (t.fillRect(r, e, i - r, a - e), 0 == r && i == mr) {
var n = a - e, l = i - r, o = r + 3.5 * l / 4, v = (e + a) / 2;
t.strokeStyle = "#888", t.beginPath(), t.lineWidth = 5, t.arc(o, v, .32 * n, 0, 2 * Math.PI, !1), 
t.stroke();
}
}
function Dr(t, e, a) {
if (-1 == t) {
var i = 0 | 4 * a / mr, n = br.length - 1;
i && 0 == gr && fa(), i >= n ? Pr() : i != gr && (Cr(i), i || ha());
}
return !0;
}
function Or(t) {
var e = t.data;
return {
title: e.title || "",
content: e.content || "",
fill: e.fill,
icon: e.icon,
eventEnable: e.eventEnable,
eventStart: e.eventStart
};
}
function _r(t, e) {
Yr.push(t.split(","));
for (var a = Wr.length >> 3, r = Wr.push.apply(Wr, e.split(",")) >> 3, i = r - a; i--; ) if (1 & a++) {
var n = 8 * a, l = n - 8;
Wr = Wr.slice(0, l).concat(Wr.slice(l, n).reverse()).concat(Wr.slice(n));
}
}
function Lr(t, e) {
var a = Er(Lr), r = a[0];
if (a[1] != t || a[2] != e) {
a[1] = r.width = t, a[2] = r.height = e;
var i = r.getContext("2d");
i.save();
try {
var n = t / 3, l = 2 * n, o = e / 3, v = 2 * o, f = Math.min(n, o) / 3;
if (i.strokeStyle = "#ddd", i.lineWidth = 4, i.moveTo(0, o), i.lineTo(t, o), i.moveTo(0, v), 
i.lineTo(t, v), i.moveTo(n, 0), i.lineTo(n, e), i.moveTo(l, 0), i.lineTo(l, e), 
i.stroke(), i.textAlign = "left", i.fillStyle = "#3b88c3", Nr) {
var h = f / Nr;
i.scale(h, h), f = Nr, o /= h, n /= h;
}
i.font = (0 | f) + "px " + Ye;
for (var s = 0; 9 > s; s++) {
var c = s % 3, u = (s - c) / 3;
qr(i, c * n, u * o, n, o, f, Yr[s]);
}
} finally {
i.restore();
}
}
return r;
}
function qr(t, e, a, r, i, n, l) {
var o = e + r / 2, v = a + i / 2;
t.fillText(l[0], o - n, v), t.fillText(l[1], o - n, v + n), t.fillText(l[2], o, v), 
t.fillText(l[3], o, v + n);
}
function Jr(t, e) {
var a = Er(Jr), r = a[0];
if (a[1] != t || a[2] != e) {
a[1] = r.width = t, a[2] = r.height = e;
var i = r.getContext("2d"), n = t / 8, l = e / 8;
zr(i, Wr, n, l);
}
return r;
}
function $r(t, e, a, r, i) {
if (Nr) {
t.save();
try {
var n = i / Nr;
t.scale(n, n), t.textAlign = "center", t.fillStyle = "#3b88c3", a /= n, r /= n, 
i = Nr, t.font = Nr + "px " + Ye, Kr(t, e, a, r, i);
} finally {
t.restore();
}
} else Hr.apply(this, arguments);
}
function Hr(t, e, a, r, i) {
t.font = (0 | i) + "px " + Ye, t.textAlign = "center", t.fillStyle = "#3b88c3", 
Kr(t, e, a, r, i);
}
function zr(t, e, a, r) {
Xr = a, jr = r, t.save();
try {
var i = .8 * Math.min(a, r);
if (Nr) {
var n = i / Nr;
t.scale(n, n), a /= n, r /= n, i = Nr;
}
t.font = (0 | i) + "px " + Ye, t.textAlign = "center", t.fillStyle = "#3b88c3";
for (var l = 0; l < e.length; l++) {
var o = l % 8, v = (l - o) / 8;
Hr(t, e[l], o * a + (a - i) / 2, v * r + (r - i) / 2, i);
}
} finally {
t.restore();
}
}
function Gr(t, e) {
var a = Er(Gr), r = a[0], i = Br[t], n = e / 8 * Math.ceil(i.length / 8);
if (a[1] != t || a[2] != e) {
a[1] = t, a[2] = r.width = e, r.height = n;
var l = r.getContext("2d"), o = e / 8, v = o;
zr(l, i, o, v);
}
return r;
}
function Qr(t, e, a, r, i, n) {
t.beginPath(), t.moveTo(e, a + n), t.lineTo(e, a + i - n), t.quadraticCurveTo(e, a + i, e + n, a + i), 
t.lineTo(e + r - n, a + i), t.quadraticCurveTo(e + r, a + i, e + r, a + i - n), 
t.lineTo(e + r, a + n), t.quadraticCurveTo(e + r, a, e + r - n, a), t.lineTo(e + n, a), 
t.quadraticCurveTo(e, a, e, a + n), t.fill();
}
function Ur(t, e, a, r, i) {
t.save();
try {
t.fillStyle = "#3b88c3", Qr(t, a - 1, r - 1, i + 2, i + 2, i / 6), t.fillStyle = "white", 
r += .9 * i, a += i / 2, t.fillText(e, a, r);
} finally {
t.restore();
}
}
function Kr(t, e, a, r, i) {
var n = e.charAt(0);
if (n >= "#" && "9" >= n) return Ur(t, n, a, r, i);
if (n = "�" && 2 == e.length) {
var l = e.charCodeAt(1);
if (l >= 56806 && 56831 >= l) return Ur(t, String.fromCharCode(-56741 + l), a, r, i);
}
r += .88 * i, a += i / 2, t.fillText(e, a, r);
}
function Zr(t, e, a) {
var r = Math.min(e / Xr | 0, 7), i = a / jr | 0;
return Br[t][8 * i + r];
}
function Vr(t, e) {
var a = Math.min(t / Xr | 0, 7), r = e / jr | 0;
return Wr[8 * r + a];
}
function ri(t) {
return t.replace(/A{3,64}|\:\w/g, function(t) {
var e = t.length - 3;
if (e >= 0) return ":" + (36 > e ? e.toString(36) : (e - 26).toString(36).toUpperCase());
var e = t.charCodeAt(1) - 48;
return e > 9 && (e > 48 ? e -= 39 : e += 19), new Array(e + 4).join("A");
});
}
function ii(t) {
for (var e = [], a = t.length, r = 0; a > r; r++) {
var i = t.charCodeAt(r);
e[r] = i >> 8, e[r + a] = 255 & i;
}
return ri(btoa(String.fromCharCode.apply(String, e)).replace(/[+\/=]/g, li));
}
function ni(t) {
for (var e = [], a = atob(ri(t.replace(/[\-_.]/g, li))), r = a.length / 2, i = 0; r > i; ) {
var n = a.charCodeAt(i), l = a.charCodeAt(r + i++);
e.push(n << 8 | l);
}
return String.fromCharCode.apply(String, e);
}
function li(t) {
return oi.charAt((oi.indexOf(t) + 3) % 6);
}
function pi(t) {
for (var r, e = t.split(/\r\n?|\n/), a = [], i = 0; i < e.length; i++) {
var n = e[i], l = n.search(/\S/);
if (l != n.length - 1) if ("#" == n.charAt(l)) {
var r = a[a.length - 1], o = n.substr(l + 1);
r.content ? r.content += "\n" + o : r.content = o;
} else {
var v = a[l - 1], r = {
children: []
};
v && v.children.push(r), a[l] = r, a.length = l + 1, gi(n, r);
}
}
return a[0];
}
function gi(t, e) {
var a = t.match(/\s*(.*?[^\\])(?:\{(\w*)(#\w+)?(?:,(.+))?\})?$/);
e.title = a[1], e.id = a[2], e.fill = a[3];
var r = a[4];
if (r) {
r = r.split(",");
for (var i = r.length; i--; ) t = r[i].split("="), e[t[0]] = t[1];
}
}
function mi(t) {
var e = [];
return wi(t, e, ""), e.join("");
}
function yi(t, e) {
e.push(t.title.replace(/([\{\}\\])|[\r\n]/g, "\\$1"), "{"), e.push(t.id || "", t.fill || "");
for (var a in t) /^\b(?:id|fill|title|content|children)\b/.test(a) || e.push(",", a, "=", String(t[a]).replace(/([\{\}\\,])|[\r\n]/g, "\\$1"));
e.push("}");
}
function wi(t, e, a) {
e.push(a), yi(t, e), e.push("\n"), t.content && e.push("#", a, t.content.replace(/\r\n|\n(?=\s*\S)/g, "$0#" + a), "\n");
var r = Cl(t), i = r && r.length;
a += "	";
for (var n = 0; i > n; n++) wi(r[n], e, a);
}
function Si(t) {
return new Ti(t);
}
function Ti(t) {
var e = t.id, a = bi[e];
return a ? a : (e && (bi[e] = this), this.id = Mi++, void (this.data = t));
}
function Fi(t, e) {
return t.order - e.order;
}
function Wi(t) {
Yi(!1), ve(t);
}
function Bi() {
Yi(!1), me({}), Ri = null;
}
function Xi() {
if (!Ri) {
Ri = [];
for (var t = Tl(), e = t.length; e--; ) {
var a = t[e], r = Ri[e] = Si(a);
r.nodeCount = a.nodeCount, r.loaded = !1;
}
}
}
function ji(t) {
t && (Ri = null), Xi(), Di = null, Yi(!0);
var e = new fv(Pi, Ci);
Oi = new fv(Pi, Ci - Ii, function(t, e, a) {
t.fillStyle = "#fff", t.fillRect(0, 0, e, a);
}), Oi.add(_i(!0), -Pi, 0), Oi.add(_i(), 0, 0), e.add(new fv(Pi, Ii, $i, Ji)), e.add(Oi), 
Oi.event = Hi;
var a = new fv(Pi, Ci, function(t, e, a) {
1 != r && (t.fillStyle = "#fff", t.globalAlpha = 1 - r, t.fillRect(0, 0, e, a));
});
e.add(a, 0, 0), e.attach();
var r = .1, i = setInterval(function() {
r = Math.min(r + .1, 1), e.repaint(), 1 == r && (clearInterval(i), e.remove(a));
}, 24);
}
function Ni(t, e, a) {
Pi = t, Ci = e, ki = a, Ai = ki * Ve, Ii = ki * ta;
}
function _i(t) {
var e = new fv(Pi, Ci - Ii, function(e, r, i) {
if (!a.length) {
var n = r / 12, l = r / 2, o = i / 3;
e.font = n + "px " + Ye, e.fillStyle = "#ddd", e.textAlign = "center", e.baseLine = 0, 
e.textBaseline = "middle", t ? e.fillText("未发现有效事件提醒", l, o) : e.fillText("点击(+) 添加创意", l, o), 
e.fillText("...", l, o + n);
}
}, null, !0), a = Ri;
if (t) {
a = [];
for (var r = Fl(), i = r.length; i--; ) {
var n = r[i];
a[i] = Si(n);
}
a.sort(function(t, e) {
return t.data.eventStart - e.data.eventStart;
});
}
for (var i = 0; i < a.length; i++) {
var l = a[i], o = null;
if (t) for (var v = Ri.length - 1; v >= 0; v--) if (Ri[v].data.id == l.data.root) {
o = Ri[v];
break;
}
qi(e, a, l, Ii, t, o);
}
return e;
}
function Li(t) {
Il(t.data);
var e = Ri.indexOf(t);
e >= 0 && Ri.splice(e, 1);
}
function qi(t, e, a, r, i, n) {
function v(t, e, r) {
var o = Ei(i ? v : s), f = o[0], h = this.slideX || 0, c = f.getContext("2d");
if ((o[1] != a.data.updateTime || o[2] != r) && (o[1] = a.data.updateTime, o[2] = r, 
f.width = e, f.height = r, i ? Ki(c, a, e, r, n) : Ui(c, a, e, r)), h) {
t.fillStyle = "#eee";
var u = 0, p = (Math.PI / 2, .5 * l), g = 1.4 * p;
0 > h ? (u = e - l, t.fillRect(e + h, 0, -h, r)) : t.fillRect(0, 0, h, r), Rv(t, u + .25 * l, (r - g) / 2, p, g, "#ddd");
}
t.drawImage(f, h, 0);
}
function h(r) {
e.splice(e.indexOf(a), 1);
var i = t.children, n = t.rangeY, l = i.indexOf(o), v = 2 * l, f = 10, h = o.height / f, s = setInterval(function() {
for (var e = n.length - 1; e >= v; e--) n[e] -= h;
--f || (clearInterval(s), r && r()), t.repaint();
}, 25);
l >= 0 && (i.splice(l, 1), t.rangeX.splice(v, 2), n.splice(v, 2)), t.repaint();
}
function s(t, e, r, n, o, v) {
var s = this.slideX || 0;
if (t >= 1) s ? o > Pi + s ? h(function() {
Li(a), a.data.eventCount && ji();
}) : s > 0 && s > o ? (h(), delete a.data.eventStart, delete a.data.eventEnable, 
a.dirty = !0, kl(a.data)) : (Wi(a), 2 == t && fe(-1)) : (Wi(a), 2 == t && fe(-1)); else if (-1 == t) Di && Di != this && Qi(); else if (-2 == t) {
null == f && (f = o);
var c = Math.abs((o - r) / (v - n));
if (c > .5) {
var u = s + o - f;
return u = i ? Math.max(Math.min(u, l), 0) : Math.min(Math.max(u, -l), 0), s != u && (this.slideX = u, 
this.repaint(), Di = u ? this : null, f = o), !0;
}
f = o;
} else -3 == t && (f = null, 0 != s && s != l && s != -l && Di && Qi());
}
var l = .8 * r, o = new fv(Pi, r, v, s);
t.add(o), o.supportScroll = 1;
var f;
}
function Ji(t, e, a) {
var i = Y().height / 2, n = Oi.slideX || 0, l = n / Pi, o = .2 * i;
o = o + (Pi - 2 * (o + i)) * l + i, 1 == t && Math.abs(o - a) <= i && Bi();
}
function $i(t, e, a) {
var r = Y(), i = 40, n = r.height / 2, l = Oi.slideX || 0, o = l / Pi, v = i + (a - i) / 2 - n, f = .2 * n;
f += (e - 2 * (f + n)) * o, t.strokeStyle = "#999", t.fillStyle = "#fff", t.fillRect(0, 0, e, a), 
t.strokeRect(0, 40, e, a - 40), t.translate(f + n, v + n), t.rotate(Math.PI * o), 
t.drawImage(r, -n, -n);
}
function Hi(t, e, a, r, i, n) {
if (-1 == t) this.latestX = i; else if (-2 == t) {
var l = Math.abs((i - a) / (n - r));
if (l > .5) {
var o = this.slideX || 0, v = Math.max(Math.min(o + i - this.latestX, Pi), 0);
if (Di) ; else if (o != v) return this.slideX = v, Gi(this), this.latestX = i, !0;
}
this.latestX = i;
} else if (-3 == t) {
var o = this.slideX;
0 != o && o != -Pi && zi(this, o > Pi / 2 ? Pi : 0);
}
}
function zi(t, e) {
var a = t.slideX, r = (e - a + e - Pi / 2) / 10;
if (r) var i = setInterval(function() {
a += r, (0 > a || e > 0 && a > e) && (a = e, clearInterval(i)), t.slideX = a, Gi(t);
}, 24);
}
function Gi(t) {
var e = t.slideX, a = t.rangeX;
a[0] = e - Pi, a[1] = a[2] = e, a[3] = Pi + e, t.parentWidget.repaint();
}
function Qi() {
var t = Ii / 10, e = Di, a = e.slideX, r = setInterval(function() {
a = Math.min(a + t, 0), a || clearInterval(r), e.slideX = a, e.repaint();
}, 10);
Di = null;
}
function Ui(t, e, a, r) {
e.scale = Ai / ki;
var i = a / 3, n = w(e), l = e.data, o = r / 8 | 0, v = r / 4, f = 2 * i, h = i, s = v;
t.lineWidth = 4, t.fillStyle = "#fff", t.strokeStyle = "#f2f2f2", t.fillRect(0, 0, a, r), 
t.strokeRect(0, 0, a, r), t.drawImage(n, (i - n.width) / 2, .65 * (r - 2 * Ai)), 
t.font = "bold " + (.8 * o | 0) + "px " + Ye, t.fillStyle = "#333", t.textAlign = "left", 
t.baseLine = 0, t.textBaseline = "middle", t.fillText(ea, h, s), t.fillText(aa, f, s);
var c = n.width / 8;
s += v, t.fillStyle = "#666", t.font = o + "px " + Ye, t.fillText(Ev(l.createTime), h + c, s, i - v), 
t.fillText(Ev(l.updateTime), f + c, s, i - v), s += v;
var u = v / 3;
t.font = (.8 * o | 0) + "px " + Ye, t.beginPath(), t.fillStyle = "#669966", t.arc(h + u, s, u, 0, 2 * Math.PI, !0), 
t.fill(), t.fillStyle = "#999", t.fillText(e.nodeCount + "个节点", h + 2.5 * u, s);
var d = e.data.eventCount;
d && (t.beginPath(), t.fillStyle = "#9fd", t.arc(f - u, s, u, 0, 2 * Math.PI, !0), 
t.fill(), t.fillStyle = "#999", t.fillText(d + "个提醒", f + u, s));
}
function Ki(t, e, a, r, i) {
var n = e.data.eventStart, l = e == i ? Ai : .8 * Ai, o = .6 * Ai;
e.scale = l / ki;
var v = e != i && (i.scale = o / ki) && w(i), f = w(e), s = (e.data, r / 8 | 0), c = r / 5, u = n - new Date();
t.lineWidth = 4, t.fillStyle = 0 > u ? "#eee" : "#fff", t.strokeStyle = "#f2f2f2", 
t.fillRect(0, 0, a, r), t.strokeRect(0, 0, a, r);
var d = a - r, p = r - l, g = a - .6 * o, m = o, b = Math.sqrt(Math.pow(g - d, 2) + Math.pow(m - p, 2));
t.lineWidth = 4, v && v != f ? (t.strokeStyle = "#ddd", t.setLineDash([ 8, 8 ]), 
t.beginPath(), t.moveTo(d, p), t.lineTo(d + (g - d) * (b - o) / b, p + (m - p) * (b - o) / b), 
t.stroke(), t.globalAlpha = .4, t.drawImage(v, g - o, m - o), t.globalAlpha = 1) : (d += o / 2, 
p = r / 2), t.drawImage(f, d - o, p - l), t.font = "bold " + (0 | s) + "px " + Ye, 
t.textAlign = "left", t.baseLine = 0, t.textBaseline = "top";
var M = new Date(n), S = Wv(M).replace(/^\s+|\s+$/g, "").split("\n"), T = s, F = c / 2, P = u / 36e5;
if (1 >= P) {
t.fillStyle = u > 18e5 ? "#fe9" : "#f9e", t.strokeStyle = "#f2f2f2";
var d = T, p = F + .8 * c;
Tv(t, p, p + c, d, a / 2);
}
for (t.fillStyle = 24 > P && M.getDay() == new Date().getDay() ? "#333" : "#aaa", 
t.fillText("提醒时间:", T, F), T *= 2, t.font = "" + s + "px " + Ye; S.length; ) F += c, 
t.fillText(S.shift(), T, F);
}
function fn(t, e, a, r) {
Zi = e, Vi = a, tn = r, en = Vi / 16, ln = en / 2 / tn, an = dn(t), a = an.length * en;
var i = en / 2, n = on(cn)[0], l = n.getContext("2d"), o = an.length;
n.width = Zi, n.height = Math.max(a, Vi), l.fillStyle = "#fff", l.fillRect(0, 0, e, n.height);
for (var v = 0; o > v; v++) {
var t = an[v], f = en * t.depth, h = en * v;
if (v) {
var s = t.parent.children, c = s.indexOf(t), u = an.indexOf(c ? s[c - 1] : t.parent);
l.beginPath(), l.moveTo(f, h + i), l.lineTo(f - i, h + i), l.lineTo(f - i, en * u + (c ? i : en)), 
l.stroke();
}
x(l, t, ln, f, h);
}
}
function hn(t, e, a, r) {
fn(t, e, a, r);
for (var i = t.children.concat(t), n = i.length, l = an.indexOf(t) - .5; n--; ) t = i[n], 
Pt(t, en * t.depth + en / 2, (an.indexOf(t) - l) * en, ln, 1);
setTimeout(sn, Ne);
}
function sn() {
var t = new fv(Zi, Vi, function(t, e, a) {
t.fillStyle = "#999", t.fillRect(0, 0, e, a);
}, 0, !0), e = on(cn)[0], a = new fv(Zi, e.height, cn, un);
t.supportScroll = 1, t.add(a), t.attach();
}
function cn(t) {
var e = on(cn)[0];
t.drawImage(e, 0, 0);
}
function un(t, e, a, r) {
if (t >= 1) {
var i = r / en | 0;
i < an.length && ve(an[i]);
}
}
function dn(t) {
for (var e = []; t.parent; ) t = t.parent;
return pn(e, t, 0), e;
}
function pn(t, e, a) {
e.depth = a++, t.push(e);
for (var r = e.children, i = r.length, n = 0; i > n; n++) pn(t, r[n], a);
}
function Sn() {
var t = new hv(), e = mn = t.width, a = (yn = t.height) / 4, r = yn - a, i = new fv(e, a, Pn, Tn);
i.bx = i.ox = 0, t.add(i, 0, r), t.popup();
}
function Tn(t, e, a, r, i, n) {
this.px = i, this.py = n, -3 == t ? (this.bx += this.ox, this.ox = 0, 0 == this.px) : -2 == t ? (this.ox = i - a, 
this.repaint()) : -1 == t ? (this.token = +new Date(), this.hited = -1, this.repaint()) : t >= 1 && this.hited >= 0 && Fn(this.hited);
}
function Fn(t) {
var e = Jt(), a = ei(e[0], !0), r = xn[t], i = "http://xidea.org#path=" + e.join("/") + ",data=" + a, n = Mn(Pn), l = n[0], o = l.toDataURL(), v = "思维分享：", f = "一起头脑风暴吧^_^", h = [ r, i, o, v, f ];
"function" == typeof callNativeMethod ? callNativeMethod("share", "commitShare", h) : alert(h);
}
function Pn(t, e, a) {
var r = t.createLinearGradient(0, 0, 0, a);
r.addColorStop(0, "rgba(255,255,255,0.0)"), r.addColorStop(.05, "rgba(255,255,255,.4)"), 
r.addColorStop(.15, "#fff"), r.addColorStop(.9, "#ddd"), r.addColorStop(1, "#ccc"), 
t.fillStyle = r, t.fillRect(0, 0, e, a);
var i = Mn(Pn), n = i[0], l = n.getContext("2d"), o = .5 * a, v = .9 * e, f = .16 * o | 0, h = 1.1 * o;
if (null == i[1] || i[1] != this.token) {
i[1] = this.token, n.width = v, n.height = o, r = t.createLinearGradient(0, 0, 0, o), 
r.addColorStop(0, "#eee"), r.addColorStop(.1, "#fff"), r.addColorStop(.9, "#fff"), 
r.addColorStop(1, "#ddd"), l.fillStyle = r, wv(l, 0, 0, v, o, o / 16), l.fill(), 
l.translate(o / 4, 0);
var s = gn(n);
l.font = "" + f + "px " + Ye, l.fillStyle = "#333", l.fillText("思维分享:" + s, h, .4 * o), 
l.font = (.8 * f | 0) + "px " + Ye, l.fillStyle = "#333", l.fillText("一起头脑风暴吧^_^", h, .7 * o);
}
t.drawImage(n, (e - v) / 2, 0);
for (var c = 4, u = this.bx + this.ox, d = bn.length, p = e / c * d; d--; ) {
var g = a / 6, m = e * (c - d) / c + u - g;
m %= p, 0 > m && (m += p);
var y = 1 - 2 * Math.pow((e / 2 - m) / e, 2), w = a - g * y * 2;
t.save(), t.translate(m - g, w - g), t.globalAlpha = y, t.scale(y *= g / 100, y);
var x = bn[d], b = Mn(x), n = b[0], l = n.getContext("2d"), M = this.px, S = this.py, T = M && M > m - g && m + g > M && S > w - g && w + g > S || !1;
T && (this.hited = d), b[1] != T && (b[1] = T, n.width = 220, n.height = 300, l.translate(110, 110), 
x(l), l.fillStyle = "#333", l.font = "bold 50px " + Ye, l.textBaseline = "middle", 
l.textAlign = "center", l.fillText(wn[d], 0, 150), l.lineWidth = 10, l.strokeStyle = T ? "#ff9" : "#eee", 
l.beginPath(), l.arc(0, 0, 105, 0, 2 * Math.PI, !0), l.stroke()), t.drawImage(n, 0, 0), 
t.restore();
}
}
function Cn(t, e) {
return t.beginPath(), t.lineWidth = 4, t.fillStyle = e, t.strokeStyle = e, t.arc(0, 0, 100, 0, 2 * Math.PI, !0), 
t.fill(), t.fillStyle = "#FFF", t.beginPath(), e;
}
function In(t) {
var e = Cn(t, "#d46");
t.save(), Dn(t, -5, 20, 55, 30), t.fill(), t.rotate(.2 * -Math.PI), Dn(t, -15, -15, 42, 20), 
t.fill(), Dn(t, 10, 15, 25, 14), t.fill(), t.restore(), t.fillStyle = e, Dn(t, -12, 22, 38, 22), 
t.fill(), t.fillStyle = "#FFF", Dn(t, -17, 22, 17, 15), t.fill(), t.fillStyle = e, 
Dn(t, -22, 25, 6, 5), t.fill(), Dn(t, -12, 20, 3, 2), t.fill(), t.strokeStyle = "#FFF", 
t.lineCap = "round", t.lineWidth = 10, t.beginPath(), t.arc(34, -10, 40, 0, -Math.PI / 2, !0), 
t.stroke(), t.beginPath(), t.arc(34, -10, 20, 0, -Math.PI / 2, !0), t.stroke();
}
function kn(t) {
var e = Cn(t, "#ec3"), a = 5, r = 80, i = r / (1 / Math.tan(Math.PI / 10) + 1 / Math.tan(Math.PI / 5)), n = i / Math.tan(Math.PI / 5);
for (t.moveTo(0, -r), i *= 1.5, n *= 1.5; a--; ) t.lineTo(i, -n), t.rotate(.4 * Math.PI), 
t.lineTo(0, -r);
t.closePath(), t.fill(), t.beginPath(), t.fillStyle = e;
var l = r / 4, o = l / 2;
t.moveTo(2 * -l, -l), t.lineTo(l + o, -l), t.lineTo(-l + o, l), t.lineTo(2 * l, l + o), 
t.lineTo(-l - o, l + o), t.lineTo(l - o, -l + o), t.closePath(), t.fill();
}
function An(t) {
Cn(t, "#5be");
Dn(t, 0, -30, 32, 30), t.fill(), Dn(t, 0, -15, 35, 15), t.fill(), t.fill(), Dn(t, 0, 15, 45, 45), 
t.fill(), t.beginPath(), t.arc(0, 45, 52, Math.PI, 0, !1), t.lineTo(0, 5), t.closePath(), 
t.fill(), Dn(t, -25, 58, 18, 8), t.fill(), Dn(t, 25, 58, 18, 8), t.fill();
}
function Dn(t, e, a, r, i) {
t.beginPath(), t.save(), t.translate(e, a), t.scale(r / 100, i / 100), t.arc(0, 0, 100, 0, 2 * Math.PI, !0), 
t.restore();
}
function On(t) {
{
var a;
Cn(t, "#3c3");
}
for (t.save(), t.scale(1, .85); ;) {
if (t.translate(-10, -10), t.beginPath(), t.arc(0, 0, 55, 2, 2.4, !0), t.lineTo(-45, 65), 
t.closePath(), t.fill(), t.stroke(), t.beginPath(), t.arc(-15, -10, 4, 0, 2 * Math.PI, !0), 
t.stroke(), t.beginPath(), t.arc(15, -10, 4, 0, 2 * Math.PI, !0), t.stroke(), a) break;
a = !0, t.translate(35, 45), t.scale(-.7, .7);
}
t.restore();
}
function Rn(t) {
for (var a = (Cn(t, "#3c3"), Math.PI / 4), r = a / 2, i = 60, n = Math.sin(r) * i, l = i * Math.cos(r) - 2 * n / Math.tan(a), o = 0; 8 > o; o++) t.beginPath(), 
t.arc(0, 0, 60, r, -r, !0), t.lineTo(l, n), t.closePath(), t.fill(), t.stroke(), 
t.rotate(a);
}
function tl(t, e, a) {
var r = t.cmds;
switch (e) {
case _n:
case Ln:
case qn:
case Jn:
case $n:
var i = 255 * t.globalAlpha + .5;
case Un:
if (!t._configJSON) {
var n = nl(t);
tl(t, Kn, n);
}
break;
case jn:
if (!a.cmds.length) return;
var i = a.nativeId || 0;
a = a.cmds.splice(0).join("");
}
var l = [ e, a.length ];
return null != i && (l[1]++, l.push(i)), l = l.map(il), l.push(a), r.push(l.join("")), 
Un == e ? t.commit(!1) : void 0;
}
function al(t) {
this.style = {}, this.stack = [], this.saveCount = 0, this._style = {
font: "10px sans-serif",
fillStyle: "#000",
strokeStyle: "#000",
lineCap: "butt",
lineJoin: "miter",
lineWidth: 1,
miterLimit: 10,
textAlign: "left",
textBaseline: "alphabetic"
}, this._styleJSON, this.nativeId = Vn.createCanvas(t >= 0 ? t : -1), this.canvas = this, 
this.globalAlpha = 1, this.cmds = [];
}
function rl(t) {
return t && String.fromCharCode.apply(String, t);
}
function il(t) {
return String.fromCharCode(t);
}
function nl(t) {
if (t._styleJSON) return t._styleJSON;
var e = t._style, a = [ '{"' ];
for (var r in e) a.push(r, '":'), (r = e[r]) instanceof Object ? a.push('"', String(r), '","') : "string" == typeof r ? a.push('"', ol(r).replace(/["\\]/g, "\\$&"), '","') : a.push(r, ',"');
return a.push(a.pop().replace(',"', "}")), t._styleJSON = a.join("");
}
function ol(t) {
var e = t.match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*([\.\d]+))?|^#[0-9a-f]+/i);
if (e) {
var a = e[1];
if (a) {
for (t = (255 * (e[4] || 1) << 24 | a << 16 | e[2] << 8 | e[3]).toString(16); t.length < 8; ) t = "0" + t;
t = "#" + t;
} else t = t.replace(/#(?:(.)(.)(.)$)?/, "#FF$1$1$2$2$3$3").toUpperCase();
} else {
var r = ll.indexOf(t.toUpperCase());
r >= 0 && (t = ll[r + 1]);
}
return t;
}
function vl(t) {
return t._path || (t._path = []);
}
function fl(t) {
return t && (t = t % Zn || Zn, 0 > t && (t += Zn)), t / Zn * 4095;
}
function hl(t) {
var e = [];
this.addColorStop = function(t, a) {
e.push(t + ol(a));
}, this.toString = function() {
return t + e.sort().join(",");
};
}
function Sl() {
if ("function" == typeof callNativeMethod) {
var t = {};
return "clear(),length(),key(s),getItem(s),setItem(ss),removeItem(s)".replace(/(\w+)\(\w*\)?/g, function(e, a) {
var r = e.length - a.length - 2;
t[a] = function() {
var t = Array.prototype.map.call(arguments, String);
return t.length = r, callNativeMethod("localStorage", a, t);
};
}), t;
}
}
function Tl() {
for (var t = [], e = Ml.length; e--; ) t[e] = Wl(Ml[e]);
return t;
}
function Fl() {
for (var t = Ml.length, e = []; t--; ) {
var a = Ml[t], r = Wl(a), i = r.eventCount;
console.log(i), i > 0 && r.eventEnable && (e.push(r), i--);
for (var n = i > 0 && Yl(a), l = n.length; i > 0 && l-- > 0; ) r = Wl(n[l]), r && r.eventEnable && e.push(r);
}
return e.sort(Xl);
}
function Pl(t) {
return Wl(t);
}
function Cl(t) {
for (var e = (xl[t.id] || t).root, a = Yl(e), r = [], i = a && a.length; i--; ) {
var n = Wl(a[i]);
n && n.parent == t.id && r.push(n);
}
return r;
}
function Il(t) {
var e = t.root;
if (e == t.id) {
var a = Yl(0), r = a.indexOf(e);
for (a.splice(r, 1), El(0, a), a = Yl(e), r = a.length; r--; ) {
var i = a[r];
console.log("remove node ", dl + i), sl.removeItem(dl + i), delete xl[i], delete wl[i];
}
sl.removeItem(ul + e), delete bl[e];
} else {
var n = Rl(t), l = Wl(e), a = Yl(e), r = n.length;
for (l.nodeCount -= r; r--; ) {
var o = n[r], i = o.id, v = a.indexOf(i);
v >= 0 ? (o.eventEnable && l.eventCount--, a.splice(v, 1)) : console.error("invalid status:unattached node:" + o.title + "#" + i), 
sl.removeItem(dl + i), delete xl[i], delete wl[i];
}
El(e, a), kl(l);
}
}
function kl(t, e) {
var a = t.id, r = xl[a], i = t.root, n = !r, l = !i;
if (n) o = Dl(t), a = t.id, r = xl[a]; else var o = e ? Rl(t, r.root) : [ t ];
delete t.children;
for (var v = l || r.root != i, f = 0, h = 0, s = 0, c = o.length; c--; ) {
var u = o[c], d = xl[u.id], p = u.eventEnable;
p && f++, d.id || s++, p ^ (d && d.eventEnable) && (h += p ? 1 : -1);
}
if (l) {
var g = t;
t.parent = a, g.nodeCount = 0, g.eventCount = 0;
} else g = wl[t.root];
if (v) {
g.eventCount += f, g.nodeCount += o.length;
var m = wl[r.root], y = o.map(function(t) {
return t.id;
});
Al(g.root, y), m && (m.eventCount -= f, m.nodeCount -= o.length, Al(m.id, null, y), 
o.indexOf(m) < 0 && o.push(m));
} else g.eventCount += h, g.nodeCount += s;
for (o.indexOf(g) < 0 && o.push(g), c = o.length; c--; ) t = o[c], r = Ol(t), r && sl.setItem(dl + r.id, JSON.stringify(r));
}
function Al(t, e, a) {
var r = Yl(t);
if (!r) {
r = [];
var i = !0;
}
if (e) for (var n = e.length; n--; ) {
var l = e[n];
l != t && r.indexOf(l) < 0 && r.push(l);
} else {
if (!a) return;
for (var n = a.length; n--; ) {
var l = a[n];
r.indexOf(l) >= 0 && r.splice(n, 1);
}
}
El(t, r), i && (r = Yl(0), r.indexOf(t) < 0 && (r.push(t), El(0, r)));
}
function Dl(t) {
for (var e = [ t ], a = e.concat(), r = t.root; a.length; ) {
var t = a.pop(), i = t.children, n = i && i.length, l = t.id;
for (xl[l] || (l || (l = t.id = Nl()), xl[l] = {}, r || (r = l), t.root = r), delete t.children; n--; ) {
var o = i[n];
o.order = n, o.parent = l, e.push(o), a.push(o);
}
}
return e;
}
function Ol(t) {
var e = !1, a = xl[t.id];
for (var r in t) {
var i = t[r];
i != a[r] && (a[r] = i, e = !0);
}
for (var r in a) r in t || (delete a[r], e = !0);
return e ? (a.updateTime = +new Date(), a) : void 0;
}
function Rl(t, e) {
e = e || t.root;
var a = Yl(e).map(Wl), r = [ t ], i = [];
if (e == t.id) a.push(Wl(e)), i = a; else for (;r.length; ) {
var n = r.pop(), l = n.id, o = a.length;
for (i.push(n); o--; ) {
var v = a[o];
v.parent == l && (a.splice(o, 1), r.push(v));
}
}
return i;
}
function El(t, e) {
bl[t] = e, sl.setItem(ul + t, JSON.stringify(e));
}
function Yl(t) {
if (bl) return bl[t];
bl = {};
for (var e = sl.getItem(ul + 0), a = (bl[0] = e = e ? JSON.parse(e) : []).length; a--; ) {
var r = e[a];
bl[r] = JSON.parse(sl.getItem(ul + r));
}
return bl[t];
}
function Wl(t) {
var e = wl[t];
if (e) return e;
var a = sl.getItem(dl + t);
return a ? wl[t] = Yv(xl[t] = JSON.parse(a)) : void 0;
}
function Xl(t, e) {
return t.eventStart - e.eventStart;
}
function Nl() {
(null == yl || ml >= 8) && (yl = sl.getItem(gl) || +new Date() / 1e3 | 0, sl.setItem(gl, ++yl), 
ml = 0), console.log(yl);
var t = ((16777215 & yl) << 8 | ml++).toString(16);
return t;
}
function _l(t, e, a, r, i) {
fv.apply(this, [ t, e, ql, Ll ]), this.text = a, this.color = r, this.font = i || "26px " + Ye, 
this.patterns = [], this.colors = [], this.fonts = [];
}
function Ll() {}
function ql(t, e, a) {
this.background && (t.fillStyle = this.background, t.fillRect(0, 0, e, a));
var r = this.padding || 0, i = Jl(this.text, this.width - 2 * r, this.font, this.patterns, this.fonts), n = this.textAlign, l = this.lineHeight || 1.5 * this.font.replace(/.*?([\d\.]+)px.*/, "$1") | 0, o = i.length, v = l + r, f = i.length * l + 2 * r;
if (f != a && (f > a && (this.parentWidget.supportScroll = !0), this.parentWidget.supportScroll)) return void this.resize(e, f);
for (var h = 0; o > h; h++) {
var s = i[h], c = r;
if ("center" == n) {
for (var u = 0, d = 0; d < s.length; d += 3) u += s[d + 1];
c += (e - u) / 2;
}
for (var d = 0; d < s.length; ) {
var p = s[d++], u = s[d++], g = s[d++], m = 0 > p ? this.font : this.fonts[p], y = 0 > p ? this.color : this.colors[p];
t.font = m, t.fillStyle = y, t.fillText(g, c, v), c += u;
}
v += l;
}
}
function Jl(t, e, a, r, i) {
for (var r = Hl(t, r), n = zl(t), l = n.length, o = 0, v = 0, f = [], h = [ f ], s = 0; l > s; s++) {
var c = n[s], u = $l(r, o), a = 0 > u ? a : i[u] || a, d = Gl(c, a), p = /\n|\r\n/.test(c);
if ((p || v + d > e) && (h.push(f = []), v = 0), !p) {
var g = f.length - 1, m = f[g];
f[g - 2] == u ? (f[g - 1] += d, m.push(c)) : (m && (f[g] = m.join()), f.push(u, d, [ c ])), 
v += d;
}
o += c.length;
}
for (var s = h.length - 1; s >= 0; s--) f = h[s], f.length && f.push(f.pop().join(""));
return h;
}
function $l(t, e) {
for (var a = 0; a < t.length; a++) {
for (var r = t[a], i = r.length - 1, n = 0, l = i >> 1; i > n; ) {
var o = r[l];
if (e > o) n = l + 1; else {
if (!(o > e)) return a;
i = l - 1;
}
l = n + i >> 1;
}
if (o = r[n], 0 == n) {
if (e >= o) return a;
} else if (1 & n ^ e > o) return a;
}
return -1;
}
function Hl(t, e) {
for (var a = [], r = 0; r < e.length; r++) {
var i = [], n = e[r], l = n.exec(t);
if (l && i.push(l.index, n.lastIndex - 1), n.global) for (;l = n.exec(t); ) i.push(l.index, n.lastIndex - 1);
a.push(i);
}
return a;
}
function zl(t) {
return t.match(/[\ud800-\udbff][\udc00-\udfff]|\r\n|[\s\S]/g);
}
function Gl(t, e) {
var a = Ql(e);
return a.measureText(t).width;
}
function Ql(t) {
var e = Ul[t];
return e || (e = document.createElement("canvas"), e.width = e.height = 0, e = e.getContext("2d"), 
e.font = t, Ul[t] = e), e;
}
function Kl(t, e, a, r, i) {
fv.apply(this, [ t, e, Zl, Vl ]), this.options = a, this.offset = r, i && (this.onchange = i);
}
function Zl(t, e, a) {
var r = a / 3, i = We;
t.lineWidth = i, t.fillStyle = "#000", t.strokeStyle = "#4cd4bc", t.beginPath(), 
t.lineCap = "round", t.moveTo(i, r), t.lineTo(e - i, r), t.moveTo(i, 2 * r), t.lineTo(e - i, 2 * r), 
t.stroke();
var n = this.options.length, l = -2, o = -r - this.offset * r;
t.textBaseline = "middle", t.textAlign = "center";
do {
if (o > -r) {
if (o > a) break;
var v = Math.abs(o - r) / a, f = (l + n) % n;
this.drawOption(t, f, e / 2, o + r / 2, v);
}
o += r;
} while (l++ <= n);
}
function Vl(t, e, a, r, i, n) {
if (-2 == t) {
var l = this.getIndex(), o = this.height / 3, v = (n - this.previousY) / o, f = this.offset, h = this.options.length;
f > h - 1 || 0 > f ? ((f > h || -1 > f) && (f = (f + h) % h), v /= 2) : v *= 10 * Math.log(Math.abs(n - this.height / 2) / o / 10 + 1), 
this.offset = f - v;
var s = this.getIndex();
s != l && this.onchange(s, l), this.repaint();
} else -3 == t && (this.offset = this.getIndex(), this.repaint());
}
function to(t, e, a) {
fv.call(this, t, e, ao, eo), this.text = a;
}
function eo(t) {
1 == t && (this.checked = !this.checked, this.repaint());
}
function ao(t, e, a) {
t.fillStyle = "#000", t.font = (.6 * a | 0) + "px " + Ye, t.textBaseline = "middle";
var r = this.text, i = t.measureText(r).width, n = a, l = n / 8, o = n - 2 * l, v = l + l, f = l + o / 2, h = 2 * l;
this.innerWidth = i + n + 2 * h, "right" == this.align ? (t.fillText(r, e - n - i - h, .5 * a), 
t.translate(i + n + h, 0)) : t.fillText(r, n + h, .5 * a), t.lineJoin = "round", 
t.lineCap = "round", t.strokeStyle = this.boxColor || "#4cd4bc", t.lineWidth = .14 * o, 
t.fillStyle = "#FFF", wv(t, l, l, o, o, l), t.fill(), t.stroke(), this.checked && (t.beginPath(), 
t.moveTo(v, f), t.lineTo(v + l / 2, f - l / 2), t.lineTo(f, a - v), t.lineTo(o, v), 
t.stroke());
}
function oo(t, e, a, r) {
fv.call(this, t, e), this.timesIndex = so(a), this.onchange = r, vo(this, this.timesIndex, 0, t, e);
}
function vo(t, e, a, r, i) {
for (var n = r / 20, l = (r - 6 * n) / 4, o = l + n, v = [ ro, io, no, lo ], f = [ n, n + o, r - 2 * o, r - o ], h = 0; h < v.length; h++) {
var s = c, c = new Kl(l, i, v[h], e[h + 1], function(a, r) {
var i = a - r, n = this.previous, l = this.index + 1, o = !0;
if (e[l] = a, (i > 10 || -10 > i) && (i = i > 0 ? -1 : 1, n ? (o = !1, n.roll(i)) : e[l - 1] += i), 
(2 == l || 1 == l) && ho(t, e), o && t.onchange) {
var v = e.concat();
v[2]++, t.onchange.apply(t, v);
}
});
c.drawOption = fo, c.index = h, c.previous = s, t.add(c, f[h], a);
}
ho(t, e);
}
function fo(t, e, a, r, i) {
var n = this.options[e].split(/(?=[^\d])/), l = .2 - .1 * i, o = this.height * l | 0;
t.globalAlpha = Math.pow(Math.min(1 - i + .1, 1), 3), t.font = o + "px " + Ye, t.textAlign = "right", 
o /= 2, a += o / 2, t.fillText(n[0], a, r), t.textAlign = "left", t.font = o + "px " + Ye, 
t.fillText(n[1], a, r + o / 2);
}
function ho(t, e) {
var a = t.children[1], r = e[0], i = e[1], n = e[2], l = 32 - new Date(r, 10 > n ? i - 1 : i, 32).getDate();
console.log("month length:", l), a.options.length != l && (a.options = io.slice(0, l), 
n > l && (a.offset = e[2] = l - 1), a.repaint());
}
function so(t) {
return t = t ? new Date(t) : new Date(), [ t.getFullYear(), t.getMonth(), t.getDate() - 1, t.getHours(), t.getMinutes(), t.getSeconds() ];
}
function co(t, e) {
return e + t;
}
function uo(t, e) {
return 1 + e + t;
}
function wo(t, e) {
if (Co++, ko += t, Ao += e, Co > 20) {
var a = [ 1e3 * Co / (e - Fo), (Ao - ko) / Co, Io / Co ].map(function(t) {
return t.toFixed(1);
}).join("	");
Po.push(a) > 4 && Po.shift(), console.log("fps:" + a), Fo = e, Co = ko = Ao = Io = 0;
}
}
function xo(t) {
Io += +t;
}
function bo(t, e) {
return So(t), rv(e);
}
function Mo() {
var t = +new Date();
Ro = -1;
var e = Bo.getContext("2d");
if (Yo && (Yo = !1, console.info("painterChanged clearRect:", Bo.width, Bo.height), 
e.clearRect(0, 0, Bo.width, Bo.height)), null != Bo.nativeId) {
To && console.error("invalid depth status!!!"), To++;
try {
var a = Eo(e);
} finally {
Bo.commit(!0);
}
To--;
} else a = Eo(e);
a || Ro > 0 ? (Ro = 1, Do(Mo, "anima")) : Ro = 0, wo(t, +new Date());
}
function So(t) {
t != Eo && (Yo = !0, Eo = t), Ro || Do(Mo), Ro = 1;
}
function ev(t, e) {
if (Bo != t) {
Bo = t;
for (var a = Xo.length; a--; ) Bo.addEventListener(Xo[a], vv, !1);
e && rv(e);
}
}
function av(t) {
for (var e = t.length; e--; ) Bo.removeEventListener(t[e], vv, !1);
}
function rv(t) {
ov(!0);
var e = jo;
return jo = t, e;
}
function iv(t, e, a) {
No = new Date(), $o = 0, qo && clearTimeout(qo), qo = setTimeout(function() {
qo = 0, jo(0, t, Qo, Uo, 0 | zo, 0 | Go);
}, Xe), jo(-1, t, Qo = e, Uo = a, zo = e, Go = a);
}
function nv(t, e, a) {
qo && (Math.abs(e - Qo) > Jo || Math.abs(a - Uo) > Jo) && (qo = clearTimeout(qo)), 
$o++, zo = .8 * zo + .2 * e, Go = .8 * Go + .2 * a, jo(-2, t, Qo, Uo, 0 | zo, 0 | Go);
}
function lv(t, e, a) {
function r() {
qo && new Date() - No < Be ? Lo = setTimeout(r, Be) : (0 > $o && jo(_o, t, Qo, Uo, e, a), 
3 == _o && prompt(Po.join("\n")), Lo = _o = 0);
}
try {
qo && (qo = clearTimeout(qo), _o ? (_o++, clearTimeout(Lo)) : _o = 1, Lo = setTimeout(r, Be)), 
jo(-3, t, Qo, Uo, e, a, _o);
} finally {
ov();
}
}
function ov(t) {
qo && (qo = clearTimeout(qo)), t && Lo && (Lo = clearTimeout(Lo), _o = 0), $o = -1, 
Ho = null;
}
function vv(t) {
try {
var e = new Date(), a = t.changedTouches && t.changedTouches[0] || t, r = a.clientX - (Ho || (Ho = t.srcElement.getBoundingClientRect())).left, i = a.clientY - Ho.top;
switch (t.type) {
case "touchstart":
var e = new Date();
Xo.length > 6 && av(Xo.splice(4));
case "mousedown":
t.preventDefault(), 0 > $o && iv(t, r, i);
break;
case "mousemove":
Xo.length > 6 && av(Xo.splice(0, 4));
case "touchmove":
if (0 > $o) break;
nv(t, r, i), t.preventDefault();
break;
case "touchend":
case "touchcancel":
case "mouseout":
case "mouseup":
if (t.preventDefault(), 0 > $o) break;
lv(t, r, i);
break;
default:
console.warn("unknow event:", t.type, t);
}
} finally {
xo(new Date() - e);
}
}
function fv(t, e, a, r, i) {
this.width = t || Bo.width, this.height = e || Bo.height, this.draw = a, this.event = r, 
this.children = [], this.rangeX = [], this.rangeY = [], this.supportScroll = i, 
this.x = this.y = 0, this.offsetX = this.offsetY = 0, this.dirty = tv;
}
function hv() {
fv.call(this, Bo.width, Bo.height, function(t, e, a) {
t.clearRect(0, 0, e, a), t.drawImage(this.backup[2], 0, 0);
}, function(t, e, a, r) {
-1 == t && (r < Math.min.apply(Math, this.rangeY) || r > Math.max.apply(Math, this.rangeY) || a < Math.min.apply(Math, this.rangeX) || a > Math.max.apply(Math, this.rangeX)) && this.cancel();
});
}
function sv(t, e, a, r, i) {
function M(t, r, i, n) {
for (var l = e; ;) {
if (t += l.x, r += l.y, !l.parentWidget) return a.push(t, r, i, n), [ t, r ];
l = l.parentWidget;
}
}
function S(v, f, h, s) {
r.push(e, r = []);
for (var d = 0, p = n.length; p > d; d++) {
var g = n[d], m = g.dirty;
if (m || i) {
var y = d << 1, w = l[y] - c, x = o[y] - u, b = l[++y] - c, M = o[y] - u;
if (g.x = w, g.y = x, v > b || f > M || w > v + h || x > f + s) continue;
try {
sv(t, g, a, r, i);
} finally {}
}
}
}
var n = e.children, l = e.rangeX, o = e.rangeY, v = e.width, f = e.height, h = o[o.length - 1], s = e.dirty, c = 0;
if (s & Vo) {
{
var u = cv(e.offsetY, h - f);
u - (e.drawOffsetY || 0);
}
e.drawOffsetY = u;
} else var u = e.drawOffsetY || 0;
if (i) S(0, 0, v, f); else if (s > Vo) i = !0, S(0, 0, v, f), M(0, 0, v, f); else if (s == Vo) {
i = !0, t.imageSmoothingEnabled = !1;
S(0, 0, v, f), M(0, 0, v, f);
} else S(0, 0, v, f);
}
function cv(t, e) {
if (e > 0 && t > e || 0 > t) if (0 > t) {
var a = -t;
t = 50 * -Math.log(a / 50 + 1);
} else a = t - e, t = e + 50 * Math.log(a / 50 + 1);
return t || 0;
}
function uv(t, e, a, r, i, n, l) {
try {
if (l.event && l.event.apply(l, arguments)) return !0;
for (var o = l.children, v = o.length; v-- > 0; ) {
var f = o[v];
if (f) {
var h = f.x, s = f.y, c = h + f.width, u = s + f.height;
if (u >= r && r >= s && c >= a && a >= h && uv(t, e, a - h, r - s, i - h, n - s, f)) return !0;
}
}
l.supportScroll && dv(l, t, i, n);
} finally {
l.previousY = n;
}
}
function dv(t, e, a, r) {
var i = t.height, n = Math.max.apply(Math, t.rangeY), l = n - i;
if (-2 == e && l > 0) {
var o = r - t.previousY || 0;
t.offsetY -= o, o && t.repaint(Vo);
} else if (-3 == e && l > 0) {
t.repaint(tv);
var v = t.offsetY;
(0 > v || v > l) && (t.restore && clearInterval(t.restore), t.restore = setInterval(function() {
0 > v ? (t.offsetY = v = Math.min(.9 * v + 10, 0), t.repaint(Vo)) : v > l && (t.offsetY = v = Math.max(v - 10 - .1 * (v - l), l), 
t.repaint(Vo)), v >= 0 && l >= v && (t.restore = clearInterval(t.restore), t.repaint(tv));
}, 20));
}
}
function wv(t, e, a, r, i, n) {
var l = r / 2 - n, o = i / 2 - n, v = e + r / 2, f = a + i / 2;
t.beginPath(), t.arc(v - l, f - o, n, Math.PI, 1.5 * Math.PI), t.arc(v + l, f - o, n, 1.5 * Math.PI, 0), 
t.arc(v + l, f + o, n, 0, .5 * Math.PI), t.arc(v - l, f + o, n, .5 * Math.PI, Math.PI), 
t.closePath();
}
function Mv(t, e, a, r, i, n, l, o) {
if (o) {
for (var v = o.length, f = 1 / v, h = Sv(t, e, a, r, i, n, l), s = 0; v > s; s++) var c = h(o[s], f, s == n && l);
return c;
}
return Sv.apply(null, arguments);
}
function Sv(t, e, a, r, i, n, l) {
var o = r, v = a - e, f = i - r, h = [ o ], s = .4 * v | 0, c = a - (v - s) / 2 | 0, u = -1;
return t.fillStyle = pv, (l || Tv)(t, e, a, r, i, r, i), i--, function(l, v, d, p, g) {
var m = ++u == n, y = o + f * v, w = (o + y) / 2;
return t.fillStyle = pv, t.strokeStyle = gv, (d || m) && (t.fillStyle = p || (m ? mv : pv), 
(d || Tv)(t, e, a, o, y, r, i)), l && (t.fillStyle = g || (m ? yv : gv), t.font = (0 | s) + "px STHeiti serif", 
t.textAlign = "center", t.textBaseline = "bottom", t.fillText(l, w, c)), h.push(o = y), 
y > i ? h : arguments.callee;
};
}
function Tv(t, e, a, r, i) {
var n = (a - e) / 2;
t.beginPath(), t.arc(r + n, e + n, n, Math.PI / 2, 1.5 * Math.PI, !1), t.arc(i - n, e + n, n, -Math.PI / 2, Math.PI / 2, !1), 
t.closePath(), t.fill();
}
function Fv(t, e, a, r, i) {
var n = (a - e) / 2;
t.beginPath(), t.arc(r + n, e + n, n, Math.PI / 2, 1.5 * Math.PI, !1), t.lineTo(i, e), 
t.lineTo(i, a), t.closePath(), t.fill();
}
function Pv(t, e, a, r, i, n, l) {
(r == n ? i == l ? Tv : Fv : i >= l - 1 ? Cv : Iv).apply(null, arguments);
}
function Cv(t, e, a, r, i) {
var n = (a - e) / 2;
t.beginPath(), t.moveTo(r, a), t.lineTo(r, e), t.arc(i - n, e + n, n, -Math.PI / 2, Math.PI / 2, !1), 
t.closePath(), t.fill();
}
function Iv(t, e, a, r, i) {
t.fillRect(r, e, i - r, a - e);
}
function kv(t, e, a) {
e = e || 16, a = a || "", "string" == typeof t && (t = Dv(t));
var r = [], i = e - Math.min(e >> 2, 16);
return function(n) {
var l = n[a], o = r.lastIndexOf(l);
return o >= 0 ? i > o && (r.splice(o, 1), r.push(l)) : (l = [], l[0] = r.length > e ? t(r.shift().splice(0)[0]) : t(), 
r.push(n[a] = l)), l;
};
}
function Av(t, e, a) {
var r = t[0] - e[0], i = t[1] - e[1];
return a && (r > a || -a > r || i > a || -a > i) ? 2147483647 : Math.sqrt(r * r + i * i);
}
function Dv() {
return function(t) {
return t || En();
};
}
function Rv(t, e, a, r, i, n) {
t.save(), t.translate(e, a), t.scale(r / 100, i / 140);
var l = Math.PI / 2;
t.beginPath(), t.fillStyle = "#666", t.strokeStyle = n || "#fff", t.arc(12, 50, 10, 2 * l, 3 * l, !1), 
t.arc(88, 50, 10, 3 * l, 4 * l, !1), t.arc(80, 130, 10, 0, l, !1), t.arc(20, 130, 10, l, 2 * l, !1), 
t.fill(), t.beginPath(), t.lineCap = "round", t.lineWidth = 10, t.moveTo(24, 60), 
t.lineTo(24, 120), t.moveTo(50, 60), t.lineTo(50, 120), t.moveTo(76, 60), t.lineTo(76, 120), 
t.stroke(), t.strokeStyle = "#666", t.lineWidth = 16, t.beginPath(), t.moveTo(8, 25), 
t.lineTo(92, 30), t.stroke(), t.lineCap = "rect", t.beginPath(), t.moveTo(45, 12), 
t.lineTo(55, 13), t.stroke(), t.restore();
}
function Ev(t, e) {
function a(t, e) {
return e.length > 1 ? ("000" + t).slice(-e.length) : t;
}
function r(t) {
return t ? (t > 0 ? "-" : t *= -1, "+" + a(t / 60, "00") + ":" + a(t % 60, "00")) : "Z";
}
return t = t ? new Date(t) : new Date(), (e || "YYYY-MM-DD").replace(/([YMDhms])\1*|\.s|TZD$|'[^']+'|"[^"]+"/g, function(e) {
switch (e.charAt()) {
case "Y":
return a(t.getFullYear(), e);
case "M":
return a(t.getMonth() + 1, e);
case "D":
return a(t.getDate(), e);
case "h":
return a(t.getHours(), e);
case "m":
return a(t.getMinutes(), e);
case "s":
return a(t.getSeconds(), e);
case ".":
return "." + a(t.getMilliseconds(), "000");
case "T":
return r(t.getTimezoneOffset());
case "'":
case '"':
return e.slice(1, -1);
default:
return e;
}
});
}
function Yv(t) {
var e = {};
for (var a in t) e[a] = t[a];
return e;
}
function Wv(t) {
var e = t.getFullYear(), a = t.getMonth() + 1, r = t.getDate(), i = t.getHours(), n = t.getMinutes(), l = new Date(), o = (+t - l) / 1e3 / 60 + .5 | 0, v = Math.abs(o), f = [], h = [];
if (2880 >= v) {
var s = v / 60 | 0, c = v % 60;
s > 0 && f.push(s, "小时"), c > 0 && f.push(c, c > 0 ? "分" : "分钟"), (s > 0 || c > 0) && f.push(0 > o ? "前" : "后"), 
f.length || f.push("现在");
}
t.setHours(12), l.setHours(12);
var u = Math.round((t - l) / 24 / 36e5), d = Bv(i);
if (0 == u) h.push(d); else {
var p = u > 0 ? "明" : "昨";
if (u > 0) var p = "明", g = "后"; else {
u = -u;
var p = "昨", g = "前";
}
if (1 == u) "上" == d.slice(-1) ? (d = d.substring(0, 1), h.push(p, d)) : h.push(d), 
f = [ p + "天" ]; else {
var m = 2 == u ? g + "天" : u + "天" + g;
f = [ m ], h.push(d);
}
}
h.push(i % 12, "点"), n && h.push(n, "分"), h.push("\n"), f.push("\n");
var y = [ e, 10 > a ? "-0" : "-", a, 10 > r ? "-0" : "-", r, "\n" ];
return f.join("") + h.join("") + y.join("");
}
function Bv(t) {
return 5 > t ? "凌晨" : 9 > t ? "早上" : 12 > t ? "上午" : 14 > t ? "中午" : 17 > t ? "下午" : 19 > t ? "傍晚" : 22 > t ? "晚上" : "深夜";
}
var t, e, a, r, i, n, s, c, u, d, p, N, _, L, q, J, $, H, z, U, Z, V, tt, at, it, Ht, zt, Gt, Qt, te, ee, ae, ra, ia, na, la, oa, sa, ca, ua, da, ya, wa, xa, ba, Ma, Sa, Ta, Wa, Ba, Xa, Ha, za, Ga, Qa, Ua, Ka, dr, pr, mr, yr, wr, xr, Mr, Xr, jr, h = kv("canvas", 128), E = [ Y, [] ], j = Sn, G = [], Q = [], K = 7, et = [], nt = -1, gt = 0, mt = 0, yt = 0, qt = function(t) {
return Dt(Gt.children[t]);
}, Jt = function() {
var t = ne(Gt, []);
return t.reverse();
}, $t = 2 * Math.PI, Ut = [], Zt = l, Vt = [], Ye = "STHeiti serif", We = 1.5 * devicePixelRatio, Be = 240, Xe = 600, je = 128, Ne = je + 32, _e = function(t, e) {
var a = Math.min(t, e) / 6;
oa = 0 | t, ra = 0 | e, ia = 2.18 * a | 0, na = 0 | a, la = a / 48 + 8 * devicePixelRatio | 0;
}, Le = 1.5 * devicePixelRatio, _e = function(t, e) {
var a = Math.min(t, e) / 6;
oa = 0 | t, ra = 0 | e, ia = 2.18 * a | 0, na = 0 | a, la = a / 48 + 8 * devicePixelRatio | 0;
}, He = 128, ze = 300, Ge = 2, Qe = 2.8, Ue = .75, Ke = .7, Ze = .5, Ve = .8, ta = 2, ea = "创建于：", aa = "最后修改：", fa = function() {
sa && (sa.blur(), ca.blur(), ua.dirty = !0, da.title = sa.value, da.content = ca.value, 
ca.style.display = sa.style.display = "none");
}, ha = function() {
sa && ("block" == sa.style.display, sa.focus());
}, ga = 0, ma = [ "提醒", "投票", "讲稿" ], ja = 0, Na = -1, _a = 0, La = -1, qa = [ "经典", "炫彩" ], Ja = [ "#2B8567#1D9C7E#22B59A#4CD4BC#1FE3BF#90D7C5#98C0B4#04576B#227580#4699A3#40BACA#52D6EB#7DCADC#88B8CC#611023#991924#C24924#DE6530#E67B63#CC8F8F#AE7D7D#484570#68638C#8B85A8#B3AFC5#C8C6D4#CDCDD1#A3A1A8".match(/#\w+/g), "#8000FF#FF00FF#FF0080#FF3D3D#FF9900#FFD83D#A0F000#5000F0#3D64FF#7A95FF#00B3FF#85E0D1#00B8B8#666600#333399#FF0033#990066#FFCC33#CCCC00#666666#0066CC#336699#669933#99CC33#00FF80#663366#660000#000000".match(/#\w+/g) ], $a = 0, gr = 0, br = [ "内容", "样式", "功能", "√" ], Er = kv("canvas", 2), Yr = [], Wr = [], Br = [ "⛺,🎃,🎯,🏈,🏀,🎵,🎤,🎹,🎑,🎄,⚽,🎾,🎱,🎶,🎼,🎻,🎈,🎋,🏉,🎳,⛳,🎺,🎷,🎸,🎏,🎉,🚵,🚴,🏁,🎨,🎭,🎬,🗿,🎊,🏇,🏆,🎿,🏂,🏊,🏄,🎆,🎇,🎣,🚶,🏃,💃,⚾,🎐,♨,🎠,🎡,🎢,🗽,🌉,⛲".split(","), "🙇,👽,👍,💖,💟,😁,😂,😍,🎅,👻,👎,💛,💙,😜,😝,😛,👼,💀,👌,💜,💚,😃,😄,😀,👦,😈,👊,❤,💝,😊,😉,😘,👧,👿,✊,💔,💗,😚,😗,😙,👨,👹,👋,💓,💕,😳,😔,😌,👩,👺,✋,💞,💘,😒,😞,😣,👲,👾,👐,💌,💍,😢,😭,😪,👴,😺,👆,💋,💏,😥,😰,😅,👵,😸,👇,💑,👫,😓,😩,😫,👶,😻,👉,👬,👭,😨,😱,😠,👱,😽,👈,👪,🙌,😡,😤,😖,👸,😼,🙏,👏,✌,😆,😋,😷,🙆,🙀,☝,💪,👂,😎,😴,😵,🙅,😿,👀,👃,👅,😲,😟,😦,🙍,😹,👄,😾,🙈,😧,😮,😬,🙎,🙉,🙊,💩,🙋,😐,😕,😯,💁,💆,👰,👯,👳,😶,😇,😏,👮,👷,💂,💇,😑,☺,🙁,🙂".split(","), "#⃣,💹,💰,💴,💵,⌛,⏰,⌚,0⃣,📈,💷,💶,💳,🕐,⏳,📅,1⃣,📉,💸,💲,💱,📆,🕛,🕧,2⃣,📊,〰,〽,3⃣,🕜,🕑,🕝,4⃣,5⃣,6⃣,7⃣,8⃣,🕒,🕞,🕓,9⃣,🔢,🔟,✖,➕,🕟,🕔,🕠,➖,➗,🇦,🇧,🇨,🕕,🕖,🕗,🇩,🇪,🇫,🇬,🇭,🕘,🕙,🕚,🇮,🇯,🇰,🇱,🇲,🕡,🕢,🕣,🇳,🇴,🇵,🇶,🇷,🕤,🕥,🕦,🇸,🇹,🇺,🇻,🇼,🇽,🇾,🇿".split(","), "👓,💄,🎩,🎓,👑,☕,🍵,🍶,👒,👟,👞,👡,👠,🍼,🍺,🍻,👢,👕,👔,👚,👗,🍸,🍹,🍷,🎽,👖,👘,👙,💼,🍴,🍕,🍔,👜,👝,👛,🎀,🌂,🍟,🍗,🍖,📛,💅,🍝,🍛,🍤,🍱,🍣,🍥,🍙,🍘,🍚,🍜,🍲,🍢,🍡,🍳,🍞,🍩,🍮,🍦,🍨,🍧,🎂,🍰,🍪,🍫,🍬,🍭,🍯,🍎,🍏,🍊,🍋,🍒,🍇,🍉,🍓,🍑,🍈,🍌,🍐,🍍,🍠,🍆,🍅,🌽".split(","), "⛽,✂,🔓,🔒,🔐,🔔,🔕,📢,💺,✒,🔏,🔑,🔧,📣,🔊,🔉,💎,✏,🔩,🔨,⚓,🔈,🔇,🎧,🎍,📏,💣,🔪,🔫,🎥,📷,📹,🎒,📐,💡,🔦,🔎,💻,📻,📡,🔮,🔬,🔍,🔭,🛁,📺,📼,📱,🛀,🚿,🚽,🚪,🚬,📲,📟,🎮,💊,💉,🎲,🃏,🎴,🔌,🔋,🀄,🎫,🏮,🎰".split(","), "📞,☎,📌,📍,📎,👤,👥,💬,📠,📦,📝,📑,🔖,💭,💤,👣,🎁,📧,📜,📋,📇,📰,📁,📂,📥,📤,📃,📄,📖,📚,📕,📗,📩,📨,📘,📙,📓,📔,📒,💿,📫,📪,📀,💽,💾,📬,📭,✉,📯,📮".split(","), "☀,☁,🐾,💐,🌸,🐶,🐺,🐱,❄,🔆,🌷,🍀,🌹,🐭,🐹,🐰,🔅,🌞,🌻,🌺,🍁,🐸,🐯,🐨,⛅,⚡,🍃,🍂,🌿,🐻,🐷,🐽,✨,⛄,🌾,🍄,🌵,🐮,🐗,🐵,☔,🌀,🌴,🌲,🌳,🐒,🐴,🐑,🌊,🌁,🌰,🌱,🌼,🐘,🐼,🐧,🌈,🌋,🗻,🌄,🌅,🐦,🐤,🐥,🌌,🌠,⭐,🌐,🌍,🐣,🐔,🐍,🌎,🌏,🌝,🌚,🌑,🐢,🐛,🐝,🌒,🌓,🌔,🌕,🌖,🐜,🐞,🐌,🌗,🌘,🌜,🌛,🌙,🐙,🐚,🐠,🔥,🌟,💫,💥,💢,🐟,🐬,🐳,💦,💨,💧,🐋,🐄,🐏,🐀,🐃,🐅,🐇,🐉,🐎,🐐,🐓,🐕,🐖,🐁,🐂,🐲,🐡,🐊,🐫,🐪,🐆,🐈,🐩".split(","), "🏠,🏡,🏫,🎪,🏢,🚢,⛵,🚤,🏣,🏥,🏦,🏪,🏩,🚣,🚀,✈,🏨,💒,⛪,🏬,🏤,🚁,🚂,🚊,🌃,🌇,🌆,🏯,🏰,🚉,🚞,🚆,🏭,🚄,🚅,🚈,🚇,🚝,🚋,🚃,🚎,🚌,🚍,🚙,🚘,🚗,🚕,🚖,🚛,🚚,🚨,🚓,🚔,🚒,🚑,🚐,🚲,🚡,🚟,🚠,🚜".split(","), "㊙,🔝,🔱,‼,⁉,🚫,⛔,🚦,㊗,🔚,❎,✅,❌,🚥,⚠,🚧,🔺,🔙,❗,❓,❕,🔞,📵,🚯,🔲,🔛,❔,⭕,✔,🚱,🚳,🚷,🔳,🔜,☑,♻,💯,🚸,💈,🚏,⚫,🔃,ℹ,⬆,⬇,🚩,🚻,🚹,⚪,⬅,➡,↗,↖,🚺,🚼,🚾,🔴,↘,↙,↔,↕,🚰,🚮,🅿,🔵,↩,↪,⤵,⤴,♿,🚭,🛂,🔻,📳,📴,🔄,◀,🛄,🛅,🛃,⬜,▶,🔼,🔽,⏪,🏧,🇯🇵,🇰🇷,⬛,⏩,⏫,⏬,🆗,🇩🇪,🇨🇳,🇺🇸,🔶,🔀,🔁,🔂,🆕,🇫🇷,🇪🇸,🇮🇹,🔷,🆙,🆒,🆓,🆖,🇷🇺,🇬🇧,📶,🔸,🎦,🔹,◼,◻,◾,◽,▪,▫,💠,🔯,💮,🔘,🔗,🈲,🈶,🈚,🈳,🈵,🉑,🆘,🆔,🆑,✳,❇,✴,🆚,🅰,🅱,🆎,🅾,♠,♥,♣,♦,©,®,™,Ⓜ,➿,➰,♈,♉,♊,♋,♌,♍,♎,♏,♐,♑,♒,♓,⛎,🔣,🔠,🔡,🔤,🈯,🈴,🉐,🈹,🈺,🈷,🈸,🔰".split(",") ], Nr = "iPhone" == navigator.platform && 20;
_r("🎄,🎠,🏈,🎹", "🎄,🎤,🎶,🎣,🎯,⚽"), _r("😀,👍,💗,🎅", "😀,😭,😥,😡,😴,😷,👽,👻,💘,💔,💓,👌,✌,👍,👎,🙏"), 
_r("📅,💰,📈,⌛", "⏰,💰,💹"), _r("🍴,🎂,🎀,👒", "🍭,🍲,🍎,🍸"), _r("💣,📏,🔬,🔐", "🔓,🔒,⚓,🔧,🔍,🔔,🔕,💡,💎,💣"), 
_r("📞,📌,👥,💬", "👤,👥,💬,💭,📞,📩"), _r("🐧,🐣,🍄,🔆", "🐌,🌹,🔆,⛅,❄,☁,💧"), 
_r("🚊,🚔,🏠,💒", "🏡,🚀,🚄,⛵,🚲"), _r("⛔,🚭,🚦,✅", "✅,❎,❓,❗,⁉,㊙,🚩");
var ti = "娱乐,表情,数字,居家,杂物,沟通,自然,城市,抽象".split(","), ei = function(t) {
var e = Pl(t);
return e = ii(mi(e)), console.log(e), console.log(ni(e)), e;
}, ai = function() {
localStorage.clear(), kl(pi(si.join("\n")), !0), kl(pi(ci.join("\n")), !0);
}, oi = "+/=-_.", si = [ "亲情时刻产品设计{#FF3D3D,updateTime=1,icon=⏰}", "	场景闹钟{#7A95FF,icon=⌚}", "		结合位置优化提醒{#CCCC00,icon=🌍}", "			出差场景{}", "		完整作息优化提醒{,icon=💤}", "	倒计时{#FFCC33,icon=⏳}", "		生日{}", "		纪念日{}", "		传统节日{}", "	生活习惯{#52D6EB,icon=🍵}", "		正点吃饭{}", "		熬夜{}", "		用眼{}", "		注意颈椎{}", "		提醒喝水{}", "	亲情实景{#FF9900,icon=🚞}", "		街景实况{}", "		亲情授权{}", "	亲情协作{#0066CC,icon=👥}", "		孩子接送{#FFCC33,icon=👪}", "		路过买菜{#666600,icon=🍆}" ], ci = [ "欢迎使用{#2B8567,icon=🎷,updateTime=1}", "	基本用法{#1FE3BF,icon=🎨}", "		单击展开{#22B59A,icon=🎯}", "		双击编辑{#4CD4BC,icon=📝}", "		长按移动{#1FE3BF,icon=👣}", "		剪切板{#90D7C5,icon=✂}", "	多端同步{#00B3FF,icon=📲}", "		Android{#99CC33}", "		iPhone{#FFCC33}", "		微信公众号{#00B8B8}", "	团队协作{#666666,icon=👥}", "		任务分发{#40BACA,icon=📌}", "		编辑同步{#1FE3BF,icon=📑}", "	时间管理{#7A95FF,icon=⌛}", "		利用碎片时间{#52D6EB}", "		事件提醒{#FFCC33}", "	创意分享{#8000FF,icon=💭}", "		连接投影 创意无限{#FF9900,icon=🎥}", "		QQ/微信/朋友圈{#00B8B8}", "		手机联系人{#52D6EB,icon=📞}", "		email{#7A95FF,icon=📩}", "	展望无限{#52D6EB}" ], bi = {}, Mi = 0;
Ti.prototype.cache = function() {
var t = this.data.id;
t && (bi[t] = this);
}, Object.defineProperty(Ti.prototype, "children", {
get: function() {
var t = this._children;
if (!t) {
t = this._children = [];
var e = Cl(this.data);
e.sort(Fi);
for (var a = 0, r = e.length; r > a; a++) {
var i = new Ti(e[a]);
i.parent = this, t.push(i);
}
}
return t;
}
}), Object.defineProperty(Ti.prototype, "parent", {
get: function() {
var t = this._parent;
if (void 0 === t) {
var e = Pl(this.data.parent);
t = e && e.id != this.data.id ? new Ti(e) : null, this._parent = t;
}
return t;
},
set: function(t) {
this._parent = t;
}
});
var Pi, Ci, Ii, ki, Ai, Di, Oi, Ri, Zi, Vi, tn, en, ln, mn, yn, Ei = kv("canvas", 12), Yi = ie, an = [], on = kv("canvas", 2), gn = ut, wn = [ "微信好友", "朋友圈", "QQ好友", "QQ空间", "新浪微博" ], xn = [ 22, 23, 24, 6, 1 ], bn = [ On, Rn, An, kn, In ], Mn = kv("canvas", 10), En = function(t) {
return Vn ? new al(t) : document.createElement("canvas");
}, Yn = 0, Wn = 1, Bn = 2, Xn = 3, jn = 0, Nn = 1, _n = 2, Ln = 3, qn = 4, Jn = 5, $n = 6, Hn = 7, zn = 8, Gn = 9, Qn = 10, Un = 11, Kn = 12, Zn = 2 * Math.PI, Vn = window.nativeHost;
al.prototype.commit = function(t) {
var e = Vn.commit(this.nativeId, this.cmds.join(""), !!t);
return this.cmds = [], e;
}, "font,fillStyle,strokeStyle,lineCap,lineJoin,miterLimit,lineWidth,textAlign,textBaseline".replace(/\w+/g, function(t) {
Object.defineProperty(al.prototype, t, {
get: function() {
return this._style[t];
},
set: function(e) {
this._style[t] !== e && (this._styleJSON = 0, this._style[t] = e);
}
});
}), Object.defineProperty(al.prototype, "width", {
get: function() {
return this._width;
},
set: function(t) {
Vn.setWidth(this.nativeId, t), this._width = t;
}
}), Object.defineProperty(al.prototype, "height", {
get: function() {
return this._height;
},
set: function(t) {
Vn.setHeight(this.nativeId, t), this._height = t;
}
});
var ll = "BLACK,#FF000000,DKGRAY,#FF444444,GRAY,#FF888888,LTGRAY,#FFCCCCCC,WHITE,#FFFFFFFF,RED,#FFFF0000,GREEN,#FF00FF00,BLUE,#FF0000FF,YELLOW,#FFFFFF00,CYAN,#FF00FFFF,MAGENTA,#FFFF00FF,TRANSPARENT,#00000000".split(",");
al.prototype.clip = function() {
tl(this, Nn, rl(this._path));
}, al.prototype.fill = function() {
tl(this, Ln, rl(this._path));
}, al.prototype.stroke = function() {
tl(this, qn, rl(this._path));
}, al.prototype.drawImage = function(t) {
var f = [];
switch (f.push.apply(f, arguments), f.length) {
case 3:
case 5:
case 9:
t.cmds.length && tl(this, jn, t), f[0] = t.nativeId, console.log("image id:" + f[0]), 
tl(this, _n, rl(f));
break;
default:
console.error("error arguments" + f);
}
}, al.prototype.measureText = function(t) {
return {
width: tl(this, Un, t)
};
}, al.prototype.fillText = function(t, e, a, r) {
tl(this, Jn, rl([ e, a, 0 | r ]) + t);
}, al.prototype.strokeText = function(t, e, a, r) {
tl(this, $n, rl([ e, a, 0 | r ]) + t);
}, al.prototype.clearRect = function(t, e, a, r) {
tl(this, Hn, rl([ t, e, a, r ]));
}, al.prototype.beginPath = function() {
this._path = [];
}, al.prototype.moveTo = function(t, e) {
vl(this).push(Yn, t, e);
}, al.prototype.lineTo = function(t, e) {
vl(this).push(Wn, t, e);
}, al.prototype.closePath = function() {
vl(this).push(Bn);
}, al.prototype.arc = function(t, e, a, r, i, n) {
var l = fl(r), o = fl(i - r);
vl(this).push(Xn, t, e, a, l, l + o, n ? 1 : 0);
}, al.prototype.save = function() {
tl(this, zn, "");
}, al.prototype.restore = function() {
tl(this, Gn, "");
}, al.prototype.translate = function(t, e) {
tl(this, Qn, rl([ t, e ]));
}, al.prototype.rotate = function() {}, al.prototype.setTransform = function() {}, 
al.prototype.scale = function() {}, al.prototype.transform = function() {}, al.prototype.resetTransform = function() {}, 
hl.prototype = new String(), al.prototype.createLinearGradient = function(t, e, a, r) {
return new hl("linear:" + [ 0 | t, 0 | e, 0 | a, 0 | r, "" ].join(","));
}, al.prototype.createRadialGradient = function(t, e, a, r, i, n) {
return new hl("radial:" + [ 0 | t, 0 | e, 0 | a, 0 | r, 0 | i, 0 | n ].join(","));
}, al.prototype.getImageData = function() {}, al.prototype.putImageData = function() {}, 
al.prototype.rect = function(t, e, a, r) {
this.beginPath(), this.moveTo(t, e), this.lineTo(t + a, e), this.lineTo(t + a, e + r), 
this.lineTo(t, e + r), this.closePath();
}, al.prototype.strokeRect = function(t, e, a, r) {
this.rect(t, e, a, r), this.stroke();
}, al.prototype.fillRect = function(t, e, a, r) {
this.rect(t, e, a, r), this.fill();
}, al.prototype.getContext = function() {
return this;
}, al.prototype.addEventListener = function() {
console.log("native canvas not support event listener");
}, al.prototype.setLineDash = function() {}, al.prototype.arcTo = function() {}, 
al.prototype.bezierCurveTo = function() {}, al.prototype.createImageData = function() {}, 
al.prototype.createPattern = function() {}, al.prototype.drawFocusIfNeeded = function() {}, 
al.prototype.ellipse = function() {}, al.prototype.getLineDash = function() {}, 
al.prototype.isPointInPath = function() {}, al.prototype.isPointInStroke = function() {}, 
al.prototype.quadraticCurveTo = function() {};
var yl, bl, sl = Sl() || localStorage, cl = "CLUB.XIDEA.COMPASS.", ul = cl + "index", dl = cl + "item.", gl = cl + "uuidbase", ml = 0, wl = {}, xl = {}, Ml = Yl(0);
0 == Ml.length && (console.warn("reset your data!!!"), ai(), Ml = bl[0]), _l.prototype = Object.create(fv.prototype), 
_l.prototype.addPattern = function(t, e) {
if ("string" == typeof t) {
var a = t.lastIndexOf("/");
t = new RegExp(t.slice(1, a), t.slice(a + 1));
}
this.patterns.push(t);
var r = e.split(";");
this.colors.push(r[0]), this.fonts.push(r[1] || this.font);
};
var Ul = {};
Kl.prototype = Object.create(fv.prototype), Kl.prototype.getIndex = function() {
var t = this.options.length;
return (t + Math.round(this.offset)) % t;
}, Kl.prototype.onchange = function() {}, Kl.prototype.getValue = function() {
return this.options[this.getIndex()];
}, Kl.prototype.roll = function(t) {
var e = this.getIndex(), a = this.options.length, r = (e + t) % a;
return this.offset = r = 0 > r ? r + a : r, this.onchange(r, e), this.repaint(), 
Math.abs(r - e) > a - 2;
}, Kl.prototype.drawOption = function(t, e, a, r, i) {
var n = .2 - .1 * i;
t.font = (this.height * n | 0) + "px " + Ye, t.globalAlpha = Math.pow(Math.min(1 - i + .1, 1), 3), 
t.fillText(this.options[e], a, r);
}, to.prototype = Object.create(fv.prototype), String.prototype.repeat || (String.prototype.repeat = function(t) {
return new Array(t + 1).join(this);
});
var ro = "月".repeat(12).replace(/./g, uo).match(/\d+./g), io = "日".repeat(31).replace(/./g, uo).match(/\d+./g), no = "点".repeat(24).replace(/./g, co).match(/\d+./g), lo = "分".repeat(60).replace(/./g, co).match(/\d+./g);
oo.prototype = Object.create(fv.prototype);
var go = function(t, e, a) {
var r = {
type: t
};
switch (t) {
case "touchstart":
return iv(r, e, a);
case "touchmove":
return nv(r, e, a);
case "touchend":
case "touchcancel":
return lv(r, e, a);
}
};
if (!window.requestAnimationFrame) {
for (var mo = [ "webkit", "moz", "o", "ms" ], yo = mo.length; yo--; ) if (requestAnimationFrame = window[mo[yo] + "RequestAnimationFrame"], 
requestAnimationFrame) {
cancelAnimationFrame = window[mo[yo] + "CancelAnimationFrame"];
break;
}
requestAnimationFrame || (requestAnimationFrame = function(t) {
return setTimeout(t, 1e3 / 60);
}, cancelAnimationFrame = function(t) {
return clearTimeout(t);
});
}
var Ro, Eo, Yo, Bo, jo, No, _o, Lo, qo, Ho, zo, Go, Qo, Uo, To = 0, Fo = +new Date(), Po = [], Co = 0, Io = 0, ko = 0, Ao = 0, Do = requestAnimationFrame, Oo = new Date(), Do = function(t) {
var a = new Date();
return Oo = a, requestAnimationFrame(t, 30);
}, Wo = kv("canvas", 1), Xo = "touchstart,touchmove,touchend,touchcancel,mousedown,mousemove,mouseup,mouseout".split(","), Jo = 10, $o = -1, yo = Xo.length, Zo = 2, Vo = 4, tv = 8;
window.matchMedia && window.matchMedia("(pointer:coarse)").matches && Xo.splice(4), 
hv.prototype = Object.create(fv.prototype), hv.prototype.popup = function() {
var t = Eo, e = this.attach(), a = Wo(hv)[0], r = a.width = this.width, i = a.height = this.height, n = a.getContext("2d");
n.fillStyle = "rgba(128,128,128,.3)", n.clearRect(0, 0, r, i), n.drawImage(Bo, 0, 0), 
n.fillRect(0, 0, r, i), this.backup = [ t, e, a ], this.repaint();
}, hv.prototype.cancel = function() {
bo(this.backup[0], this.backup[1]);
}, fv.prototype.attach = function() {
function e(e, a, r, i, n, l) {
return uv(e, a, r, i, n, l, t);
}
var t = this;
return this.dispatchDraw || (this.dispatchDraw = function(e) {
function l(t, e, a) {
for (var r = 0; r < e.length; ) {
var i = e[r++], n = e[r++], o = i.width, v = i.height;
t.save();
try {
t.translate(i.x, i.y), t.beginPath(), t.rect(0, 0, o, v), t.closePath(), t.clip(), 
i.draw && i.draw(t, o, v), i.dirty = 0, l(t, n, a + 1);
} finally {
t.restore();
}
}
}
var a = [], r = [];
sv(e, t, a, r), e.save();
try {
e.beginPath();
for (var i = 0, n = a.length; n > i; ) e.rect(a[i++], a[i++], a[i++], a[i++]);
e.closePath(), e.clip(), l(e, r, 0);
} finally {
e.restore();
}
}), bo(this.dispatchDraw, e);
}, fv.prototype.resize = function(t, e) {
if (null != t && t != this.width) this.width = t; else {
if (null == e || e == this.height) return;
this.height = e;
}
var a = this.parentWidget, r = a.children.indexOf(this);
r >= 0 && (r <<= 1, a.rangeX[r + 1] = a.rangeX[r] + this.width, a.rangeY[r + 1] = a.rangeY[r] + this.height, 
this.repaint());
}, fv.prototype.add = function(t, e, a) {
null == a && (a = this.rangeY.length ? Math.max.apply(Math, this.rangeY) : 0, null == e && (e = 0)), 
t.parentWidget = this, this.children.push(t), this.rangeX.push(e, t.width + e), 
this.rangeY.push(a, t.height + a), this.repaint(Zo);
}, fv.prototype.remove = function(t) {
var e = this.children.indexOf(t);
e >= 0 && (this.children.splice(e, 1), this.rangeX.splice(2 * e, 2), this.rangeY.splice(2 * e, 2)), 
this.repaint(Vo);
}, fv.prototype.clear = function() {
this.children.length = this.rangeX.length = this.rangeY.length = 0, this.repaint(tv);
}, fv.prototype.repaint = function(t) {
this.dirty |= t || tv;
for (var e = this; e.parentWidget; ) e = e.parentWidget, e.dirty |= Zo;
e.dispatchDraw && So(e.dispatchDraw);
};
var pv = "#eee", gv = "#888", mv = "#4cd4bc", yv = "#EEE";
return {
dispatchEvent: go,
init: le
};
}();</script>
</head>
<body></body>
</html>