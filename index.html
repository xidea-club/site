<!doctype html>
<html manifest='offline.manifest'>
<head>
<meta charset="utf-8">
<meta name="viewport" content='width=720'/>
<title>创意罗盘</title>
<style>
body,html,canvas{margin:0;padding:0;}
body,html{width: 100%;height:100%;}
canvas{/*transform-origin:0 0;transform:scale(0.5,0.5);/* */}
</style><script>var compass = function() {
function l(l, v, f, h, c, u, d) {
switch (l) {
case -1:
t = [ c, u ], i && (i = i.cancel()), r = null, e = he(f, h), a = 0 == e ? 2 : e > 0 && (1 & e) + 1, 
-2 == e && (i = Vt(), i && (i.index = -2, i.move(c, u, e)));
var p = new Date();
n = p;
break;
case -2:
if (null != i) {
var g = he(c, u, !0);
i.move(c, u, g), r = g;
} else (e > 0 || null == e) && ie(t, t = [ c, u ]);
break;
case -3:
i && s(v, c, u), a && d == a && o(d);
break;
case 0:
if (e > 0 && 1 & e) {
var m = e >> 1;
i = Ct(m), i.index = m;
}
break;
case 1:
case 2:
a != l && o(l, "base");
break;
case 3:        }
}
function o(t) {
if (e > 0) if (1 & e) {
var a = e >> 1;
1 == t ? ee(a) : Jt(a);
} else v(e >> 1); else 0 == e ? t > 1 && Jt(-1) : -1 == e && ae();
}
function v(t) {
var e = "", a = {
title: e,
children: []
};
Kt(a, t);
}
function s() {
var n = i.index;
if (-2 == r) Zt(n, i); else if (-2 != n || r) {
if (0 == r) n >= 0 && Ut(n, n + 1); else if (r > 0) {
var l = r >> 1;
1 & r ? n != l && Gt(n, l) : Qt(n, l);
} else if (-1 == r) {
var o = te(n);
ae(), Kt(o.data);
}
i = i.cancel();
} else Zt(n, i), i = i.cancel();
}
function d(t, e) {
h = t, c = e, u = t / 3;
}
function p(t, e, a, r, i, n) {
t.fillStyle = "#FFF", t.fillRect(0, 0, a, r);
var l = a / 2, o = r / 2, v = r / 3, s = m(e), f = 2 * v;
if (n) {
var h = .7 * v, c = .3 * v, u = 1.1 * v;
t.fillStyle = n[0], t.drawImage(s, l - h, o - h, 2 * h, 2 * h);
for (var d = 0; 6 > d; d++) {
var p = Math.PI * d / 3, y = l + u * Math.cos(p), w = o + u * Math.sin(p);
n.length > 1 && (t.fillStyle = n[d + 1]), t.beginPath(), t.arc(y, w, c, 0, 2 * Math.PI, !1), 
t.fill();
}
} else t.drawImage(s, l - v, o - v, f, f);
if (e.childColors = n, i) {
var F = .1 * r;
return a *= .2, r *= .2, g(t, i, F, a, r), [ 0, F, a, F + r ];
}
}
function g(t, e, a, r, i) {
var n = ge, l = i / 2, o = r - l, v = r - 1.5 * l, s = .8 * i;
t.lineWidth = n / 2, t.strokeStyle = "#ddd", t.fillStyle = "#eee", t.beginPath(), 
t.moveTo(0, a), t.arc(o, a + l, l, -Math.PI / 2, Math.PI / 2, !1), t.lineTo(0, a + i), 
t.stroke(), t.fill(), gr(t, e, (v - s) / 2, a, s), t.strokeStyle = "#E66", t.lineWidth = n, 
t.beginPath(), s *= .6, a += (i - s) / 2, t.moveTo(v, a), t.lineTo(v + s, a + s), 
t.moveTo(v, a + s), t.lineTo(v + s, a), t.stroke();
}
function m(t) {
var e = t.scale || 1, a = f(t), r = a[0];
if (a.scale != e || t.dirty) {
console.log("redraw node canvas!" + [ t.scale, t.id, r.nativeId, t.data.title ]);
var i = h * e | 0, n = i << 1, l = Me;
r.width = n, r.height = n;
var o = r.getContext("2d"), v = t.data.fill || "#4cd4bc", s = o.createLinearGradient(0, 0, n, n);
s.addColorStop(0, "rgba(153,153,153,0.3)"), s.addColorStop(.4, "rgba(238,238,238,0.3)"), 
s.addColorStop(1, "rgba(153,153,153,0.3)"), o.save();
try {
a.scale = e, t.dirty = !1, o.fillStyle = v, o.clearRect(0, 0, n, n), o.strokeStyle = s, 
o.lineWidth = l, o.beginPath(), o.arc(i, i, i - l, 0, 2 * Math.PI), o.fill(), o.stroke();
var c = t.data.icon, d = t.data.title, p = u * e * (d.length > 5 ? .9 : 1) | 0, g = p;
if (o.textAlign = "center", o.strokeStyle = o.fillStyle = F(v), e > 1) {
p /= e, g /= e;
var m = I(o, d, p, i, 2), x = m.length * g, M = 1.42 * i + g + x / 2;
o.textAlign = "left";
} else {
var m = I(o, d, p, 1.68 * i, 2), x = m.length * g, M = i + x / 2, b = .8 * g, T = b / 2, S = M + g / 2, C = e == ke && t.children.length;
t.data.content && (w(o, i - .8 * T, C ? S : S + T, .8 * b, b), C && (S += b)), C && o.fillText("...", i, S + T);
}
for (var P = m.length; P--; ) o.fillText(m[P], i, M), M -= g;
c && gr(o, c, i - .7 * p, M - 1.4 * p, 1.4 * p), y(o, i, l, t.data.event);
} finally {
o.restore();
}
}
return r;
}
function y(t, e, a, r) {
if (console.log(r), r && r.enable) {
var i = e - a, n = e - 5 * a, l = new Date(r.start), o = (+l - new Date()) / 864e5 / 6 * Math.PI;
console.log("date", l.getDate()), l = (60 * l.getHours() + l.getMinutes()) / 6 / 60 * Math.PI, 
t.translate(e, e), t.strokeStyle = "#000", t.lineWidth = 1, t.beginPath(), t.arc(0, 0, e - 1, 0, 2 * Math.PI), 
t.stroke(), t.beginPath(), o > 0 && (t.lineWidth = 2 * a, t.strokeStyle = "#bb0", 
t.arc(0, 0, e - 2 * a, 1.5 * Math.PI, 1.5 * Math.PI + o), t.stroke()), t.lineWidth = a, 
t.strokeStyle = "#FFF", t.beginPath(), t.arc(0, 0, e - a, 0, 2 * Math.PI);
for (var v = 0; 3 > v; v++) t.moveTo(0, i), t.lineTo(0, n), t.moveTo(0, -i), t.lineTo(0, -n), 
t.moveTo(i, 0), t.lineTo(n, 0), t.moveTo(-i, 0), t.lineTo(-n, 0), v || (i = e - a, 
n = e - 4 * a, t.stroke(), t.beginPath(), t.lineWidth = .8 * a), t.rotate(Math.PI / 3);
t.stroke(), t.beginPath(), t.arc(0, 0, n, .5 * Math.PI, .5 * Math.PI + l), t.stroke(), 
t.rotate(l), t.beginPath(), t.fillStyle = "#ff6", a *= 2.4, t.moveTo(0, n - a), 
t.lineTo(-a, n), t.lineTo(0, n + a), t.lineTo(a, n), t.closePath(), t.fill();
}
}
function w(t, e, a, r, i) {
var n = i >> 4, l = i >> 3;
t.lineWidth = n, ul(t, e, a, r, i, l);
for (var o = 0; 8 > o; o++) t.moveTo(e + l, a + o * l), t.lineTo(e + r - l, a + o * l);
t.stroke();
}
function F() {
return "#FFF";
}
function x(t) {
var e = new Image(), a = m(t), r = f(x)[0], i = h / 2, n = r.width = r.height = i << 1, l = r.getContext("2d");
return l.clearRect(0, 0, n, n), l.drawImage(a, 0, 0, a.width, a.height, 0, 0, n, n), 
e.src = r.toDataURL("image/png"), e.width = e.height = n, e;
}
function M(t, e) {
var a = -1 == e, r = h / 3, i = f(M), n = i[0];
if (i[1] != r || i[2] != t || i[3] ^ a) {
i[1] = r, i[2] = t, i[3] = a;
var l = n.getContext("2d"), o = 0 | Math.max(.1 * r, 2), v = r + o << 1, s = r + o, c = s, u = r / 1.5;
n.width = n.height = v, l.clearRect(0, 0, v, v), l.beginPath(), l.lineWidth = o, 
l.strokeStyle = a ? "#933" : t ? "#999" : "#ccc", l.arc(s, c, r, 0, 2 * Math.PI), 
l.stroke(), l.lineWidth = o, l.moveTo(s, c - u), l.lineJoin = "round", l.lineTo(s - .9 * u, c - r / 5), 
l.lineTo(s - .9 * u, c + r / 2), l.lineTo(s - .3 * u, c + r / 2), l.lineTo(s - .3 * u, c + u / 8), 
l.lineTo(s + .3 * u, c + u / 8), l.lineTo(s + .3 * u, c + r / 2), l.lineTo(s + .9 * u, c + r / 2), 
l.lineTo(s + .9 * u, c - r / 5), l.closePath(), l.stroke();
}
return n;
}
function b(t, e, a) {
e = !!e;
var r = -2 == a, i = h / 3, n = f(b), l = n[0];
if (n[1] != i || n[2] != e || n[3] ^ r || n[4] != t) {
n[1] = i, n[2] = e, n[3] = r, n[4] = t;
var o = l.getContext("2d"), v = 0 | Math.max(.1 * i, 2), s = i + v << 1;
if (l.width = l.height = s, o.clearRect(0, 0, s, s), o.beginPath(), o.lineWidth = v, 
o.strokeStyle = r ? "#933" : e ? "#999" : "#ccc", console.log("redraw pasteBoard!", o.strokeStyle, a), 
o.arc(i + v, i + v, i, 0, 2 * Math.PI), o.stroke(), t) o.drawImage(t, 0, 0, t.width, t.height, v, v, s - v - v, s - v - v); else {
o.strokeStyle = "#ccc";
var c = .45 * i, s = .9 * i, d = 1.1 * i;
i = .1 * i, o.save();
try {
o.translate(c + i / 2, c), o.beginPath(), o.arc(i, i, i, Math.PI, 1.5 * Math.PI), 
o.arc(s - i, i, i, 1.5 * Math.PI, 0), o.arc(s - i, d - i, i, 0, .5 * Math.PI), o.arc(i, d - i, i, .5 * Math.PI, 1 * Math.PI), 
o.lineTo(0, i), o.stroke(), o.beginPath(), o.translate(2.5 * i, 2.5 * i), o.moveTo(s - i - i / 2, 0), 
o.arc(s - i, i, i, 1.5 * Math.PI, 0), o.arc(s - i, d - i, i, 0, .5 * Math.PI), o.arc(i, d - i, i, .5 * Math.PI, 1 * Math.PI), 
o.lineTo(0, d - i - i / 2), o.stroke();
} finally {
o.restore();
}
}
}
return l;
}
function S() {
return C(0, .8 * h);
}
function C(t, e) {
e = e || c;
var a = f(T[t] || C), r = a[0];
if (a[1] != t || a[2] != e) {
console.log("redraw place holder!"), a[1] = t, a[2] = e, t && (e *= 1.2);
var i = 2 * e, n = .1 * e, l = e - n, o = r.getContext("2d");
r.width = i, r.height = i, o.strokeStyle = "#ccc", o.lineWidth = n, o.lineCap = "round", 
o.beginPath(), t ? (o.arc(e, e, l, 0, 2 * Math.PI), o.stroke(), o.fillStyle = 2 == t ? "#0EE" : "#FFF", 
o.fill()) : (o.arc(e, e, l, 0, 2 * Math.PI), o.stroke(), o.lineWidth = 3 * n, l -= 4 * n, 
o.fillStyle = "#ccc", o.strokeStyle = "#FFF", o.fill(), o.beginPath(), o.moveTo(e - l, e), 
o.lineTo(e + l, e), o.moveTo(e, e - l), o.lineTo(e, e + l), o.stroke());
}
return r;
}
function I(t, e, a, r, i) {
t.font = a + "px " + pe;
var n = t.measureText(e).width, l = n / r;
if (l > 1.1) {
var o = [], v = e.match(/\w+|./g), s = v[0];
i > l && (r = Math.min(n / Math.ceil(l), r));
for (var f = 1; f < v.length; f++) {
var h = v[f], c = s + h, n = t.measureText(c).width;
if (n > r) {
if (!(o.length < i - 1)) {
s = s.slice(0, -v[f - 1].length) + "...";
break;
}
o.push(s), s = h;
} else s = c;
}
return o.length > 0 && 1 == s.length ? o[o.length - 1] += s : o.push(s), o;
}
return [ e ];
}
function P(t) {
var e = f(P), a = e[0], r = 2 * t;
if (e[1] != t) {
a.width = a.height = r + 1 << 1;
var i = a.getContext("2d");
i.strokeStyle = "rgba(255,189,189,.1)", i.lineWidth = 24;
for (var n = 0; 4 > n; n++) i.beginPath(), i.arc(r, r, t, 0, 2 * Math.PI, !0), i.stroke(), 
t *= 1.03;
}
return a;
}
function z() {
return k = ni(0), k.mozOpaque = !0, D = ni(), D.mozOpaque = !0, A = G(D, !0), O = G(k, !0), 
null == O.nativeId && (document.body.appendChild(D), document.body.appendChild(k)), 
k;
}
function G(t) {
t.style.cssText = "position:absolute;left:0;top:0;";
var e = t.getContext("2d");
return e.imageSmoothingEnabled ? e.imageSmoothingEnabled = !1 : e.webkitImageSmoothingEnabled && (e.webkitImageSmoothingEnabled = !1), 
e;
}
function Q(t, e, a, r) {
D.width = k.width = B = t, D.height = k.height = E = e, Y = a, R = .8 * Y, d(a, r), 
U();
}
function U() {
H = null, wn(Z);
}
function K() {
wn(Z);
}
function Z() {
if (null != N) {
var e = [], a = [], r = [], i = rt(e, a, r), n = e.length < 2, l = n && it();
l ? i = !0 : l = N, gt.apply(r, l), e == H ? (O.drawImage(D, 0, 0), n && (mt.apply(O, l), 
nt(O, a))) : (A.fillStyle = "#FFF", A.fillRect(0, 0, B, E), console.log("redraw pasteBoard background", n), 
A != O && (O.clearRect(0, 0, B, E), H = e + ""), n ? (O.drawImage(D, 0, 0), nt(O, a)) : (mt.apply(A, l), 
nt(A, a), O.drawImage(D, 0, 0))), yt(N[0]), nt(O, r), O.globalAlpha = 1;
for (var o = j.length; o--; ) j[o]() && (i = !0);
return i;
}
}
function rt(t, e, a) {
var r = ot(), i = N[0], n = i.parent, l = n && n.id;
V += +new Date();
var o = i.children, v = J && J.hit || null, s = b(L, J, v), f = o.length;
for (t.push(null == J ? -2 : [ -1, -2, 0 ].indexOf(v)), e.push([ 1, s, B - R, R - s.height ]), 
l ? vt(n, e) && (r = !0) : (s = M(J, v), e.push([ 1, s, R - s.width, R - s.height ])), 
tt += +new Date(), vt(i, e) && (r = !0), r || t.push(i.id, i.x); f--; ) {
var h = o[f];
vt(h, a) && (r = !0);
}
for (et += +new Date(), f = W.length; f--; ) {
var h = W[f];
vt(h, a) ? r = !0 : 0 == h.alpha && W.splice(f, 1);
}
return r;
}
function it() {
if (_) {
var t = new Date() - q;
if (we > t) {
var e = t / we;
if (1 > e) {
for (var a = [ N[0] ], r = 1; r < N.length; r++) a.push(bt(N[r], _[r], e));
return _ = a;
}
_ = 0;
}
}
}
function nt(t, e) {
for (var a = e.length; a--; ) {
var i = e[a], n = i.shift(), l = i.length;
if (t.globalAlpha = n, 9 == l) e[a] = i.slice(5, 9); else {
var o = i[0];
e[a] = [ i[1], i[2], o.width, o.height ];
}
for (;--l > 0; ) i[l] = 0 | i[l];
t.drawImage.apply(t, i);
}
}
function ot() {
for (var t = $.length; t--; ) $[t]() && $.splice(t, 1);
return $.length;
}
function vt(t, e) {
var a = ut(t), r = t.alpha || 1, i = (t.scale || 1) * Y, n = a[0], l = a[1], o = a[2], v = m(t);
if (!(t.alpha < .1)) {
if (J && t.hit >= 0 && t.hit == J.hit) if (J.id != t.id) {
var s = P(i), f = s.width / 2;
e.push([ r, s, n - f, l - f ]), e.push([ r, v, n - i, l - i ]);
} else {
var f = Y * ke;
e.push([ r, v, 0, 0, i *= 2, i, n - f, l - f, f *= 2, f ]);
} else if (1 == o) e.push([ r, v, n - i, l - i ]); else {
var f = i * o;
e.push([ r, v, 0, 0, i *= 2, i, n - f, l - f, f *= 2, f ]);
}
return t.animStart;
}
}
function st(t, e, a, r, i) {
if (.1 > i && console.log("hide ", t.data.title), t.animStart) var n = Math.min(1, (new Date() - t.animStart) / we), l = Tt(t.animAlpha, n), o = Tt(t.animScale, n), v = Tt(t.animX, n), s = Tt(t.animY, n); else v = t.x || 0, 
s = t.y || 0, l = null == t.alpha ? 1 : t.alpha, o = t.scale || 1;
var f = null == i ? l : i, h = r || o;
return e == v && a == s && l == f && o == h ? (t.x = e, t.y = a, t.alpha = f, void (t.scale = h)) : (t.animAlpha = [ l, f ], 
t.animScale = [ o, h ], t.animX = [ v, e ], t.animY = [ s, a ], t.animStart = new Date(), 
void K());
}
function ut(t) {
if (t) {
if (t.animStart) {
var e = Math.min(1, (new Date() - t.animStart) / we), a = Tt(t.animScale, e), r = Tt(t.animX, e), i = Tt(t.animY, e);
t.x = r, t.y = i, t.alpha = Tt(t.animAlpha, e), 1 == e ? (t.animStart = null, t.animScale = null, 
t.animX = null, t.animY = null, t.animAlpha = null, t.scale = Math.max(a, ke), a = 1) : a /= t.scale || 1;
} else var r = t.x, i = t.y;
if (J && t.scale < 1 && J.id != t.id) {
var n = N[3], l = N[1], o = N[2], v = J.x - r, s = J.y - i, f = Math.min(n - Y, 2 * Y), h = Math.sqrt(v * v + s * s), c = J.x - l, u = J.y - o, d = Math.sqrt(c * c + u * u);
if (d > Y && f > h && Math.abs(d - n) < f) {
var p = l - r, g = o - i, m = g / n, y = p / n, w = v * g - s * p > 0 ? 1 : -1, F = l + c / d * n - r, x = o + u / d * n - i;
h = (1 - h / f) * Math.sqrt(F * F + x * x), r -= m * h * w, i += y * h * w;
}
}
return [ r, i, a || 1 ];
}
}
function dt(t) {
function o() {
var t = O.globalAlpha;
O.globalAlpha /= 3, O.drawImage(n, e - l, a - l), O.globalAlpha = t;
}
var e = t.x, a = t.y, n = (new Date(), t.scale, x(t)), l = n.width / 2;
return st(t, t.x, t.y, De, De), j.push(o), J = {
id: t.id
}, K(), {
move: function(t, r, i) {
null == J && (J = {}, j.push(o), L == n && (L = null)), e = t, a = r - l / 2, J.hit = i, 
J.x = t, J.y = r, K();
},
pack: function() {
St(j, o), L = n, J = null, U();
},
cancel: function() {
J = null, St(j, o), K();
}
};
}
function pt() {
q = new Date(), _ = N, N = arguments, K();
}
function gt(t, e, a, r, i, n, l, o) {
var v = this, s = C(null == J ? 0 : 1), h = s.width / 2, c = J && J.hit, u = c && 1 & ~c && Y;
for (e -= h, a -= h; n > l; ) {
var d = e + r * Math.cos(l), p = a - r * Math.sin(l, u);
v.push(u && Math.abs(d - J.x) < u && Math.abs(p - J.y) < u ? [ 1, C(2), d, p ] : [ 1, s, d, p ]), 
l += o;
}
}
function mt(t, e, a, r, i, n) {
this.strokeStyle = "#ddd", this.lineWidth = ge, this.beginPath(), this.arc(e, a, r, -n, -i, !1), 
this.stroke(), wt(this, t, t.parent);
}
function yt(t) {
O.strokeStyle = "#ddd", O.lineWidth = ge / 2, wt(O, t, t.children[0], Y);
}
function wt(t, e, a, r) {
if (a && a.id) {
var i = e.x, n = e.y, l = a.x, o = a.y;
r && (r = 1 - r / (n == N[2] ? N[3] : Tl([ i, n ], [ l, o ])), i = bt(i, l, r), 
n = bt(n, o, r)), t.beginPath(), t.moveTo(i, n), t.lineTo(l, o), t.stroke();
}
}
function Ft(t) {
W = [ t ], st(t, t.x, t.y, .1, 0);
}
function xt(t, e, a) {
t = t.concat();
for (var r = e[0], i = e[1], n = t.length, l = a && a.parent.id ? 2 : .75; n--; ) {
var o = t[n];
a != o ? st(o, bt(o.x, r, l), bt(o.y, i, l), l, 0) : t.splice(n);
}
W = t;
}
function Mt(t, e) {
for (var r = e[0], i = e[1], n = .6, l = t.length; l--; ) {
var o = t[l], v = o.animX && o.animX[1] || o.x, s = o.animY && o.animY[1] || o.y, f = ke;
o.animStart = 0, o.alpha = .1, o.x = bt(v, r, n), o.y = bt(s, i, n), o.scale = f, 
st(o, v, s, f, 1);
}
}
function bt(t, e, a) {
return t * a + e * (1 - a);
}
function Tt(t, e) {
return bt(t[1], t[0], Math.sqrt(e));
}
function St(t, e) {
var a = t.indexOf(e);
a >= 0 && t.splice(a, 1);
}
function Nt(t, e) {
var a = z(t, e);
Un(a), t && e && (_t(t, e), Ua(a, t, e), Vr(t, e, je), Zr());
}
function _t(t, e) {
Pt = t, kt = e, xe(t, e), console.log(t, e, je, Ne), Q(Pt, kt, je, Ne), At && ve(At);
}
function qt(t) {
Zn(Rt), Xt(t);
for (var e = t.children, a = e.length; a--; ) e[a].scale = ke;
ve(At = t);
}
function Jt(t, e) {
var a = -1 == t ? At : At.children[t];
$t(a, e);
}
function $t(t, e) {
function a(t) {
U(), Zn(Rt), e && e(t), t && Lt();
}
Ka(t, a);
}
function Lt(t) {
for (t = t || At; t; ) {
if (t.parent && !t.parent.id) {
qi(t.data);
break;
}
t = t.parent;
}
}
function Xt(t) {
return t.loaded === !1 && (t.loaded = !0, zt(t, _i(t.data))), t;
}
function Ht(t) {
this.id = Bt++, zt(this, t);
}
function zt(t, e) {
t.data = e;
var a = t.children = [], r = e.children;
if (r) for (var i = 0, n = r.length; n > i; i++) {
var l = new Ht(r[i]);
l.parent = t, a.push(l);
} else e.children = [];
}
function Gt(t, e) {
var a = At.children, r = a[e], i = t >= 0 && a[t];
i ? (a.splice(t, 1), At.data.children.splice(t, 1)) : (i = Ot.node, i.alpha = .5, 
Ot = null), i.parent = r, At.id || Xt(r), r.children.push(i), r.data.children.push(i.data), 
At.id ? Lt() : (Ji(i.data), Lt(r)), i.x = -100, ee(t >= 0 && e > t ? e - 1 : e);
}
function Qt(t, e) {
var a = At.children, r = At.data.children, n = (a.length, t >= 0 && a[t]);
t == e ? (a.push(a.shift()), r.push(r.shift())) : t + 1 == e ? (a.unshift(a.pop()), 
r.unshift(r.pop())) : n ? (a.splice(t, 1), r.splice(t, 1), e > t && e--, a.splice(e, 0, n), 
r.splice(e, 0, n.data)) : (n = Ot.node, n.alpha = .5, Ot = null, n.parent = At, 
a.splice(e, 0, n), r.splice(e, 0, n.data)), Lt(), ve(At);
}
function Ut(t, e) {
var a = t >= 0 && At.children[t], r = JSON.parse(JSON.stringify(a.data));
Kt(r, e);
}
function Kt(t, e, a) {
function n(a) {
a && (i.splice(e, 0, r), At.data.children.splice(e, 0, t), ve(At));
}
var r = new Ht(t), i = At.children;
a = a || Wt || [ At.x, At.y ], r.x = a[0], r.y = a[1], r.scale = .3, r.parent = At, 
(e >= i.length || null == e) && (e = i.length), t.title ? n(1) : $t(r, n);
}
function Zt(t, e) {
t >= 0 && (e.node = te(t)), Yt.unshift(e), e.pack();
}
function Vt() {
return Yt[1] && Yt[1].pack(), Ot = Yt.shift();
}
function te(t) {
var e = At.children;
if (t >= 0 && t < At.children.length) {
var r = (new Date(), e.splice(t, 1)[0]);
return At.data.children.splice(t, 1), At.id || Ji(r.data), Ft(r), Lt(), ve(At), 
Lt(), r;
}
return -2 == t ? (r = Ot.node, Ot = null, r) : void 0;
}
function ee(t) {
var e = At, a = e.children[t], r = je << 1;
xt(e.children, Wt, a), e.id ? st(e.parent, -r, -r, Pe) : Xt(a), re(At = a, e);
}
function ae() {
var t = At, e = t.parent;
return e.id ? (st(e.parent, 0, -je, Pe), xt(t.children, Wt), void re(At = e, t)) : Zr();
}
function re(t, e) {
function C() {
var a = new Date(), r = Math.min(new Date() - M, F) / F;
w == r && (console.log("no rate changed!!!"), r = 1), w = r;
var n = u + p * w, l = d + g * w, o = h + m * w, v = (s + y * w) / 2, f = v * Math.cos(o), c = -v * Math.sin(o);
if (st(t, n - f, l - c, T), st(e, n + f, l + c, S), gn(new Date() - a), 1 == w) {
clearInterval(b);
var x = i.indexOf(e);
x >= 0 && i.splice(x, 1), Mt(i, Wt, e == t.parent);
}
}
var a = [ t.x, t.y ], r = [ e.x || 0, e.y || 0 ], i = t.children.concat(), n = i.length;
for (t.hit = 0, ve(t); n--; ) {
var l = i[n];
l != e && (l.animStart = 0, l.alpha = 0);
}
e == t.parent && (st(e, 0, -je, Pe), e.hit = -1);
var o = [ t.animX[1], t.animY[1] ], v = [ e.animX[1], e.animY[1] ], s = Tl(a, r), f = Tl(o, v), h = ue(a, r), c = ue(o, v);
Math.abs(h - c) > Math.PI && (h += h > c ? -It : It);
var u = (a[0] + r[0]) / 2, d = (a[1] + r[1]) / 2, p = (o[0] + v[0]) / 2 - u, g = (o[1] + v[1]) / 2 - d, m = c - h, y = f - s, w = 0, F = (Math.abs(m / It) + .5) * Ce, x = Math.min(F / 8, Fe), M = new Date() - x, b = setInterval(C, x), T = t.root ? Ie : 1, S = e == t.parent ? Pe : ke;
C();
}
function ie(t, e) {
var a = new Date();
if (jt) {
var r = +new Date(), i = Math.min(r - jt[0], Se) / Se, n = jt[3] + i * (jt[2] - jt[1]), l = n - jt[3] + jt[1];
At.angle = n, jt[0] = r, clearInterval(jt[4]);
} else n = At.angle || 0, jt = [ new Date() ], l = ue(Wt, t);
var o = jt[2] = ue(Wt, e), v = Fe;
Math.abs(l - o) > Math.PI && (l += l > o ? -It : It), v = Math.min(v, Se / (Math.abs(l - o) / .01)), 
jt[0] -= v, jt[1] = l, jt[3] = n, jt[4] = setInterval(ne, v), gn(new Date() - a, "routeChild"), 
ne();
}
function ne() {
var t = new Date(), e = Math.min(+new Date() - jt[0], Se) / Se, a = jt[3] + e * (jt[2] - jt[1]);
return a == At.angle && (e = 1, console.log("no angle changed!!!")), At.angle = a, 
ve(At, Wt), gn(new Date() - t, "routeAnimator"), 1 == e ? (jt = clearInterval(jt[4]), 
!0) : void 0;
}
function ve(t, e) {
Wt = e || fe(At);
var a = Wt[0], r = Wt[1], i = Wt[2], n = t.angle || 0, l = t.children, o = l.length, v = Wt[3], s = 0, f = a, h = r;
if (v) {
f && (f -= je, h -= je), n += It * (t.id ? .25 : .75), s = se(o, n), n += s * v, 
n %= It, s %= o, 0 > s && (s += o);
var c = Wt[4], u = Wt[5], d = n - v / 2;
0 != s && (l = l.slice(s).concat(l.slice(0, s)));
} else v = It / (o || 4), n %= It, c = d = o ? n + v / 2 : n, u = c + It;
t.hit = 0, st(t, f, h, t.id ? 1 : Ie, 1), pt(t, a, r, i, c, u, d, v);
for (var p = 0; o > p; p++) {
var g = a + i * Math.cos(n), m = r - i * Math.sin(n), y = l[p];
n > u && c && (v = (c + It - u) / (o - p), c = 0), n += v, y.hit = 2 * s + 1, st(l[p], g, m, ke, 1), 
++s == o && (s = 0);
}
}
function se(t, e) {
var a = Wt[3], r = Wt[4], i = r - e;
return 0 | i / a;
}
function fe(t) {
var e = t.children.length, a = ke * je;
if (t.id) {
if (5 > e || We * Math.sin(Math.PI / e) - a > a / 3) return [ Pt / 2, kt / 2, We ];
r = Pt - a, i = kt - a, kt > Pt ? i -= a : r -= a, n = Math.min(r - a, i - a), l = 2 * Math.asin(1.5 * a / n), 
v = Math.PI / 2 - Math.asin((Pt - r + a) / n), s = Math.PI + Math.asin((kt - i + a) / n);
} else var r = 0, i = 0, n = Math.min(Pt - 2 * a, kt - 2 * a), l = 2 * Math.asin(1.5 * a / n), o = Math.asin(a / n), v = 1.5 * Math.PI - o, s = It + o;
var f = [ r, i ];
return f.push(n), f.push(l), f.push(v), f.push(s), f;
}
function he(t, e, a) {
var r = [ t, e ], i = Wt[2], n = i + je, l = Tl([ At.x, At.y ], r, n);
if (je >= l) return 0;
if (Wt.length > 4 && (l = Tl(Wt, r, n)), n > l) {
var o = Math.abs(l - i);
if (je > o) {
for (var v = At.children, s = v.length, f = je * ke, h = a ? Math.max(je >> 1, Ne) : Ne, c = 0; s > c; c++) {
var u = v[c], d = [ u.x, u.y ], p = Tl(d, r, f);
if (f >= p) return 2 * c + 1;
}
if (h += 16, h > o && (h = ce(i, s, h, r))) return h;
}
} else {
var g = At.parent;
if (g && Tl([ g.x, g.y ], r, je * Pe) < n) return -1;
if (Tl([ Pt, 0 ], r, Ae * je) < n) return -2;
}
var m = kt - t;
if (je > m) {
if (je > t) return -3;
if (je > Pt - t) return -4;
}
}
function ce(t, e, a, r) {
var i = ue(Wt, r), n = 2 * Math.asin(a / t), l = At.angle || 0, o = Wt[3], v = e;
if (o) {
var s = Wt[5], f = se(e, l += It / 4);
l += f * o - o / 2, f--, l %= It, v = Math.floor((s - l) / o);
} else e ? (o = It / e, l += o / 2) : (o = It / 4, v = 4);
for (var h = 0; v > h; h++) {
var c = Math.abs(i - l) % It;
if (n > c) return f && (h += f, h %= e, 0 > h && (h += e)), 2 * h + 2;
l += o;
}
}
function ue(t, e) {
var a = e[0] - t[0], r = e[1] - t[1], i = Math.acos(a / Math.sqrt(a * a + r * r)) || 0;
return r > 0 && (i = It - i), i;
}
function Ge(t, e, a, r, i) {
function u(t, e, a) {
t.fillStyle = "#ddd", t.fillRect(0, 0, e, a);
}
t.add(new il(r, i, u), 0, a), He = e, ze = He.data;
var n = a >> 3, l = a + n, o = 0 | .8 * a, v = l + o + n, s = i - v - n, f = .6 * o | 0, h = .3 * o | 0, c = [ "left:", n, "px;width:", r - n - n, "px;border:0;margin:0;padding:0;position:absolute;z-index:9;display:block;font-size:" ];
if (null == Le) {
var d = document.body;
Le = document.createElement("input"), Xe = document.createElement("textarea"), Le.placeholder = "输入显示标题", 
Xe.placeholder = "添加详细注备", Le.setAttribute("style", c.concat(f, "px;top:", l, "px;height:", o, "px").join("")), 
Xe.setAttribute("style", c.concat(h, "px;top:", v, "px;height:", s, "px").join("")), 
d.appendChild(Le), d.appendChild(Xe);
} else {
if ("block" == Le.style.display) return;
Le.style.display = "block", Xe.style.display = "block";
}
Le.value = ze.title || "", Xe.value = ze.content || "";
}
function ta(t, e, a, r, i) {
Ke = e;
var n = .618 * a, l = r / 6, o = r - l - l, v = a + n / 2, s = v + 1.5 * n, f = i - s;
Ze = new il(o, n, la, oa), Ve = ea(e, r, f, n), t.add(Ze, l, v), t.add(Ve, 0, s);
}
function ea(t, e, a, r) {
function c(t) {
var e = aa();
e.enable != t && ((e.enable = t) && (s.checked || f.checked || (f.checked = s.checked = !0, 
f.repaint(), s.repaint())), Ke.dirty = !0, l.repaint(), Ze.repaint(), h.repaint());
}
var i = new il(e, a), n = (a - 4 * r) / 2, l = new il(e, n, ra), o = new an(e, n, aa().start, function(t, e, a, r, i) {
var n = aa();
n.start = new Date(t, e, a, r, i).getTime(), c(!0), Ke.dirty = !0, l.repaint();
}), v = .1 * e, s = new Qi(e, .8 * r, "使用声音"), f = new Qi(e, .8 * r, "使用振动"), h = new il(e - v, r, ia, function(t) {
1 == t && c(!aa().enable);
});
return i.add(l), i.add(o), i.add(s, v, a - 3.8 * r), i.add(f, v, a - 2.8 * r), i.add(h, (e - h.width) / 2, a - 1.6 * r), 
i;
}
function aa() {
return Ke.data.event || (Ke.data.event = {});
}
function ra(t, e, a) {
p(t, Ke, e / 3, a);
var r = aa().start;
if (r) {
t.fillStyle = "#666", t.textBaseline = "middle", t.font = (a / 8 | 0) + "px " + pe;
for (var i = new Date(r), n = Il(i).replace(/^\s+|\s+$/g, "").split("\n"), l = .3 * a / n.length, o = (a - 2 * l) / n.length, v = l + o / 2, s = 0; s < n.length; s++) t.fillText(n[s], e / 2, v), 
v += o;
}
}
function ia(t, e, a) {
aa().enable ? gl(t, 0, a, 0, e, 0, yl, [ "停用提醒" ]) : gl(t, 0, a, 0, e, 0, yl, [ "启用提醒" ]);
}
function la(t, e, a) {
var r = Ue.map(function(t, e) {
return 0 == e && aa().enable && (t += "√"), t;
});
this.bound = gl(t, 0, a, 0, e, Qe, Fl, r);
}
function oa(t, e, a) {
if (1 == t) for (var i = this.bound, n = i.length; n--; ) if (a > i[n]) {
Qe != n && (Qe = n, this.repaint());
break;
}
}
function Ta(t, e, a, r, i) {
var n = .618 * a, l = i / 2.8, o = l + n, v = l + 1.2 * n, s = i - v, f = s - 3 * n;
fa = n >> 1, sa = r, va = e, wa = new il(sa, l - a, Sa, Ca), Fa = new il(sa, o - l, Ia, Pa), 
xa = new il(sa, s, Oa), xa.supportScroll = !0, Ma = new il(sa, s), Ma.add(new il(sa, f, Ya, Ba)), 
Ma.add(new il(sa, .9 * n, Da, Aa), 0, f + n / 2), Ma.add(new il(sa, .9 * n, Ea, Wa), 0, s - n), 
ba = new il(sa - fa, s, ja, Na), t.add(wa), t.add(Fa, 0, l), t.add(xa, 0, v), ma ? xa.add(ba, fa / 2) : xa.add(Ma), 
ka(va);
}
function Sa(t, e, a) {
if (da > 0 && 0 == ma) var r = ga[ha] || ga[0], i = Math.max(ca, 0), n = 2 == da ? r.slice(i).concat(r.slice(0, i)) : [ va.data.fill || r[i] ];
this.iconRange = p(t, va, e, a, va.data.icon, n), va.childColor = n;
}
function Ca(t, e, a, r) {
var i = this.iconRange;
i && va.data.icon && a <= i[2] && r <= i[3] && a >= i[0] && r >= i[1] && (va.data.icon = "", 
va.dirty = !0, this.repaint());
}
function Ia(t, e, a) {
var r = fa, i = e - r, n = gl(t, 0, a, r, i, ma);
if (ma) {
n("颜色", .3);
var l = 1 == ma ? null : "#ddd", o = 2 == ma ? null : "#ddd";
ya ? (n("图标", .25, wl, l), n(ya, .2, Ra, o), this.bound = n("更多", .25, xl, "#ddd")) : (n("图标", .35, wl, l), 
this.bound = n("更多", .35, xl, o));
} else n("颜色", .5, wl), this.bound = n("图标", .5, xl);
}
function Pa(t, e, a) {
if (1 == t) for (var i = this.bound, n = i.length; n--; ) if (a > i[n]) {
if (ma != n) {
if (!n != !ma) {
xa.clear();
var l = n ? ba : Ma;
xa.add(l, (sa - l.width) / 2);
} else ba.resize(ba.width, xa.height);
xa.offsetY = 0, 3 == n && (n = 2, ya = ""), ma = n, this.repaint(), xa.repaint();
}
break;
}
}
function ka(t) {
var e = t.data.fill || "", a = e.toUpperCase();
if (ua >= 0 && (ca = ga[ua].indexOf(a), ca >= 0)) return void (ha = ua);
ha = 0, ca = -1;
for (var r = ga.length; r; ) if (ca = ga[--r].indexOf(a), ca >= 0) {
ha = ua = r;
break;
}
}
function Da(t, e, a) {
gl(t, 0, a, fa, e - fa, ua, null, pa);
}
function Aa(t, e, a) {
-1 == t && (ua = Math.min((a - fa) / (sa - fa - fa) * pa.length | 0, pa.length - 1), 
Ma.repaint());
}
function Oa(t, e, a) {
t.fillStyle = "#FFF", t.fillRect(0, 0, e, a);
}
function Ya(t, e, a) {
for (var r = ga[ua], i = a / 4, n = (e - fa - fa) / 7, l = .309 * Math.min(i, n), o = ha == ua ? ca : -1, v = 0, s = 0, f = i / 2; 4 > s; s++) {
for (var h = 0, c = fa + n / 2; 7 > h; h++, v++) {
var u = t.fillStyle = r[v];
o == v && (t.strokeStyle = u, t.lineWidth = .1 * l, t.beginPath(), t.arc(c, f, 1.2 * l, 0, 2 * Math.PI, !1), 
t.stroke()), t.beginPath(), t.arc(c, f, l, 0, 2 * Math.PI, !1), t.fill(), c += n;
}
f += i;
}
}
function Ba(t, e, a, r) {
if (1 == t) {
var i = this.height;
a = Math.min(6, 0 | (a - fa) / (sa - fa - fa) * 7), r = 0 | (4 * r - .1) / i;
var n = 7 * r + a, l = ga[ua];
n >= 0 && (ua != ha || ca != n) && (ha = ua, ca = n, va.data.fill = l[n], va.dirty = !0, 
wa.repaint(), Ma.repaint());
}
}
function Ea(t, e, a) {
if (0 > da) gl(t, 0, a, 0, e, -1, Ra, [ "批量修改子节点颜色" ]); else {
var r = [ "重置", "设置同色", "自动变色" ];
gl(t, 0, a, 0, e, da, Ra, r);
}
}
function Ra(t, e, a, r, i) {
t.fillRect(r, e, i - r, a - e);
}
function Wa(t, e, a) {
if (1 == t) if (0 > da) da = 0, this.repaint(); else {
var i = Math.min(0 | 3 * a / this.width, 2);
console.log(i, a, this.width, da), i != da && (da = i, console.log("new childColor:", da), 
wa.repaint(), Ma.repaint());
}
}
function ja(t, e, a) {
t.fillStyle = "#FFF", t.fillRect(0, 0, e, a);
var r = this.parentWidget.height;
if (1 == ma) var i = pr(e, a); else if (2 == ma) if (ya) var n = Sr.indexOf(ya), i = wr(n, e); else var i = ur(e, a);
var l = i.height, o = this.parentWidget.offsetY;
if (this.resize(this.width, l), t.drawImage(i, 0, 0), l > r && o >= 0) {
var v = r >> 3, s = r - v + o, f = t.createLinearGradient(0, s, 0, s + v);
f.addColorStop(0, "rgba(255,255,255,.01)"), f.addColorStop(.1, "rgba(255,255,255,.2)"), 
f.addColorStop(.5, "rgba(255,255,255,.8)"), f.addColorStop(1, "rgba(255,255,255,1)"), 
t.fillStyle = f, t.fillRect(0, s, e, v);
}
}
function Na(t, e, a, r, i, n) {
if (1 == t && ma) {
var l = this.width, o = this.height;
if (2 != ma || ya) {
if (ya && 2 == ma) var v = Sr.indexOf(ya), s = br(v, i, n); else var s = Tr(i, n);
s && (va.data.icon = s, va.dirty = !0, wa.repaint());
} else i = 0 | Math.min(3 * i / l, 2), n = 0 | Math.min(3 * n / o, 2), ya = Sr[3 * n + i], 
this.repaint(), Fa.repaint();
}
}
function Ua(t, e, a) {
$a = e, La = a;
}
function Ka(t, e) {
_a = t, qa = ir(t), Xa = $a / 6 | 0, Ha = e, Va(t.data.title ? Ja : 0), $e();
}
function Za() {
var t = JSON.stringify(qa), e = JSON.stringify(ir(_a)), a = _a.childColors;
if (a) for (var r = _a.children, i = r.length; i--; ) r[i].data.fill = a[(i + 1) % a.length], 
r[i].dirty = 1;
Ha(t != e || a), Ha = null;
}
function Va(t) {
Ga = tr(t), t ? 1 == t ? Ta(Ga, _a, Xa, $a, La) : ta(Ga, _a, Xa, $a, La) : Ge(Ga, _a, Xa, $a, La);
}
function tr(t) {
Ja = t;
var e = new il($a, La, function(t) {
t.fillStyle = "#FFF", t.fillRect(0, Xa, $a, La - Xa);
});
return e.add(new il($a, Xa, er, rr)), e.attach(), e;
}
function er(t, e, a) {
t.clearRect(t, 0, 0, e, a), gl(t, 0, a, 0, e, Ja, ar, za), Ja || window.scrollTo(0, 0);
}
function ar(t, e, a, r, i) {
if (t.fillRect(r, e, i - r, a - e), 0 == r && i == $a) {
var n = a - e, l = i - r, o = r + 3.5 * l / 4, v = (e + a) / 2;
t.strokeStyle = "#888", t.beginPath(), t.lineWidth = 5, t.arc(o, v, .32 * n, 0, 2 * Math.PI, !1), 
t.stroke();
}
}
function rr(t, e, a) {
if (-1 == t) {
var i = 0 | 4 * a / $a, n = za.length - 1;
i && 0 == Ja && Je(), i >= n ? Za() : i != Ja && (Va(i), i || $e());
}
return !0;
}
function ir(t) {
var e = t.data;
return {
title: e.title || "",
content: e.content || "",
fill: e.fill,
icon: e.icon
};
}
function cr(t, e) {
lr.push(t.split(","));
for (var a = or.length >> 3, r = or.push.apply(or, e.split(",")) >> 3, i = r - a; i--; ) if (1 & a++) {
var n = 8 * a, l = n - 8;
or = or.slice(0, l).concat(or.slice(l, n).reverse()).concat(or.slice(n));
}
}
function ur(t, e) {
var a = nr(ur), r = a[0];
if (a[1] != t || a[2] != e) {
a[1] = r.width = t, a[2] = r.height = e;
var i = r.getContext("2d");
i.save();
try {
var n = t / 3, l = 2 * n, o = e / 3, v = 2 * o, s = Math.min(n, o) / 3;
if (i.strokeStyle = "#ddd", i.lineWidth = 4, i.moveTo(0, o), i.lineTo(t, o), i.moveTo(0, v), 
i.lineTo(t, v), i.moveTo(n, 0), i.lineTo(n, e), i.moveTo(l, 0), i.lineTo(l, e), 
i.stroke(), i.textAlign = "left", i.fillStyle = "#3b88c3", hr) {
var f = s / hr;
i.scale(f, f), s = hr, o /= f, n /= f;
}
i.font = (0 | s) + "px " + pe;
for (var h = 0; 9 > h; h++) {
var c = h % 3, u = (h - c) / 3;
dr(i, c * n, u * o, n, o, s, lr[h]);
}
} finally {
i.restore();
}
}
return r;
}
function dr(t, e, a, r, i, n, l) {
var o = e + r / 2, v = a + i / 2;
t.fillText(l[0], o - n, v), t.fillText(l[1], o - n, v + n), t.fillText(l[2], o, v), 
t.fillText(l[3], o, v + n);
}
function pr(t, e) {
var a = nr(pr), r = a[0];
if (a[1] != t || a[2] != e) {
a[1] = r.width = t, a[2] = r.height = e;
var i = r.getContext("2d"), n = t / 8, l = e / 8;
yr(i, or, n, l);
}
return r;
}
function gr(t, e, a, r, i) {
if (hr) {
t.save();
try {
var n = i / hr;
t.scale(n, n), t.textAlign = "center", t.fillStyle = "#3b88c3", a /= n, r /= n, 
i = hr, t.font = hr + "px " + pe, Mr(t, e, a, r, i);
} finally {
t.restore();
}
} else mr.apply(this, arguments);
}
function mr(t, e, a, r, i) {
t.font = (0 | i) + "px " + pe, t.textAlign = "center", t.fillStyle = "#3b88c3", 
Mr(t, e, a, r, i);
}
function yr(t, e, a, r) {
sr = a, fr = r, t.save();
try {
var i = .8 * Math.min(a, r);
if (hr) {
var n = i / hr;
t.scale(n, n), a /= n, r /= n, i = hr;
}
t.font = (0 | i) + "px " + pe, t.textAlign = "center", t.fillStyle = "#3b88c3";
for (var l = 0; l < e.length; l++) {
var o = l % 8, v = (l - o) / 8;
mr(t, e[l], o * a + (a - i) / 2, v * r + (r - i) / 2, i);
}
} finally {
t.restore();
}
}
function wr(t, e) {
var a = nr(wr), r = a[0], i = vr[t], n = e / 8 * Math.ceil(i.length / 8);
if (a[1] != t || a[2] != e) {
a[1] = t, a[2] = r.width = e, r.height = n;
var l = r.getContext("2d"), o = e / 8, v = o;
yr(l, i, o, v);
}
return r;
}
function Fr(t, e, a, r, i, n) {
t.beginPath(), t.moveTo(e, a + n), t.lineTo(e, a + i - n), t.quadraticCurveTo(e, a + i, e + n, a + i), 
t.lineTo(e + r - n, a + i), t.quadraticCurveTo(e + r, a + i, e + r, a + i - n), 
t.lineTo(e + r, a + n), t.quadraticCurveTo(e + r, a, e + r - n, a), t.lineTo(e + n, a), 
t.quadraticCurveTo(e, a, e, a + n), t.fill();
}
function xr(t, e, a, r, i) {
t.save();
try {
t.fillStyle = "#3b88c3", Fr(t, a - 1, r - 1, i + 2, i + 2, i / 6), t.fillStyle = "white", 
r += .9 * i, a += i / 2, t.fillText(e, a, r);
} finally {
t.restore();
}
}
function Mr(t, e, a, r, i) {
var n = e.charAt(0);
if (n >= "#" && "9" >= n) return xr(t, n, a, r, i);
if (n = "�" && 2 == e.length) {
var l = e.charCodeAt(1);
if (l >= 56806 && 56831 >= l) return xr(t, String.fromCharCode(-56741 + l), a, r, i);
}
r += .88 * i, a += i / 2, t.fillText(e, a, r);
}
function br(t, e, a) {
var r = Math.min(e / sr | 0, 7), i = a / fr | 0;
return vr[t][8 * i + r];
}
function Tr(t, e) {
var a = Math.min(t / sr | 0, 7), r = e / fr | 0;
return or[8 * r + a];
}
function jr(t) {
for (var r, e = t.split(/\r\n?|\n/), a = [], i = 0; i < e.length; i++) {
var n = e[i], l = n.search(/\S/);
if (l != n.length - 1) if ("#" == n.charAt(l)) {
var r = a[a.length - 1], o = n.substr(l + 1);
r.content ? r.content += "\n" + o : r.content = o;
} else {
var v = a[l - 1], r = {
children: []
};
v && v.children.push(r), a[l] = r, a.length = l + 1, Nr(n, r);
}
}
return a[0];
}
function Nr(t, e) {
var a = t.match(/\s*(.*?[^\\])(?:\{(\w*)(#\w+)?(?:,(.+))?\})?$/);
e.title = a[1], e.id = a[2], e.fill = a[3];
var r = a[4];
if (r) {
r = r.split(",");
for (var i = r.length; i--; ) t = r[i].split("="), e[t[0]] = t[1];
}
}
function Zr() {
Gr = Qr * Ye;
var t = new il(Hr, zr, null, null, !0), a = Kr.children;
t.add(new il(Hr, Gr, ti, ei));
for (var r = 0; r < a.length; r++) ai(t, a[r], Gr);
t.attach();
}
function Vr(t, e, a) {
Qr = a, Ur = Qr * Oe, Hr = t, zr = e, Kr = new Lr({
title: "Home",
children: Ni()
});
for (var r = Kr.children, i = r.length; i--; ) r[i].loaded = !1;
Kr.id = 0, Kr.x = 0, Kr.y = 0;
}
function ti(t, e, a) {
var r = S(), i = r.width / 2;
t.fillStyle = "#fff", t.fillRect(0, 0, e, a), t.drawImage(r, e - a, a / 2 - i);
}
function ei(t, e, a, r) {
var i = Ur, n = Hr - Gr + i, l = Gr / 2;
Tl([ a, r ], [ n, l ]) <= i && (qt(Kr), Kt({}));
}
function ai(t, e, a) {
function r(t, a, i) {
var n = Xr(r), l = n[0];
(n[1] != e.data.updateTime || n[2] != i) && (n[1] = e.data.updateTime, n[2] = i, 
l.width = a, l.height = i, ri(l.getContext("2d"), e, a, i)), t.drawImage(l, 0, 0);
}
function i(t) {
1 == t && qt(e);
}
t.add(new il(Hr, a, r, i));
}
function ri(t, e, a, r) {
e.scale = Ur / Qr;
var i = m(e), n = e.data, l = r / 8 | 0, o = r / 4;
t.lineWidth = 4, t.fillStyle = "#fff", t.strokeStyle = "#f2f2f2", t.fillRect(0, 0, a, r), 
t.strokeRect(0, 0, a, r), t.drawImage(i, a - r, r / 2 - Ur), t.font = "bold " + l + "px " + pe, 
t.fillStyle = "#888", t.textAlign = "left", t.baseLine = 0, t.textBaseline = "middle";
var v = 10;
t.fillText(Be, v, o), t.fillText(Ee, v, 2 * o), t.fillStyle = "#999", t.font = " " + l + "px " + pe;
var s = e.edit || (e.edit = 10 * Math.random() | 0);
t.fillText("共有" + s + "个节点 " + ((986.756 * s & 63) + 1) + "次修改", v, 3 * o), v += t.measureText(Be).width, 
t.fillText(ii(n.createTime), v, o), t.fillText(ii(n.updateTime), v, 2 * o);
}
function ii(t) {
function e(t, e) {
return e.length > 1 ? ("000" + t).slice(-e.length) : t;
}
function a(t) {
return t ? (t > 0 ? "-" : t *= -1, "+" + e(t / 60, "00") + ":" + e(t % 60, "00")) : "Z";
}
return t = t ? new Date(t) : new Date(), "YYYY-MM-DD".replace(/([YMDhms])\1*|\.s|TZD$|'[^']+'|"[^"]+"/g, function(r) {
switch (r.charAt()) {
case "Y":
return e(t.getFullYear(), r);
case "M":
return e(t.getMonth() + 1, r);
case "D":
return e(t.getDate(), r);
case "h":
return e(t.getHours(), r);
case "m":
return e(t.getMinutes(), r);
case "s":
return e(t.getSeconds(), r);
case ".":
return "." + e(t.getMilliseconds(), "000");
case "T":
return a(t.getTimezoneOffset());
case "'":
case '"':
return r.slice(1, -1);
default:
return r;
}
});
}
function Si(t, e, a) {
var r = t.cmds;
switch (e) {
case ci:
case ui:
case di:
case pi:
case gi:
var i = 255 * t.globalAlpha + .5;
case xi:
if (!t._configJSON) {
var n = Di(t);
Si(t, Mi, n);
}
break;
case fi:
if (!a.cmds.length) return;
var i = a.nativeId || 0;
a = a.cmds.splice(0).join("");
}
var l = [ e, a.length ];
return null != i && (l[1]++, l.push(i)), l = l.map(ki), l.push(a), r.push(l.join("")), 
xi == e ? t.commit(!1) : void 0;
}
function Ii(t) {
this.style = {}, this.stack = [], this.saveCount = 0, this._style = {
font: "10px sans-serif",
fillStyle: "#000",
strokeStyle: "#000",
lineCap: "butt",
lineJoin: "miter",
lineWidth: 1,
miterLimit: 10,
textAlign: "left",
textBaseline: "alphabetic"
}, this._styleJSON, this.nativeId = Ti.createCanvas(t >= 0 ? t : -1), this.canvas = this, 
this.globalAlpha = 1, this.cmds = [];
}
function Pi(t) {
return t && String.fromCharCode.apply(String, t);
}
function ki(t) {
return String.fromCharCode(t);
}
function Di(t) {
if (t._styleJSON) return t._styleJSON;
var e = t._style, a = [ '{"' ];
for (var r in e) a.push(r, '":'), (r = e[r]) instanceof Object ? a.push('"', String(r), '","') : "string" == typeof r ? a.push('"', Oi(r).replace(/["\\]/g, "\\$&"), '","') : a.push(r, ',"');
return a.push(a.pop().replace(',"', "}")), t._styleJSON = a.join("");
}
function Oi(t) {
var e = t.match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*([\.\d]+))?|^#[0-9a-f]+/i);
if (e) {
var a = e[1];
if (a) {
for (t = (255 * (e[4] || 1) << 24 | a << 16 | e[2] << 8 | e[3]).toString(16); t.length < 8; ) t = "0" + t;
t = "#" + t;
} else t = t.replace(/#(?:(.)(.)(.)$)?/, "#FF$1$1$2$2$3$3").toUpperCase();
} else {
var r = Ai.indexOf(t.toUpperCase());
r >= 0 && (t = Ai[r + 1]);
}
return t;
}
function Yi(t) {
return t._path || (t._path = []);
}
function Bi(t) {
return t && (t = t % bi || bi, 0 > t && (t += bi)), t / bi * 4095;
}
function Ei(t) {
var e = [];
this.addColorStop = function(t, a) {
e.push(t + Oi(a));
}, this.toString = function() {
return t + e.sort().join(",");
};
}
function Ni() {
return Wi.concat();
}
function _i(t) {
var e = t.id || t;
return t = localStorage.getItem(Ri + e), t ? JSON.parse(t) : (console.error("data not found:", e), 
{});
}
function qi(t) {
var e = Wi, a = t.id || (t.id = Xi()), r = $i(a), i = e[r];
i ? e.splice(r, 1) : i = {
createTime: +new Date(),
id: t.id
}, i.title = t.title, i.fill = t.fill, i.icon = t.icon, i.updateTime = +new Date(), 
e.unshift(i), localStorage.setItem(Ri, JSON.stringify(Wi)), localStorage.setItem(Ri + a, JSON.stringify(t));
}
function Ji(t) {
var e = t.id, a = $i(e);
a >= 0 && (Wi.splice(a, 1), localStorage.setItem(Ri, JSON.stringify(Wi)), localStorage.removeItem(Ri + e));
}
function $i(t) {
for (var e = Wi, a = e.length; a--; ) if (e[a].id == t) return a;
}
function Xi() {
for (var t = ((new Date() >> 24 | 4095) << 24).toString(16) + (4095 * Math.random() | 0).toString(16); t.length < 6; ) t += "0";
return t;
}
function Hi(t, e, a, r, i) {
il.apply(this, [ t, e, zi, Gi ]), this.options = a, this.offset = r, i && (this.onchange = i);
}
function zi(t, e, a) {
var r = a / 3, i = ge;
t.lineWidth = i, t.fillStyle = "#000", t.strokeStyle = "#4cd4bc", t.beginPath(), 
t.lineCap = "round", t.moveTo(i, r), t.lineTo(e - i, r), t.moveTo(i, 2 * r), t.lineTo(e - i, 2 * r), 
t.stroke();
var n = this.options.length, l = -2, o = -r - this.offset * r;
t.textBaseline = "middle", t.textAlign = "center";
do {
if (o > -r) {
if (o > a) break;
var v = Math.abs(o - r) / a, s = (l + n) % n;
this.drawOption(t, s, e / 2, o + r / 2, v);
}
o += r;
} while (l++ <= n);
}
function Gi(t, e, a, r, i, n) {
if (-2 == t) {
var l = this.getIndex(), o = this.height / 3, v = (n - this.previousY) / o, s = this.offset, f = this.options.length;
s > f - 1 || 0 > s ? ((s > f || -1 > s) && (s = (s + f) % f), v /= 2) : v *= 10 * Math.log(Math.abs(n - this.height / 2) / o / 10 + 1), 
this.offset = s - v;
var h = this.getIndex();
h != l && this.onchange(h, l), this.repaint();
} else -3 == t && (this.offset = this.getIndex(), this.repaint());
}
function Qi(t, e, a) {
il.call(this, t, e, Ki, Ui), this.text = a;
}
function Ui(t) {
1 == t && (this.checked = !this.checked, this.repaint());
}
function Ki(t, e, a) {
var r = a / 8, i = a - 2 * r, n = r + r, l = r + i / 2;
t.fillStyle = "#000", t.strokeStyle = "#4cd4bc", t.lineWidth = r / 2, this.checked && (t.beginPath(), 
t.moveTo(n, l), t.lineTo(n + r / 2, l - r / 2), t.lineTo(l, a - n), t.lineTo(i, n - r / 2), 
t.stroke()), ul(t, r, r, i, i, r), t.stroke(), t.font = (.6 * a | 0) + "px " + pe, 
t.textBaseline = "middle", t.fillText(this.text, a + i / 2, .5 * a);
}
function an(t, e, a, r) {
il.call(this, t, e), this.timesIndex = vn(a), this.onchange = r, nn(this, this.timesIndex, 0, t, e);
}
function nn(t, e, a, r, i) {
for (var n = r / 20, l = (r - 6 * n) / 4, o = l + n, v = [ Zi, Vi, tn, en ], s = [ n, n + o, r - 2 * o, r - o ], f = 0; f < v.length; f++) {
var h = c, c = new Hi(l, i, v[f], e[f + 1], function(a, r) {
var i = a - r, n = this.previous, l = this.index + 1, o = !0;
if (e[l] = a, (i > 10 || -10 > i) && (i = i > 0 ? -1 : 1, n ? (o = !1, n.roll(i)) : e[l - 1] = a), 
(2 == l || 1 == l) && on(t, e), o && t.onchange) {
var v = e.concat();
v[2]++, t.onchange.apply(t, v);
}
});
c.drawOption = ln, c.index = f, c.previous = h, t.add(c, s[f], a);
}
on(t, e);
}
function ln(t, e, a, r, i) {
var n = this.options[e].split(/(?=[^\d])/), l = .2 - .1 * i, o = this.height * l | 0;
t.globalAlpha = Math.pow(Math.min(1 - i + .1, 1), 3), t.font = o + "px " + pe, t.textAlign = "right", 
o /= 2, a += o / 2, t.fillText(n[0], a, r), t.textAlign = "left", t.font = o + "px " + pe, 
t.fillText(n[1], a, r + o / 2);
}
function on(t, e) {
var a = t.children[1], r = e[0], i = e[1], n = e[2], l = 32 - new Date(r, 10 > n ? i - 1 : i, 32).getDate();
console.log("month length:", l), a.options.length != l && (a.options = Vi.slice(0, l), 
n > l && (a.offset = e[2] = l - 1), a.repaint());
}
function vn(t) {
return t = t ? new Date(t) : new Date(), [ t.getFullYear(), t.getMonth(), t.getDate() - 1, t.getHours(), t.getMinutes(), t.getSeconds() ];
}
function sn(t, e) {
return e + t;
}
function fn(t, e) {
return 1 + e + t;
}
function pn(t, e) {
if (bn++, Sn += t, Cn += e, bn > 20) {
var a = [ 1e3 * bn / (e - xn), (Cn - Sn) / bn, Tn / bn ].map(function(t) {
return t.toFixed(1);
}).join("	");
Mn.push(a) > 4 && Mn.shift(), console.log("fps:" + a), xn = e, bn = Sn = Cn = Tn = 0;
}
}
function gn(t) {
Tn += +t;
}
function mn(t, e) {
Zn(e), wn(t);
}
function yn() {
var t = +new Date();
kn = -1;
var e = On.getContext("2d");
if (An && (An = !1, e.clearRect(0, 0, On.width, On.height)), null != On.nativeId) {
Fn && console.error("invalid depth status!!!"), Fn++;
try {
var a = Dn(e);
} finally {
On.commit(!0);
}
Fn--;
} else a = Dn(e);
a || kn > 0 ? (kn = 1, In(yn, "anima")) : kn = 0, pn(t, +new Date());
}
function wn(t) {
t != Dn && (An = !0), Dn = t, kn || In(yn), kn = 1;
}
function Un(t, e) {
if (On != t) {
On = t;
for (var a = Yn.length; a--; ) On.addEventListener(Yn[a], rl, !1);
e && Zn(e);
}
}
function Kn(t) {
for (var e = t.length; e--; ) On.removeEventListener(t[e], rl, !1);
}
function Zn(t) {
al(!0);
var e = Bn;
return Bn = t, e;
}
function Vn(t, e, a) {
En = new Date(), _n = 0, jn && clearTimeout(jn), jn = setTimeout(function() {
jn = 0, Bn(0, t, Ln, Xn, 0 | Jn, 0 | $n);
}, ye), Bn(-1, t, Ln = e, Xn = a, Jn = e, $n = a);
}
function tl(t, e, a) {
jn && (Math.abs(e - Ln) > Nn || Math.abs(a - Xn) > Nn) && (jn = clearTimeout(jn)), 
_n++, Jn = .8 * Jn + .2 * e, $n = .8 * $n + .2 * a, Bn(-2, t, Ln, Xn, 0 | Jn, 0 | $n);
}
function el(t, e, a) {
function r() {
jn && new Date() - En < me ? Wn = setTimeout(r, me) : (0 > _n && Bn(Rn, t, Ln, Xn, e, a), 
3 == Rn && prompt(Mn.join("\n")), Wn = Rn = 0);
}
try {
jn && (jn = clearTimeout(jn), Rn ? (Rn++, clearTimeout(Wn)) : Rn = 1, Wn = setTimeout(r, me)), 
Bn(-3, t, Ln, Xn, e, a, Rn);
} finally {
al();
}
}
function al(t) {
jn && (jn = clearTimeout(jn)), t && Wn && (Wn = clearTimeout(Wn), Rn = 0), _n = -1, 
qn = null;
}
function rl(t) {
try {
var e = new Date(), a = t.changedTouches && t.changedTouches[0] || t, r = a.clientX - (qn || (qn = t.srcElement.getBoundingClientRect())).left, i = a.clientY - qn.top;
switch (t.type) {
case "touchstart":
var e = new Date();
Yn.length > 6 && Kn(Yn.splice(4));
case "mousedown":
t.preventDefault(), 0 > _n && Vn(t, r, i);
break;
case "mousemove":
Yn.length > 6 && Kn(Yn.splice(0, 4));
case "touchmove":
if (0 > _n) break;
tl(t, r, i), t.preventDefault();
break;
case "touchend":
case "touchcancel":
case "mouseout":
case "mouseup":
if (t.preventDefault(), 0 > _n) break;
el(t, r, i);
break;
default:
console.warn("unknow event:", t.type, t);
}
} finally {
gn(new Date() - e);
}
}
function il(t, e, a, r, i) {
this.width = t || On.width, this.height = e || On.height, this.draw = a, this.event = r, 
this.children = [], this.rangeX = [], this.rangeY = [], this.supportScroll = i, 
this.x = this.y = 0, this.offsetX = this.offsetY = 0, this.dirty = Qn;
}
function nl(t, e, a, r, i) {
function M(t, r, i, n) {
for (var l = e; ;) {
if (t += l.x, r += l.y, !l.parentWidget) return a.push(t, r, i, n), [ t, r ];
l = l.parentWidget;
}
}
function b(v, s, f, h) {
r.push(e, r = []);
for (var d = 0, p = n.length; p > d; d++) {
var g = n[d], m = g.dirty;
if (m || i) {
var y = d << 1, w = l[y] - c, F = o[y] - u, x = l[++y] - c, M = o[y] - u;
if (g.x = w, g.y = F, v > x || s > M || w > v + f || F > s + h) continue;
try {
nl(t, g, a, r, i);
} finally {}
}
}
}
var n = e.children, l = e.rangeX, o = e.rangeY, v = e.width, s = e.height, f = o[o.length - 1], h = e.dirty, c = 0;
if (h & Gn) {
var u = ll(e.offsetY, f - s), d = u - (e.drawOffsetY || 0);
e.drawOffsetY = u;
} else var u = e.drawOffsetY || 0;
if (i) b(0, 0, v, s); else if (h > Gn) i = !0, b(0, 0, v, s), M(0, 0, v, s); else if (h == Gn) {
i = !0, t.imageSmoothingEnabled = !1;
var p = Math.abs(d), g = s - p, m = d > 0 ? s - d - 0 : 0;
b(0, m, v, p);
{
var y = M(0, m, v, p), w = y[0], F = y[1];
t.canvas;
}
m > 0 && (F = F - m + d), t.putImageData(t.getImageData(w, F, v, g), w, F - d);
} else b(0, 0, v, s);
}
function ll(t, e) {
if (e > 0 && t > e || 0 > t) if (0 > t) {
var a = -t;
t = 50 * -Math.log(a / 50 + 1);
} else a = t - e, t = e + 50 * Math.log(a / 50 + 1);
return t || 0;
}
function ol(t, e, a, r, i, n, l) {
try {
if (l.event && l.event.apply(l, arguments)) return !0;
for (var o = l.children, v = o.length; v-- > 0; ) {
var s = o[v];
if (s) {
var f = s.x, h = s.y, c = f + s.width, u = h + s.height;
if (u >= r && r >= h && c >= a && a >= f && ol(t, e, a - f, r - h, i - f, n - h, s)) return !0;
}
}
l.supportScroll && vl(l, t, i, n);
} finally {
l.previousY = n;
}
}
function vl(t, e, a, r) {
var i = t.height, n = Math.max.apply(Math, t.rangeY), l = n - i;
if (-2 == e && l > 0) {
var o = r - t.previousY || 0;
t.offsetY -= o, o && t.repaint(Gn);
} else if (-3 == e && l > 0) {
t.repaint(Qn);
var v = t.offsetY;
(0 > v || v > l) && (t.restore && clearInterval(t.restore), t.restore = setInterval(function() {
0 > v ? (t.offsetY = v = Math.min(.9 * v + 10, 0), t.repaint(Gn)) : v > l && (t.offsetY = v = Math.max(v - 10 - .1 * (v - l), l), 
t.repaint(Gn)), v >= 0 && l >= v && (t.restore = clearInterval(t.restore), t.repaint(Qn));
}, 20));
}
}
function ul(t, e, a, r, i, n) {
var l = r / 2 - n, o = i / 2 - n, v = e + r / 2, s = a + i / 2;
t.beginPath(), t.arc(v - l, s - o, n, Math.PI, 1.5 * Math.PI), t.arc(v + l, s - o, n, 1.5 * Math.PI, 0), 
t.arc(v + l, s + o, n, 0, .5 * Math.PI), t.arc(v - l, s + o, n, .5 * Math.PI, Math.PI), 
t.closePath();
}
function gl(t, e, a, r, i, n, l, o) {
if (o) {
for (var v = o.length, s = 1 / v, f = ml(t, e, a, r, i, n, l), h = 0; v > h; h++) var c = f(o[h], s, h == n && l);
return c;
}
return ml.apply(null, arguments);
}
function ml(t, e, a, r, i, n, l) {
var o = r, v = a - e, s = i - r, f = [ o ], h = .4 * v | 0, c = a - (v - h) / 2 | 0, u = -1;
return t.fillStyle = sl, (l || yl)(t, e, a, r, i, r, i), i--, function(l, v, d, p, g) {
var m = ++u == n, y = o + s * v, w = (o + y) / 2;
return t.fillStyle = sl, t.strokeStyle = fl, (d || m) && (t.fillStyle = p || (m ? hl : sl), 
(d || yl)(t, e, a, o, y, r, i)), l && (t.fillStyle = g || (m ? cl : fl), t.font = (0 | h) + "px STHeiti serif", 
t.textAlign = "center", t.textBaseline = "bottom", t.fillText(l, w, c)), f.push(o = y), 
y > i ? f : arguments.callee;
};
}
function yl(t, e, a, r, i) {
var n = (a - e) / 2;
t.beginPath(), t.arc(r + n, e + n, n, Math.PI / 2, 1.5 * Math.PI, !1), t.arc(i - n, e + n, n, -Math.PI / 2, Math.PI / 2, !1), 
t.closePath(), t.fill();
}
function wl(t, e, a, r, i) {
var n = (a - e) / 2;
t.beginPath(), t.arc(r + n, e + n, n, Math.PI / 2, 1.5 * Math.PI, !1), t.lineTo(i, e), 
t.lineTo(i, a), t.closePath(), t.fill();
}
function Fl(t, e, a, r, i, n, l) {
(r == n ? i == l ? yl : wl : i >= l - 1 ? xl : Ml).apply(null, arguments);
}
function xl(t, e, a, r, i) {
var n = (a - e) / 2;
t.beginPath(), t.moveTo(r, a), t.lineTo(r, e), t.arc(i - n, e + n, n, -Math.PI / 2, Math.PI / 2, !1), 
t.closePath(), t.fill();
}
function Ml(t, e, a, r, i) {
t.fillRect(r, e, i - r, a - e);
}
function bl(t, e, a) {
e = e || 16, a = a || "", "string" == typeof t && (t = Sl(t));
var r = [], i = e - Math.min(e >> 2, 16);
return function(n) {
var l = n[a], o = r.lastIndexOf(l);
return o >= 0 ? i > o && (r.splice(o, 1), r.push(l)) : (l = [], l[0] = r.length > e ? t(r.shift().splice(0)[0]) : t(), 
r.push(n[a] = l)), l;
};
}
function Tl(t, e, a) {
var r = t[0] - e[0], i = t[1] - e[1];
return a && (r > a || -a > r || i > a || -a > i) ? 2147483647 : Math.sqrt(r * r + i * i);
}
function Sl() {
return function(t) {
return t || ni();
};
}
function Il(t) {
console.log(t);
var e = t.getFullYear(), a = t.getMonth() + 1, r = t.getDate(), i = t.getHours(), n = t.getMinutes(), l = new Date(), o = (+t - l) / 1e3 / 60 + .5 | 0, v = [], s = [];
if (2880 >= o) {
var f = o / 60 | 0, h = o % 60;
f > 0 && v.push(f, "小时"), h > 0 && v.push(h, h > 0 ? "分" : "分钟"), (f > 0 || h > 0) && v.push("后");
}
t.setHours(12), l.setHours(12);
var c = Math.round((t - l) / 24 / 36e5), u = Pl(i);
if (0 == c) s.push(u); else if (1 >= c) u.endsWith("上") ? (u = u.substring(0, 1), 
s.push("明", u)) : s.push(u), v.push(v.length ? " (明天)" : "明天"); else {
var d = 2 == c ? "后天" : c + "天后";
v.length > 0 ? v.push(" (", d, ")") : v.push(d), s.push(u);
}
s.push(i % 12, "点"), n && s.push(n, "分"), s.push("\n"), v.push("\n");
var p = [ e, 10 > a ? "-0" : "-", a, 10 > r ? "-0" : "-", r, "\n" ];
return v.join("") + s.join("") + p.join("");
}
function Pl(t) {
return 5 > t ? "凌晨" : 9 > t ? "早上" : 12 > t ? "上午" : 14 > t ? "中午" : 17 > t ? "下午" : 19 > t ? "傍晚" : 22 > t ? "晚上" : "深夜";
}
var t, e, a, r, i, n, h, c, u, k, D, A, O, Y, B, E, R, N, _, q, J, L, H, Pt, kt, At, Ot, jt, Re, We, je, Ne, _e, Le, Xe, He, ze, Ke, Ze, Ve, va, sa, fa, ya, wa, Fa, xa, Ma, ba, _a, qa, $a, La, Xa, Ha, Ga, sr, fr, f = bl("canvas", 632), T = [ S, [] ], W = [], j = [], $ = [], V = 0, tt = 0, et = 0, Ct = function(t) {
return dt(At.children[t]);
}, It = 2 * Math.PI, Yt = [], Bt = 0, Rt = l, Wt = [], pe = "STHeiti serif", ge = 1.5 * devicePixelRatio, me = 240, ye = 600, we = 160, Fe = 128, xe = function(t, e) {
var a = Math.min(t, e) / 6;
_e = 0 | t, Re = 0 | e, We = 2.18 * a | 0, je = 0 | a, Ne = a / 48 + 8 * devicePixelRatio | 0;
}, Me = 1.5 * devicePixelRatio, xe = function(t, e) {
var a = Math.min(t, e) / 6;
_e = 0 | t, Re = 0 | e, We = 2.18 * a | 0, je = 0 | a, Ne = a / 48 + 8 * devicePixelRatio | 0;
}, Se = 128, Ce = 300, Ie = 2, Pe = 2.4, ke = .75, De = .7, Ae = 1.2, Oe = .8, Ye = 2.2, Be = "创建于：", Ee = "修改于：", Je = function() {
Le && (Le.blur(), Xe.blur(), He.dirty = !0, ze.title = Le.value, ze.content = Xe.value, 
Xe.style.display = Le.style.display = "none");
}, $e = function() {
Le && ("block" == Le.style.display, Le.focus());
}, Qe = 0, Ue = [ "提醒", "投票", "讲稿" ], ha = 0, ca = -1, ua = 0, da = -1, pa = [ "经典", "炫彩" ], ga = [ "#2B8567#1D9C7E#22B59A#4CD4BC#1FE3BF#90D7C5#98C0B4#04576B#227580#4699A3#40BACA#52D6EB#7DCADC#88B8CC#611023#991924#C24924#DE6530#E67B63#CC8F8F#AE7D7D#484570#68638C#8B85A8#B3AFC5#C8C6D4#CDCDD1#A3A1A8".match(/#\w+/g), "#8000FF#FF00FF#FF0080#FF3D3D#FF9900#FFD83D#A0F000#5000F0#3D64FF#7A95FF#00B3FF#85E0D1#00B8B8#666600#333399#FF0033#990066#FFCC33#CCCC00#666666#0066CC#336699#669933#99CC33#00FF80#663366#660000#000000".match(/#\w+/g) ], ma = 0, Ja = 0, za = [ "内容", "样式", "功能", "√" ], nr = bl("canvas", 2), lr = [], or = [], vr = [ "⛺,🎃,🎯,🏈,🏀,🎵,🎤,🎹,🎑,🎄,⚽,🎾,🎱,🎶,🎼,🎻,🎈,🎋,🏉,🎳,⛳,🎺,🎷,🎸,🎏,🎉,🚵,🚴,🏁,🎨,🎭,🎬,🗿,🎊,🏇,🏆,🎿,🏂,🏊,🏄,🎆,🎇,🎣,🚶,🏃,💃,⚾,🎐,♨,🎠,🎡,🎢,🗽,🌉,⛲".split(","), "🙇,👽,👍,💖,💟,😁,😂,😍,🎅,👻,👎,💛,💙,😜,😝,😛,👼,💀,👌,💜,💚,😃,😄,😀,👦,😈,👊,❤,💝,😊,😉,😘,👧,👿,✊,💔,💗,😚,😗,😙,👨,👹,👋,💓,💕,😳,😔,😌,👩,👺,✋,💞,💘,😒,😞,😣,👲,👾,👐,💌,💍,😢,😭,😪,👴,😺,👆,💋,💏,😥,😰,😅,👵,😸,👇,💑,👫,😓,😩,😫,👶,😻,👉,👬,👭,😨,😱,😠,👱,😽,👈,👪,🙌,😡,😤,😖,👸,😼,🙏,👏,✌,😆,😋,😷,🙆,🙀,☝,💪,👂,😎,😴,😵,🙅,😿,👀,👃,👅,😲,😟,😦,🙍,😹,👄,😾,🙈,😧,😮,😬,🙎,🙉,🙊,💩,🙋,😐,😕,😯,💁,💆,👰,👯,👳,😶,😇,😏,👮,👷,💂,💇,😑,☺,🙁,🙂".split(","), "#⃣,💹,💰,💴,💵,⌛,⏰,⌚,0⃣,📈,💷,💶,💳,🕐,⏳,📅,1⃣,📉,💸,💲,💱,📆,🕛,🕧,2⃣,📊,〰,〽,3⃣,🕜,🕑,🕝,4⃣,5⃣,6⃣,7⃣,8⃣,🕒,🕞,🕓,9⃣,🔢,🔟,✖,➕,🕟,🕔,🕠,➖,➗,🇦,🇧,🇨,🕕,🕖,🕗,🇩,🇪,🇫,🇬,🇭,🕘,🕙,🕚,🇮,🇯,🇰,🇱,🇲,🕡,🕢,🕣,🇳,🇴,🇵,🇶,🇷,🕤,🕥,🕦,🇸,🇹,🇺,🇻,🇼,🇽,🇾,🇿".split(","), "👓,💄,🎩,🎓,👑,☕,🍵,🍶,👒,👟,👞,👡,👠,🍼,🍺,🍻,👢,👕,👔,👚,👗,🍸,🍹,🍷,🎽,👖,👘,👙,💼,🍴,🍕,🍔,👜,👝,👛,🎀,🌂,🍟,🍗,🍖,📛,💅,🍝,🍛,🍤,🍱,🍣,🍥,🍙,🍘,🍚,🍜,🍲,🍢,🍡,🍳,🍞,🍩,🍮,🍦,🍨,🍧,🎂,🍰,🍪,🍫,🍬,🍭,🍯,🍎,🍏,🍊,🍋,🍒,🍇,🍉,🍓,🍑,🍈,🍌,🍐,🍍,🍠,🍆,🍅,🌽".split(","), "⛽,✂,🔓,🔒,🔐,🔔,🔕,📢,💺,✒,🔏,🔑,🔧,📣,🔊,🔉,💎,✏,🔩,🔨,⚓,🔈,🔇,🎧,🎍,📏,💣,🔪,🔫,🎥,📷,📹,🎒,📐,💡,🔦,🔎,💻,📻,📡,🔮,🔬,🔍,🔭,🛁,📺,📼,📱,🛀,🚿,🚽,🚪,🚬,📲,📟,🎮,💊,💉,🎲,🃏,🎴,🔌,🔋,🀄,🎫,🏮,🎰".split(","), "📞,☎,📌,📍,📎,👤,👥,💬,📠,📦,📝,📑,🔖,💭,💤,👣,🎁,📧,📜,📋,📇,📰,📁,📂,📥,📤,📃,📄,📖,📚,📕,📗,📩,📨,📘,📙,📓,📔,📒,💿,📫,📪,📀,💽,💾,📬,📭,✉,📯,📮".split(","), "☀,☁,🐾,💐,🌸,🐶,🐺,🐱,❄,🔆,🌷,🍀,🌹,🐭,🐹,🐰,🔅,🌞,🌻,🌺,🍁,🐸,🐯,🐨,⛅,⚡,🍃,🍂,🌿,🐻,🐷,🐽,✨,⛄,🌾,🍄,🌵,🐮,🐗,🐵,☔,🌀,🌴,🌲,🌳,🐒,🐴,🐑,🌊,🌁,🌰,🌱,🌼,🐘,🐼,🐧,🌈,🌋,🗻,🌄,🌅,🐦,🐤,🐥,🌌,🌠,⭐,🌐,🌍,🐣,🐔,🐍,🌎,🌏,🌝,🌚,🌑,🐢,🐛,🐝,🌒,🌓,🌔,🌕,🌖,🐜,🐞,🐌,🌗,🌘,🌜,🌛,🌙,🐙,🐚,🐠,🔥,🌟,💫,💥,💢,🐟,🐬,🐳,💦,💨,💧,🐋,🐄,🐏,🐀,🐃,🐅,🐇,🐉,🐎,🐐,🐓,🐕,🐖,🐁,🐂,🐲,🐡,🐊,🐫,🐪,🐆,🐈,🐩".split(","), "🏠,🏡,🏫,🎪,🏢,🚢,⛵,🚤,🏣,🏥,🏦,🏪,🏩,🚣,🚀,✈,🏨,💒,⛪,🏬,🏤,🚁,🚂,🚊,🌃,🌇,🌆,🏯,🏰,🚉,🚞,🚆,🏭,🚄,🚅,🚈,🚇,🚝,🚋,🚃,🚎,🚌,🚍,🚙,🚘,🚗,🚕,🚖,🚛,🚚,🚨,🚓,🚔,🚒,🚑,🚐,🚲,🚡,🚟,🚠,🚜".split(","), "㊙,🔝,🔱,‼,⁉,🚫,⛔,🚦,㊗,🔚,❎,✅,❌,🚥,⚠,🚧,🔺,🔙,❗,❓,❕,🔞,📵,🚯,🔲,🔛,❔,⭕,✔,🚱,🚳,🚷,🔳,🔜,☑,♻,💯,🚸,💈,🚏,⚫,🔃,ℹ,⬆,⬇,🚩,🚻,🚹,⚪,⬅,➡,↗,↖,🚺,🚼,🚾,🔴,↘,↙,↔,↕,🚰,🚮,🅿,🔵,↩,↪,⤵,⤴,♿,🚭,🛂,🔻,📳,📴,🔄,◀,🛄,🛅,🛃,⬜,▶,🔼,🔽,⏪,🏧,🇯🇵,🇰🇷,⬛,⏩,⏫,⏬,🆗,🇩🇪,🇨🇳,🇺🇸,🔶,🔀,🔁,🔂,🆕,🇫🇷,🇪🇸,🇮🇹,🔷,🆙,🆒,🆓,🆖,🇷🇺,🇬🇧,📶,🔸,🎦,🔹,◼,◻,◾,◽,▪,▫,💠,🔯,💮,🔘,🔗,🈲,🈶,🈚,🈳,🈵,🉑,🆘,🆔,🆑,✳,❇,✴,🆚,🅰,🅱,🆎,🅾,♠,♥,♣,♦,©,®,™,Ⓜ,➿,➰,♈,♉,♊,♋,♌,♍,♎,♏,♐,♑,♒,♓,⛎,🔣,🔠,🔡,🔤,🈯,🈴,🉐,🈹,🈺,🈷,🈸,🔰".split(",") ], hr = "iPhone" == navigator.platform && 20;
cr("🎄,🎠,🏈,🎹", "🎄,🎤,🎶,🎣,🎯,⚽"), cr("😀,👍,💗,🎅", "😀,😭,😥,😡,😴,😷,👽,👻,💘,💔,💓,👌,✌,👍,👎,🙏"), 
cr("📅,💰,📈,⌛", "⏰,💰,💹"), cr("🍴,🎂,🎀,👒", "🍭,🍲,🍎,🍸"), cr("💣,📏,🔬,🔐", "🔓,🔒,⚓,🔧,🔍,🔔,🔕,💡,💎,💣"), 
cr("📞,📌,👥,💬", "👤,👥,💬,💭,📞,📩"), cr("🐧,🐣,🍄,🔆", "🐌,🌹,🔆,⛅,❄,☁,💧"), 
cr("🚊,🚔,🏠,💒", "🏡,🚀,🚄,⛵,🚲"), cr("⛔,🚭,🚦,✅", "✅,❎,❓,❗,⁉,㊙,🚩");
var Hr, zr, Gr, Qr, Ur, Kr, Sr = "娱乐,表情,数字,居家,杂物,沟通,自然,城市,抽象".split(","), Ir = function() {
localStorage.clear(), qi(jr(Or.join("\n"))), qi(jr(Br.join("\n"))), qi(jr(Er.join("\n"))), 
qi(jr(Rr.join("\n")));
}, Or = [ "创意罗盘{2#FF00FF}", "	创意无限{#7A95FF}", , "		文字大纲", "		图像记录", "		事件提醒", "		动画展现", "	分享自由{#7A95FF}", "		微信/QQ/短信...", "		PPT分享", "	功能模板{#7A95FF}", "		朋友圈投票", "		出行安排", "		时间表" ], Br = [ "Example1{1#FF3D3D,updateTime=1,icon=⏰}", "	场景闹钟{#7A95FF,icon=⌚}", "		结合位置优化提醒{#CCCC00,icon=🌍}", "			出差场景{}", "		完整作息优化提醒{,icon=💤}", "	倒计时{#FFCC33,icon=⏳}", "		生日{}", "		纪念日{}", "		传统节日{}", "	生活习惯{#52D6EB,icon=🍵}", "		正点吃饭{}", "		熬夜{}", "		用眼{}", "		注意颈椎{}", "		提醒喝水{}", "	亲情实景{#FF9900,icon=🚞}", "		街景实况{}", "		亲情授权{}", "	亲情协作{#0066CC,icon=👥}", "		孩子接送{#FFCC33,icon=👪}", "		路过买菜{#666600,icon=🍆}" ], Er = [ "欢迎使用{0#2B8567,icon=🎷,updateTime=1}", "	基本用法{#1FE3BF,icon=🎨}", "		单击展开{#22B59A,icon=🎯}", "		双击编辑{#4CD4BC,icon=📝}", "		长按移动{#1FE3BF,icon=👣}", "		剪切板{#90D7C5,icon=✂}", "	多端同步{#00B3FF,icon=📲}", "		Android{#99CC33}", "		iPhone{#FFCC33}", "		微信公众号{#00B8B8}", "	团队协作{#666666,icon=👥}", "		任务分发{#40BACA,icon=📌}", "		编辑同步{#1FE3BF,icon=📑}", "	时间管理{#7A95FF,icon=⌛}", "		利用碎片时间{#52D6EB}", "		事件提醒{#FFCC33}", "	创意分享{#8000FF,icon=💭}", "		连接投影 创意无限{#FF9900,icon=🎥}", "		QQ/微信/朋友圈{#00B8B8}", "		手机联系人{#52D6EB,icon=📞}", "		email{#7A95FF,icon=📩}", "	展望无限{#52D6EB}" ], Rr = [ "商业计划", "	运用场景", "		思维整理", "			无限时间", "				#连接碎片时间，捕捉稍纵即逝的灵感。", "			无限空间", "				#随时随地记录和完善自己的创意和计划。", "		创意分享", "			#微信朋友圈，亲人/朋友/同事，灵犀数点", "		讲稿展示", "			#讲稿编写太纠结，没关系，你可以在吃饭/排队的时候，圈点几下完成讲稿的准备", "		思考辅助", "			#积累一定用户数据之后， 可以从内容和结构两个纬度建模，在数据和算法的帮助下更好的给用户计划，创意提供指导和建议", "	开发计划", "		朋友圈试用(2月15日)", "			流畅编辑/便捷分享", "			微信/iPhone/Android", "		正式发布(3月/1日)", "			Native性能优化", "			云存储正式上线", "		PC+投影支持(4月)", "			PC播放与编辑适配", "			手持设备遥控支持", "		组建产品团队(6月)", "			推广/完善需求", "			寻找合伙人", "		组建数据和AI团队(待定...)", "			上线思维智能引导功能", "			思考相关商业模式", "		收费版(待定...)", "			群组/团队管理", "			私有云", "			协同编辑", "			...", "	推广计划", "		社交分享", "		  #与目前市面上相似产品很大一点不同是： 我们同事提供h5版本实现，非常方便通过微信/QQ甚至短信的形式分享, 而分享的目标又能方便转化成用户", "		营销/借力", "		  #微信应用号", "		  #事件营销。热点知识分享", "	盈利模式", "		精准广告", "		  #思维整理，相对于资讯浏览有更强的目的性。 可以从这些信息里面提炼主题，做精准广告。", "		思考决策倾向广告", "		  #思维过程中，AI给出的建议，可以通过各个向量的加权来加以微调，可作为一钟新的广告的形式。", "		高端版收费", "		  #高级功能收费 如团队协作。", "		  #模仿github的模式,针对团队私有的想法云收费。" ], Lr = Ht, Xr = bl("canvas", 12), ni = function(t) {
return Ti ? new Ii(t) : document.createElement("canvas");
}, li = 0, oi = 1, vi = 2, si = 3, fi = 0, hi = 1, ci = 2, ui = 3, di = 4, pi = 5, gi = 6, mi = 7, yi = 8, wi = 9, Fi = 10, xi = 11, Mi = 12, bi = 2 * Math.PI, Ti = window.nativeHost;
Ii.prototype.commit = function(t) {
var e = Ti.commit(this.nativeId, this.cmds.join(""), !!t);
return this.cmds = [], e;
}, "font,fillStyle,strokeStyle,lineCap,lineJoin,miterLimit,lineWidth,textAlign,textBaseline".replace(/\w+/g, function(t) {
Object.defineProperty(Ii.prototype, t, {
get: function() {
return this._style[t];
},
set: function(e) {
this._style[t] !== e && (this._styleJSON = 0, this._style[t] = e);
}
});
}), Object.defineProperty(Ii.prototype, "width", {
get: function() {
return this._width;
},
set: function(t) {
Ti.setWidth(this.nativeId, t), this._width = t;
}
}), Object.defineProperty(Ii.prototype, "height", {
get: function() {
return this._height;
},
set: function(t) {
Ti.setHeight(this.nativeId, t), this._height = t;
}
});
var Ai = "BLACK,#FF000000,DKGRAY,#FF444444,GRAY,#FF888888,LTGRAY,#FFCCCCCC,WHITE,#FFFFFFFF,RED,#FFFF0000,GREEN,#FF00FF00,BLUE,#FF0000FF,YELLOW,#FFFFFF00,CYAN,#FF00FFFF,MAGENTA,#FFFF00FF,TRANSPARENT,#00000000".split(",");
Ii.prototype.clip = function() {
Si(this, hi, Pi(this._path));
}, Ii.prototype.fill = function() {
Si(this, ui, Pi(this._path));
}, Ii.prototype.stroke = function() {
Si(this, di, Pi(this._path));
}, Ii.prototype.drawImage = function(t) {
var s = [];
switch (s.push.apply(s, arguments), s.length) {
case 3:
case 5:
case 9:
t.cmds.length && Si(this, fi, t), s[0] = t.nativeId, console.log("image id:" + s[0]), 
Si(this, ci, Pi(s));
break;
default:
console.error("error arguments" + s);
}
}, Ii.prototype.measureText = function(t) {
return {
width: Si(this, xi, t)
};
}, Ii.prototype.fillText = function(t, e, a, r) {
Si(this, pi, Pi([ e, a, 0 | r ]) + t);
}, Ii.prototype.strokeText = function(t, e, a, r) {
Si(this, gi, Pi([ e, a, 0 | r ]) + t);
}, Ii.prototype.clearRect = function(t, e, a, r) {
Si(this, mi, Pi([ t, e, a, r ]));
}, Ii.prototype.beginPath = function() {
this._path = [];
}, Ii.prototype.moveTo = function(t, e) {
Yi(this).push(li, t, e);
}, Ii.prototype.lineTo = function(t, e) {
Yi(this).push(oi, t, e);
}, Ii.prototype.closePath = function() {
Yi(this).push(vi);
}, Ii.prototype.arc = function(t, e, a, r, i, n) {
var l = Bi(r), o = Bi(i - r);
Yi(this).push(si, t, e, a, l, l + o, n ? 1 : 0);
}, Ii.prototype.save = function() {
Si(this, yi, "");
}, Ii.prototype.restore = function() {
Si(this, wi, "");
}, Ii.prototype.translate = function(t, e) {
Si(this, Fi, Pi([ t, e ]));
}, Ii.prototype.rotate = function() {}, Ii.prototype.setTransform = function() {}, 
Ii.prototype.scale = function() {}, Ii.prototype.transform = function() {}, Ii.prototype.resetTransform = function() {}, 
Ei.prototype = new String(), Ii.prototype.createLinearGradient = function(t, e, a, r) {
return new Ei("linear:" + [ 0 | t, 0 | e, 0 | a, 0 | r, "" ].join(","));
}, Ii.prototype.createRadialGradient = function(t, e, a, r, i, n) {
return new Ei("radial:" + [ 0 | t, 0 | e, 0 | a, 0 | r, 0 | i, 0 | n ].join(","));
}, Ii.prototype.getImageData = function() {}, Ii.prototype.putImageData = function() {}, 
Ii.prototype.rect = function(t, e, a, r) {
this.beginPath(), this.moveTo(t, e), this.lineTo(t + a, e), this.lineTo(t + a, e + r), 
this.lineTo(t, e + r), this.closePath();
}, Ii.prototype.strokeRect = function(t, e, a, r) {
this.rect(t, e, a, r), this.stroke();
}, Ii.prototype.fillRect = function(t, e, a, r) {
this.rect(t, e, a, r), this.fill();
}, Ii.prototype.getContext = function() {
return this;
}, Ii.prototype.addEventListener = function() {
console.log("native canvas not support event listener");
}, Ii.prototype.setLineDash = function() {}, Ii.prototype.arcTo = function() {}, 
Ii.prototype.bezierCurveTo = function() {}, Ii.prototype.createImageData = function() {}, 
Ii.prototype.createPattern = function() {}, Ii.prototype.drawFocusIfNeeded = function() {}, 
Ii.prototype.ellipse = function() {}, Ii.prototype.getLineDash = function() {}, 
Ii.prototype.isPointInPath = function() {}, Ii.prototype.isPointInStroke = function() {}, 
Ii.prototype.quadraticCurveTo = function() {};
var Wi, Ri = "CLUB.QQSK.COMPASS.", ji = localStorage.getItem(Ri);
ji && (Wi = JSON.parse(ji)), Wi instanceof Array || (Wi = [], console.warn("reset your data!!!"), 
Ir(Ri)), Hi.prototype = Object.create(il.prototype), Hi.prototype.getIndex = function() {
var t = this.options.length;
return (t + Math.round(this.offset)) % t;
}, Hi.prototype.onchange = function() {}, Hi.prototype.getValue = function() {
return this.options[this.getIndex()];
}, Hi.prototype.roll = function(t) {
var e = this.getIndex(), a = this.options.length, r = (e + t) % a;
return this.offset = r = 0 > r ? r + a : r, this.onchange(r, e), this.repaint(), 
Math.abs(r - e) > a - 2;
}, Hi.prototype.drawOption = function(t, e, a, r, i) {
var n = .2 - .1 * i;
t.font = (this.height * n | 0) + "px " + pe, t.globalAlpha = Math.pow(Math.min(1 - i + .1, 1), 3), 
t.fillText(this.options[e], a, r);
}, Qi.prototype = Object.create(il.prototype);
var Zi = "月".repeat(12).replace(/./g, fn).match(/\d+./g), Vi = "日".repeat(31).replace(/./g, fn).match(/\d+./g), tn = "点".repeat(24).replace(/./g, sn).match(/\d+./g), en = "分".repeat(60).replace(/./g, sn).match(/\d+./g);
an.prototype = Object.create(il.prototype);
var cn = function(t, e, a) {
var r = {
type: t
};
switch (t) {
case "touchstart":
return Vn(r, e, a);
case "touchmove":
return tl(r, e, a);
case "touchend":
case "touchcancel":
return el(r, e, a);
}
};
if (!window.requestAnimationFrame) {
for (var un = [ "webkit", "moz", "o", "ms" ], dn = un.length; dn--; ) if (requestAnimationFrame = window[un[dn] + "RequestAnimationFrame"], 
requestAnimationFrame) {
cancelAnimationFrame = window[un[dn] + "CancelAnimationFrame"];
break;
}
requestAnimationFrame || (requestAnimationFrame = function(t) {
return setTimeout(t, 1e3 / 60);
}, cancelAnimationFrame = function(t) {
return clearTimeout(t);
});
}
var kn, Dn, An, On, Bn, En, Rn, Wn, jn, qn, Jn, $n, Ln, Xn, Fn = 0, xn = +new Date(), Mn = [], bn = 0, Tn = 0, Sn = 0, Cn = 0, In = requestAnimationFrame, Pn = new Date(), In = function(t) {
var a = new Date();
return Pn = a, requestAnimationFrame(t, 30);
}, Yn = "touchstart,touchmove,touchend,touchcancel,mousedown,mousemove,mouseup,mouseout".split(","), Nn = 10, _n = -1, dn = Yn.length, zn = 2, Gn = 4, Qn = 8;
window.matchMedia && window.matchMedia("(pointer:coarse)").matches && Yn.splice(4), 
il.prototype.attach = function() {
function e(e) {
function l(t, e, a) {
for (var r = 0; r < e.length; ) {
var i = e[r++], n = e[r++], o = i.width, v = i.height;
t.save();
try {
t.translate(i.x, i.y), t.beginPath(), t.rect(0, 0, o, v), t.closePath(), t.clip(), 
i.draw && i.draw(t, o, v), i.dirty = 0, l(t, n, a + 1);
} finally {
t.restore();
}
}
}
var a = [], r = [];
nl(e, t, a, r), e.save();
try {
e.beginPath();
for (var i = 0, n = a.length; n > i; ) e.rect(a[i++], a[i++], a[i++], a[i++]);
e.closePath(), e.clip(), e.clearRect(0, 0, t.width, t.height), l(e, r, 0);
} finally {
e.restore();
}
}
function a(e, a, r, i, n, l) {
return ol(e, a, r, i, n, l, t);
}
var t = this;
mn(this.dispatchDraw = e, a);
}, il.prototype.resize = function(t, e) {
if (null != t && t != this.width) this.width = t; else {
if (null == e || e == this.height) return;
this.height = e;
}
var a = this.parentWidget, r = a.children.indexOf(this);
r >= 0 && (r <<= 1, a.rangeX[r + 1] = a.rangeX[r] + this.width, a.rangeY[r + 1] = a.rangeY[r] + this.height, 
this.repaint());
}, il.prototype.add = function(t, e, a) {
null == a && (a = this.rangeY.length ? Math.max.apply(Math, this.rangeY) : 0, null == e && (e = 0)), 
t.parentWidget = this, this.children.push(t), this.rangeX.push(e, t.width + e), 
this.rangeY.push(a, t.height + a), this.repaint(zn);
}, il.prototype.remove = function(t) {
var e = this.children.indexOf(t);
e >= 0 && (this.children.splice(e, 1), this.rangeX.splice(2 * e, 2), this.rangeY.splice(2 * e, 2)), 
this.repaint(Gn);
}, il.prototype.clear = function() {
this.children.length = this.rangeX.length = this.rangeY.length = 0, this.repaint(Qn);
}, il.prototype.repaint = function(t) {
this.dirty |= t || Qn;
for (var e = this; e.parentWidget; ) e = e.parentWidget, e.dirty |= zn;
e.dispatchDraw && wn(e.dispatchDraw);
};
var sl = "#eee", fl = "#888", hl = "#4cd4bc", cl = "#EEE";
return {
dispatchEvent: cn,
init: Nt
};
}();</script>
<script>
function init(){
	var width = document.body.clientWidth;
	var height = document.body.clientHeight;
	
	if(!width && window.nativeHost){
		width = nativeHost.getWidth(0);
		height = nativeHost.getHeight(0);
	}
	if(width && height){
		//minimum-scale=1.0, maximum-scale=1.0, user-scalable=no
		//document.getElementsByTagName('meta')[0].setAttribute('content','width=980,initial-scale='+scale+',user-scalable=no')
		//compass.init(960,Math.ceil(height*scale))
		compass.init(width,height)
		init = Function.prototype;
	}
}
//var start = +new Date,inc = 0;requestAnimationFrame(testFPS);function testFPS(){if(inc++==60){if(prompt('刷新率:',inc/(new Date - start) * 1000))return;start = +new Date;inc = 0}requestAnimationFrame(testFPS);
//var c = document.body.firstChild.getContext('2d');var t = +new Date;while(new Date - t<3)c.fillRect(0,Math.random()*900|0,100,100);}
window.onload = init;
</script>
</head>
<body></body>
</html>