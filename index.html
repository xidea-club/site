<!doctype html>
<html manifest='offline.manifest'>
<head>
<meta charset="utf-8">
<meta name="viewport" content='width=720,user-scalable=no'/>
<title>创意罗盘</title>
<style>
body,html,canvas{margin:0;padding:0;}
body,html{width: 100%;height:100%;}
canvas{/*transform-origin:0 0;transform:scale(0.5,0.5);/* */}
</style>
<script>
localStorage.$init_script && window.eval(localStorage.$init_script)
function init(){
	var width = document.body.clientWidth;
	var height = document.body.clientHeight;
	
	if(!width && window.nativeHost){
		width = nativeHost.getWidth(0);
		height = nativeHost.getHeight(0);
	}
	if(width && height){
		//minimum-scale=1.0, maximum-scale=1.0, user-scalable=no
		//document.getElementsByTagName('meta')[0].setAttribute('content','width=980,initial-scale='+scale+',user-scalable=no')
		//compass.init(960,Math.ceil(height*scale))
		compass.init(width,height)
		init = Function.prototype;
	}
}
//var start = +new Date,inc = 0;requestAnimationFrame(testFPS);function testFPS(){if(inc++==60){if(prompt('刷新率:',inc/(new Date - start) * 1000))return;start = +new Date;inc = 0}requestAnimationFrame(testFPS);
//var c = document.body.firstChild.getContext('2d');var t = +new Date;while(new Date - t<3)c.fillRect(0,Math.random()*900|0,100,100);}
window.onload = init;
var mm = navigator.userAgent.replace(/^.*?(\bMicroMessenger\/\d[\.\d]+)?.*/,'$1');
!mm && document.write('<script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"><\/script>')
</script>
<script>var compass = function() {
function l(l, v, s, h, c, u, d) {
switch (l) {
case -1:
e = [ c, u ], i && (i = i.cancel()), r = null, t = Ct(s, h), a = 0 == t ? 2 : t > 0 && (1 & t) + 1, 
-2 == t && (i = pt(), i && (i.index = -2, i.move(c, u, t)));
var p = new Date();
n = p;
break;
case -2:
if (null != i) {
var g = Ct(c, u, !0);
i.move(c, u, g), r = g;
} else (t > 0 || null == t) && xt(e, e = [ c, u ]);
break;
case -3:
i && f(v, c, u), a && d == a && o(d);
break;
case 0:
if (t > 0 && 1 & t) {
var m = t >> 1;
i = Ne(m), i.index = m;
}
break;
case 2:
case 1:
a != l && o(l, "base");
break;
case 3:        }
-1 == l ? et(-1, t) : -3 >= t && et(l, t, Ct(c, u, !0));
}
function o(e) {
if (t > 0) if (1 & t) {
var a = t >> 1;
1 == e ? mt(a) : nt(a);
} else v(t >> 1); else 0 == t ? e > 1 && nt(-1) : -1 == t && yt();
}
function v(e) {
var t = "", a = {
title: t,
children: []
};
ut(a, e);
}
function f() {
var n = i.index;
if (-2 == r) dt(n, i); else if (-3 == r) n >= 0 && gt(n), i = i.cancel(); else if (-2 == n && null == r) dt(n, i), 
i = i.cancel(); else {
if (0 == r) n >= 0 && ct(n, n + 1); else if (r > 0) {
var l = r >> 1;
1 & r ? n != l && vt(n, l) : ht(n, l);
} else -1 == r && vt(n, -1);
i = i.cancel();
}
}
function g(e, t) {
h = e, c = t, u = h * Gt * .8, d = Xt, p = e / 3;
}
function m(e, t, a, r, i, n) {
e.fillStyle = "#FFF", e.fillRect(0, 0, a, r);
var l = a / 2, o = r / 2, v = r / 3, f = w(t), s = 2 * v;
if (n) {
var h = .7 * v, c = .3 * v, u = 1.1 * v;
e.fillStyle = n[0], e.drawImage(f, l - h, o - h, 2 * h, 2 * h);
for (var d = 0; 6 > d; d++) {
var p = Math.PI * d / 3, g = l + u * Math.cos(p), m = o + u * Math.sin(p);
n.length > 1 && (e.fillStyle = n[d + 1]), e.beginPath(), e.arc(g, m, c, 0, 2 * Math.PI, !1), 
e.fill();
}
} else e.drawImage(f, l - v, o - v, s, s);
if (t.childColors = n, i) {
var x = .1 * r;
return a *= .2, r *= .2, y(e, i, x, a, r), [ 0, x, a, x + r ];
}
}
function y(e, t, a, r, i) {
var n = Ot, l = i / 2, o = r - l, v = r - 1.5 * l, f = .8 * i;
e.lineWidth = n / 2, e.strokeStyle = "#ddd", e.fillStyle = "#eee", e.beginPath(), 
e.moveTo(0, a), e.arc(o, a + l, l, -Math.PI / 2, Math.PI / 2, !1), e.lineTo(0, a + i), 
e.stroke(), e.fill(), _r(e, t, (v - f) / 2, a, f), e.strokeStyle = "#E66", e.lineWidth = n, 
e.beginPath(), f *= .6, a += (i - f) / 2, e.moveTo(v, a), e.lineTo(v + f, a + f), 
e.moveTo(v, a + f), e.lineTo(v + f, a), e.stroke();
}
function w(e) {
var t = e.scale || 1, a = s(e), r = a[0];
if (a.scale != t || e.dirty) {
a.scale = t, e.dirty = !1, console.log("redraw node canvas!" + [ e.scale, e.id, r.nativeId, e.data.title ]);
var i = h * t | 0, n = i << 1, l = Xt, o = r.getContext("2d");
r.width = n, r.height = n, o.save();
try {
o.clearRect(0, 0, n, n), b(o, e, i, l), S(o, e, i, l), M(o, e, i, l);
} finally {
o.restore();
}
}
return r;
}
function x(e, t, a, r, i) {
e.save();
try {
var n = h * a | 0, l = Xt, o = 2 * n, v = .6 * o | 0;
e.translate(r, i), e.font = v + "px " + At, e.textBaseline = "middle", b(e, t, n, l), 
e.fillStyle = "#666", e.lineWidth = l, e.moveTo(n, o - l), e.lineTo(5 * h, o - l), 
e.stroke(), e.fillText(t.data.title, o + n / 2, o / 2), M(e, t, n, l);
} finally {
e.restore();
}
}
function b(e, t, a, r) {
var i = t.data.fill || "#4cd4bc", n = 2 * a, l = e.createLinearGradient(0, 0, n, n);
l.addColorStop(0, "rgba(153,153,153,0.3)"), l.addColorStop(.4, "rgba(238,238,238,0.3)"), 
l.addColorStop(1, "rgba(153,153,153,0.3)"), e.fillStyle = i, e.strokeStyle = l, 
e.lineWidth = r, e.beginPath(), e.arc(a, a, a - r, 0, 2 * Math.PI), e.fill(), e.stroke();
}
function S(e, t, a) {
var i = t.scale || 1, n = t.data.icon, l = t.data.title, o = p * i * (l.length > 5 ? .9 : 1) | 0, v = o;
if (e.textAlign = "center", e.strokeStyle = e.fillStyle = F(e.fillStyle), i > 1) {
o /= i, v /= i;
var f = W(e, l, o, a, 2), s = f.length * v, h = 1.42 * a + v + s / 2;
e.textAlign = "left";
} else {
var f = W(e, l, o, 1.68 * a, 2), s = f.length * v, h = a + s / 2, c = .8 * v, u = c / 2, d = h + v / 2, g = i == Ht && t.children.length;
t.data.content && (T(e, a - .8 * u, g ? d : d + u, .8 * c, c), g && (d += c)), g && e.fillText("...", a, d + u);
}
for (var m = f.length; m--; ) e.fillText(f[m], a, h), h -= v;
n && _r(e, n, a - .7 * o, h - 1.4 * o, 1.4 * o);
}
function M(e, t, a, r) {
if (t.data.eventEnable) {
var i = a - r, n = a - 5 * r, l = new Date(t.data.eventStart), o = (+l - new Date()) / 864e5 / 6 * Math.PI;
l = (60 * l.getHours() + l.getMinutes()) / 6 / 60 * Math.PI, e.translate(a, a), 
e.strokeStyle = "#000", e.lineWidth = 1, e.beginPath(), e.arc(0, 0, a - 1, 0, 2 * Math.PI), 
e.stroke(), e.beginPath(), o > 0 && (e.lineWidth = 2 * r, e.strokeStyle = "#bb0", 
e.arc(0, 0, a - 2 * r, 1.5 * Math.PI, 1.5 * Math.PI + o), e.stroke()), e.lineWidth = r, 
e.strokeStyle = "#FFF", e.beginPath(), e.arc(0, 0, a - r, 0, 2 * Math.PI);
for (var v = 0; 3 > v; v++) e.moveTo(0, i), e.lineTo(0, n), e.moveTo(0, -i), e.lineTo(0, -n), 
e.moveTo(i, 0), e.lineTo(n, 0), e.moveTo(-i, 0), e.lineTo(-n, 0), v || (i = a - r, 
n = a - 4 * r, e.stroke(), e.beginPath(), e.lineWidth = .8 * r), e.rotate(Math.PI / 3);
e.stroke(), e.beginPath(), e.arc(0, 0, n, .5 * Math.PI, .5 * Math.PI + l), e.stroke(), 
e.rotate(l), e.beginPath(), e.fillStyle = "#ff6", r *= 2.4, e.moveTo(0, n - r), 
e.lineTo(-r, n), e.lineTo(0, n + r), e.lineTo(r, n), e.closePath(), e.fill();
}
}
function T(e, t, a, r, i) {
var n = i >> 4, l = i >> 3;
e.lineWidth = n, zo(e, t, a, r, i, l);
for (var o = 0; 8 > o; o++) e.moveTo(t + l, a + o * l), e.lineTo(t + r - l, a + o * l);
e.stroke();
}
function F() {
return "#FFF";
}
function I(e) {
var t = new Image(), a = w(e), r = s(I)[0], i = h / 2, n = r.width = r.height = i << 1, l = r.getContext("2d");
return l.clearRect(0, 0, n, n), l.drawImage(a, 0, 0, a.width, a.height, 0, 0, n, n), 
t.src = r.toDataURL("image/png"), t.width = t.height = n, t;
}
function C(e, t) {
var a = -1 == t, r = s(C), i = r[0];
if (r[1] != u || r[2] != e || r[3] ^ a) {
r[1] = u, r[2] = e, r[3] = a;
var n = i.getContext("2d"), l = d, o = u + l << 1, v = u + l, f = v, h = u / 1.5;
i.width = i.height = o, n.clearRect(0, 0, o, o), n.beginPath(), n.lineWidth = l, 
n.strokeStyle = a ? "#933" : e ? "#999" : "#ccc", n.arc(v, f, u, 0, 2 * Math.PI), 
n.stroke(), n.lineWidth = l, n.moveTo(v, f - h), n.lineJoin = "round", n.lineTo(v - .9 * h, f - u / 5), 
n.lineTo(v - .9 * h, f + u / 2), n.lineTo(v - .3 * h, f + u / 2), n.lineTo(v - .3 * h, f + h / 8), 
n.lineTo(v + .3 * h, f + h / 8), n.lineTo(v + .3 * h, f + u / 2), n.lineTo(v + .9 * h, f + u / 2), 
n.lineTo(v + .9 * h, f - u / 5), n.closePath(), n.stroke();
}
return i;
}
function P(e, t, a, r) {
var i = e >= 0, n = i && !t ? 2 : 1, l = s(P), o = l[0], v = -3 == a;
if (l[1] != e || l[2] != t || l[3] != v || l[4] != r) {
l[1] = e, l[2] = t, l[3] = v, l[4] = r;
var f = d, h = u + f << 1, c = u + f, p = u + f, g = p, m = o.getContext("2d");
for (o.width = r * n, o.height = h, m.lineWidth = f; n--; ) {
var y = e == n;
switch (m.strokeStyle = y ? "#933" : t ? "#999" : "#ccc", m.beginPath(), m.arc(p, g, u, 0, 2 * Math.PI), 
m.stroke(), n) {
case 1:
A(m, u, c);
break;
case 0:
if (t) m.fillStyle = v ? "#fff" : "#bbb", m.fill(), ov(m, h / 4, h / 5, h / 2, .6 * h, "#fff"); else if (i) D(m, u, c); else {
m.fillStyle = "#aaa";
for (var x = -1; 1 >= x; x++) m.beginPath(), m.arc(p + x * u / 2, g, u / 8, 0, 2 * Math.PI), 
m.fill();
}
}
m.translate(r, 0);
}
}
return o;
}
function D(e, t) {
e.save(), e.globalAlpha = .3, e.translate(0, t), e.fillStyle = "#369", e.fillRect(.6 * t, .4 * -t, t, t / 4), 
e.fillStyle = "#693", e.fillRect(.8 * t, 0, t, t / 4), e.fillStyle = "#936", e.fillRect(.6 * t, .4 * t, t, t / 4), 
e.restore();
}
function A(e, t, a) {
e.save(), e.translate(a, a), e.globalAlpha = .3, e.beginPath(), e.arc(0, 0, .5 * t, 0, Math.PI), 
e.strokeStyle = "#693", e.stroke(), e.strokeStyle = "#936", e.beginPath(), e.moveTo(0, .3 * t), 
e.lineTo(0, .5 * -t), e.moveTo(.3 * t, .2 * -t), e.lineTo(0, .5 * -t), e.lineTo(.3 * -t, .2 * -t), 
e.stroke(), e.restore();
}
function E(e, t, a) {
var r = -2 == a, i = s(E), n = i[0], l = u;
if (i[1] != u || i[2] != t || i[3] ^ r || i[4] != e) {
i[1] = u, i[2] = t, i[3] = r, i[4] = e;
var o = n.getContext("2d"), v = d, f = u + v << 1;
if (n.width = n.height = f, o.clearRect(0, 0, f, f), o.beginPath(), o.lineWidth = v, 
o.strokeStyle = r ? "#933" : t ? "#999" : "#ccc", console.log("redraw pasteBoard!", o.strokeStyle, a), 
o.arc(u + v, u + v, u, 0, 2 * Math.PI), o.stroke(), e) o.drawImage(e, 0, 0, e.width, e.height, v, v, f - v - v, f - v - v); else {
o.strokeStyle = "#ccc";
var h = .45 * u, f = .9 * u, p = 1.1 * u, l = .1 * u;
o.save();
try {
o.translate(h + l / 2, h), o.beginPath(), o.arc(l, l, l, Math.PI, 1.5 * Math.PI), 
o.arc(f - l, l, l, 1.5 * Math.PI, 0), o.arc(f - l, p - l, l, 0, .5 * Math.PI), o.arc(l, p - l, l, .5 * Math.PI, 1 * Math.PI), 
o.lineTo(0, l), o.stroke(), o.beginPath(), o.translate(2.5 * l, 2.5 * l), o.moveTo(f - l - l / 2, 0), 
o.arc(f - l, l, l, 1.5 * Math.PI, 0), o.arc(f - l, p - l, l, 0, .5 * Math.PI), o.arc(l, p - l, l, .5 * Math.PI, 1 * Math.PI), 
o.lineTo(0, p - l - l / 2), o.stroke();
} finally {
o.restore();
}
}
}
return n;
}
function Y() {
return B(0, .8 * h);
}
function B(e, t) {
t = t || c;
var a = s(R[e] || B), r = a[0];
if (a[1] != e || a[2] != t) {
console.log("redraw place holder!"), a[1] = e, a[2] = t, e && (t *= 1.2);
var i = 2 * t, n = .1 * t, l = t - n, o = r.getContext("2d");
r.width = i, r.height = i, o.strokeStyle = "#ccc", o.lineWidth = n, o.lineCap = "round", 
o.beginPath(), e ? (o.arc(t, t, l, 0, 2 * Math.PI), o.stroke(), o.fillStyle = 2 == e ? "#0EE" : "#FFF", 
o.fill()) : (o.arc(t, t, l, 0, 2 * Math.PI), o.stroke(), o.lineWidth = 3 * n, l -= 4 * n, 
o.fillStyle = "#ccc", o.strokeStyle = "#FFF", o.fill(), o.beginPath(), o.moveTo(t - l, t), 
o.lineTo(t + l, t), o.moveTo(t, t - l), o.lineTo(t, t + l), o.stroke());
}
return r;
}
function W(e, t, a, r, i) {
e.font = a + "px " + At;
var n = e.measureText(t).width, l = n / r;
if (l > 1.1) {
var o = [], v = t.match(/\w+|./g), f = v[0];
i > l && (r = Math.min(n / Math.ceil(l), r));
for (var s = 1; s < v.length; s++) {
var h = v[s], c = f + h, n = e.measureText(c).width;
if (n > r) {
if (!(o.length < i - 1)) {
f = f.slice(0, -v[s - 1].length) + "...";
break;
}
o.push(f), f = h;
} else f = c;
}
return o.length > 0 && 1 == f.length ? o[o.length - 1] += f : o.push(f), o;
}
return [ t ];
}
function X(e) {
var t = s(X), a = t[0], r = 2 * e;
if (t[1] != e) {
a.width = a.height = r + 1 << 1;
var i = a.getContext("2d");
i.strokeStyle = "rgba(255,189,189,.1)", i.lineWidth = 24;
for (var n = 0; 4 > n; n++) i.beginPath(), i.arc(r, r, e, 0, 2 * Math.PI, !0), i.stroke(), 
e *= 1.03;
}
return a;
}
function ne(e) {
ie = e, console.log("focus action", ie), se();
}
function le(e) {
if (console.log("focus:", e), 0 == e) {
var t = Q[U];
rn(t, $, J, L);
}
ie = -1, se();
}
function oe() {
return j = sn(0), j.mozOpaque = !0, N = sn(), N.mozOpaque = !0, _ = ve(N, !0), q = ve(j, !0), 
null == q.nativeId && (document.body.appendChild(N), document.body.appendChild(j)), 
j;
}
function ve(e) {
e.style.cssText = "position:absolute;left:0;top:0;";
var t = e.getContext("2d");
return t.imageSmoothingEnabled ? t.imageSmoothingEnabled = !1 : t.webkitImageSmoothingEnabled && (t.webkitImageSmoothingEnabled = !1), 
t;
}
function fe(e, t, a, r) {
N.width = j.width = $ = e, N.height = j.height = J = t, L = a, H = L * Gt * 2, g(a, r), 
se();
}
function se() {
re = null, Zl(ce);
}
function he() {
Zl(ce);
}
function ce() {
if (null != Q) {
var t = [], a = [], r = [], i = me(t, a, r), n = t.length < 3, l = n && ye();
l ? i = !0 : l = Q, De.apply(r, l), t == re ? (q.drawImage(N, 0, 0), n && (Ae.apply(q, l), 
we(q, a))) : (_.fillStyle = "#FFF", _.fillRect(0, 0, $, J), console.log("redraw pasteBoard background", n), 
_ != q && (console.info("clearRect:", $, J), q.clearRect(0, 0, $, J), re = t + ""), 
n ? (q.drawImage(N, 0, 0), we(q, a)) : (Ae.apply(_, l), we(_, a), q.drawImage(N, 0, 0))), 
Oe(Q[U]), we(q, r), q.globalAlpha = 1;
for (var o = G.length; o--; ) G[o]() && (i = !0);
return i;
}
}
function me(e, t, a) {
var r = be(), i = Q[U], n = i.parent;
ue += +new Date();
var l = i.children, o = V && V.hit || null, v = !!V, f = E(te, v, o), s = P(ie, v, o, H), h = l.length;
for (e.push(null == V ? -2 : [ -1, -2, -3, 0 ].indexOf(o), ie), t.push([ 1, f, $ - H, H - f.height ]), 
n ? Se(n, t) && (r = !0) : (f = C(V, o), t.push([ 1, f, H - f.width, H - f.height ])), 
t.push([ 1, s, $ - s.width, J - H ]), de += +new Date(), Se(i, t) && (r = !0), r || e.push(i.id, i.x); h--; ) {
var c = l[h];
Se(c, a) && (r = !0);
}
for (pe += +new Date(), h = z.length; h--; ) {
var c = z[h];
Se(c, a) ? r = !0 : 0 == c.alpha && z.splice(h, 1);
}
return r;
}
function ye() {
if (K) {
var e = new Date() - Z;
if (Bt > e) {
var t = e / Bt;
if (1 > t) {
var a = [], r = Q[3], i = U;
for (a[i] = Q[i], a[i + 1] = We(Q[i + 1], K[i + 1], t); i--; ) a[i] = We(Q[i], K[i], t);
return 0 == r && (a[3] = 0), K = a;
}
K = 0;
}
}
}
function we(e, t) {
for (var a = t.length; a--; ) {
var i = t[a], n = i.shift(), l = i.length;
if (e.globalAlpha = n, 9 == l) t[a] = i.slice(5, 9); else {
var o = i[0];
t[a] = [ i[1], i[2], o.width, o.height ];
}
for (;--l > 0; ) i[l] = 0 | i[l];
e.drawImage.apply(e, i);
}
}
function be() {
for (var e = ee.length; e--; ) ee[e]() && ee.splice(e, 1);
return ee.length;
}
function Se(e, t) {
var a = Ce(e), r = e.alpha || 1, i = (e.scale || 1) * L, n = a[0], l = a[1], o = a[2], v = w(e);
if (!(e.alpha < .1)) {
if (V && e.hit >= 0 && e.hit == V.hit) if (V.id != e.id) {
var f = X(i), s = f.width / 2;
t.push([ r, f, n - s, l - s ]), t.push([ r, v, n - i, l - i ]);
} else {
var s = L * Ht;
t.push([ r, v, 0, 0, i *= 2, i, n - s, l - s, s *= 2, s ]);
} else if (1 == o) t.push([ r, v, n - i, l - i ]); else {
var s = i * o;
t.push([ r, v, 0, 0, i *= 2, i, n - s, l - s, s *= 2, s ]);
}
return e.animStart;
}
}
function Me(e, t, a, r, i) {
if (.1 > i && console.log("hide ", e.data.title), e.animStart) var n = Math.min(1, (new Date() - e.animStart) / Bt), l = Xe(e.animAlpha, n), o = Xe(e.animScale, n), v = Xe(e.animX, n), f = Xe(e.animY, n); else v = e.x || 0, 
f = e.y || 0, l = null == e.alpha ? 1 : e.alpha, o = e.scale || 1;
var s = null == i ? l : i, h = r || o;
return t == v && a == f && l == s && o == h ? (e.x = t, e.y = a, e.alpha = s, void (e.scale = h)) : (e.animAlpha = [ l, s ], 
e.animScale = [ o, h ], e.animX = [ v, t ], e.animY = [ f, a ], e.animStart = new Date(), 
void he());
}
function Ce(e) {
if (e) {
if (e.animStart) {
var t = Math.min(1, (new Date() - e.animStart) / Bt), a = Xe(e.animScale, t), r = Xe(e.animX, t), i = Xe(e.animY, t);
e.x = r, e.y = i, e.alpha = Xe(e.animAlpha, t), 1 == t ? (e.animStart = null, e.animScale = null, 
e.animX = null, e.animY = null, e.animAlpha = null, e.scale = a, a = 1) : a /= e.scale || 1;
} else var r = e.x, i = e.y;
if (V && e.scale < 1 && V.id != e.id) {
var n = Q[2], l = Q[0], o = Q[1], v = V.x - r, f = V.y - i, s = Math.min(n - L, 2 * L), h = Math.sqrt(v * v + f * f), c = V.x - l, u = V.y - o, d = Math.sqrt(c * c + u * u);
if (d > L && s > h && Math.abs(d - n) < s) {
var p = l - r, g = o - i, m = g / n, y = p / n, w = v * g - f * p > 0 ? 1 : -1, x = l + c / d * n - r, b = o + u / d * n - i;
h = (1 - h / s) * Math.sqrt(x * x + b * b), r -= m * h * w, i += y * h * w;
}
}
return [ r, i, a || 1 ];
}
}
function Pe(e) {
function o() {
var e = q.globalAlpha;
q.globalAlpha /= 3, q.drawImage(n, t - l, a - l), q.globalAlpha = e;
}
var t = e.x, a = e.y, n = (new Date(), e.scale, I(e)), l = n.width / 2;
return Me(e, e.x, e.y, zt, .5), G.push(o), V = {
id: e.id
}, he(), {
move: function(e, r, i) {
null == V && (V = {}, G.push(o), te == n && (te = null)), t = e, a = r - l / 2, 
V.hit = i, V.x = e, V.y = r, he();
},
pack: function() {
je(G, o), te = n, V = null, se();
},
cancel: function() {
V = null, je(G, o), e.alpha = 1, e.dirty = !0, he();
}
};
}
function ke(e, t, a, r, i, n, l, o, v) {
Z = new Date(), K = Q, null == v && (v = 1), Q = arguments, he();
}
function De(e, t, a, r, i, n, l) {
if (r) {
var v = this, f = B(null == V ? 0 : 1), h = f.width / 2, c = V && V.hit, u = c && 1 & ~c && L;
for (e -= h, t -= h; n > l; ) {
var d = e + a * Math.cos(l), p = t - a * Math.sin(l, u);
v.push(u && Math.abs(d - V.x) < u && Math.abs(p - V.y) < u ? [ 1, B(2), d, p ] : [ 1, f, d, p ]), 
l += r;
}
}
}
function Ae(e, t, a, r, i, n, l, o, v) {
console.log("draw base line", [ e, t, a, v ]), this.strokeStyle = "#ddd", this.lineWidth = Ot, 
this.beginPath(), this.globalAlpha = v, this.arc(e, t, a, 0, 2 * Math.PI, !1), this.stroke(), 
Ee(this, o, o.parent), this.globalAlpha = 1;
}
function Oe(e) {
q.strokeStyle = "#ddd", q.lineWidth = Ot / 2, Ee(q, e, e.children[0], L);
}
function Ee(e, t, a, r) {
if (a) {
var i = t.x, n = t.y, l = a.x, o = a.y;
r && (r = 1 - r / (n == Q[1] ? Q[2] : iv([ i, n ], [ l, o ])), i = We(i, l, r), 
n = We(n, o, r)), e.beginPath(), e.moveTo(i, n), e.lineTo(l, o), e.stroke();
}
}
function Re(e) {
z = [ e ], Me(e, e.x, e.y, .1, 0);
}
function Ye(e, t) {
if (z = e = e.concat(), t) for (var a = t[0], r = t[1], i = e.length, n = .75; i--; ) {
var l = e[i];
Me(l, We(l.x, a, n), We(l.y, r, n), n, 0);
} else for (var i = e.length; i--; ) {
var l = e[i];
Me(l, l.x, l.y, .1, 0);
}
}
function Be(e, t) {
for (var r = t[0], i = t[1], n = .6, l = e.length; l--; ) {
var o = e[l], v = o.animX && o.animX[1] || o.x, f = o.animY && o.animY[1] || o.y, s = Ht;
o.animStart = 0, o.alpha = .1, o.x = We(v, r, n), o.y = We(f, i, n), o.scale = s, 
Me(o, v, f, s, 1);
}
}
function We(e, t, a) {
return e * a + t * (1 - a);
}
function Xe(e, t) {
return We(e[1], e[0], Math.sqrt(t));
}
function je(e, t) {
var a = e.indexOf(t);
a >= 0 && e.splice(a, 1);
}
function et(e, t, a) {
switch (e) {
case -1:
Ve = Ze, Ze ? null == t || t >= -3 ? (Ze = !1, ne(-1)) : -3 > t && ne(-3 - t) : -3 == t && (Ze = !0, 
ne(0));
break;
case -2:
Ze && ne(-3 >= a ? -3 - a : -1);
break;
case -3:
Ve && (console.log("action", Ve, a), le(-3 - a), ne(-1), Ze = !1);
}
}
function tt(e) {
return "function" == typeof callNativeMethod && "iosAppCall" == callNativeMethod.name ? callNativeMethod("window", "showStatusBar", [ e ]) : void 0;
}
function at(e, t) {
var a = oe(e, t);
Do(a), e && t && (rt(e, t), xr(a, e, t), Ri(e, t, ta), Ei());
}
function rt(e, t) {
qe = e, Le = t, Wt(e, t), console.log(e, t, ta, aa), fe(qe, Le, ta, aa), Je && Tt(Je);
}
function it(e) {
var t = e.parent;
t && Me(t, 0, -ta, Jt), Oo(Qe);
for (var a = e.children, r = a.length; r--; ) a[r].scale = Ht;
Tt(Je = e);
}
function nt(e, t) {
var a = -1 == e ? Je : Je.children[e];
lt(a, t);
}
function lt(e, t) {
function a(a) {
se(), Oo(Qe), t && t(a), a && ot(e);
}
br(e, a);
}
function ot(e) {
e = e || Je, nl(e.data), e.cache();
}
function vt(e, t) {
var a = Je.children, r = -1 == t ? Je.parent : a[t], i = e >= 0 && a[e];
if (i ? ft(Je, i) : (i = He.node, i.alpha = .5, He = null), i.parent = r, i.x = -100, 
-1 == t) if (r) st(r, i), ot(i), yt(); else {
var n = i.data.id;
i.data.root = n, i.data.parent = n, ot(i), Je = null, Ei(!0);
} else r ? (st(r, i), mt(e >= 0 && t > e ? t - 1 : t), ot(i)) : ot(i);
}
function ft(e, t) {
var a = e.children, r = a.indexOf(t);
t.data.parent = null, a.splice(r, 1);
}
function st(e, t, a) {
var r = e.children, i = r.length, n = t.data;
a = null == a ? i : Math.min(a || 0, i), r.splice(a, 0, t), n.parent = e.data.id, 
n.root = e.data.root;
var l = a > 0 && r[a - 1].data.order, o = i > a && r[a + 1].data.order;
n.order = a > 0 ? i > a ? (l + o) / 2 : l + 1 : i > a ? l - 1 : 1, console.log("new order:", n.order, r.map(function(e) {
return e.data.order;
}));
}
function ht(e, t) {
var a = Je.children, n = (Je.data.children, a.length, e >= 0 && a[e]);
if (e == t) {
var l = a[0];
ft(Je, l), st(Je, l), ot(l);
} else if (e + 1 == t) {
var l = a[a.length - 1];
ft(Je, l), st(Je, l, 0), ot(l);
} else n ? (ft(Je, n), t > e && t--, st(Je, n, t), ot(n)) : (n = He.node, n.alpha = .5, 
He = null, n.parent = Je, st(Je, n, t), ot(n));
Tt(Je);
}
function ct(e, t) {
var a = e >= 0 && Je.children[e], r = JSON.parse(JSON.stringify(a.data));
ut(r, t);
}
function ut(e, t, a) {
function n(e) {
if (e) {
if (Je) {
var a = Je.children;
(t >= a.length || null == t) && (t = a.length), st(Je, r, t);
} else Je = r;
ot(r), Tt(Je);
}
i && (Je = null, Ei());
}
var r = mi(e), i = !Je;
a = a || Ue || [ Je.x, Je.y ], r.x = a[0], r.y = a[1], r.scale = .3, r.parent = Je, 
e.title ? n(1) : lt(r, n);
}
function dt(e, t) {
e >= 0 && (t.node = gt(e)), ze.unshift(t), t.pack();
}
function pt() {
return ze[1] && ze[1].pack(), He = ze.shift();
}
function gt(e) {
var t = Je.children;
if (e >= 0 && e < Je.children.length) {
var a = t[e];
return ft(Je, a), ot(a), Re(a), Tt(Je), a;
}
return -2 == e ? (a = He.node, He = null, a) : void 0;
}
function mt(e) {
var t = Je, a = t.children[e], r = ta << 1, i = t.parent;
i && Me(i, -r, -r, Jt), wt(Je = a, t);
}
function yt() {
var e = Je, t = e.parent;
return t ? (t.parent && Me(t.parent, 0, -ta, Jt), void wt(Je = t, e)) : (Je = null, 
Ei());
}
function wt(e, t) {
function Y() {
var a = new Date(), r = Math.min(new Date() - A, k) / k;
P == r && (console.log("no rate changed!!!"), r = 1), P = r;
var n = S + T * P, o = M + F * P, v = x + I * P, f = y + C * P, c = f * Math.cos(v) / 2, u = -f * Math.sin(v) / 2, d = n + c, p = o + u;
if (Me(e, n - c, o - u, E), Me(t, d, p, R), i) for (var g = s.length, m = I * P; g--; ) {
var w = s[g], b = 1 == P ? 0 : Math.pow(1 - P, 2);
v = h[g] + m, Me(w, d + f * Math.cos(v), p - f * Math.sin(v), Ht, b);
}
if (Ql(new Date() - a), 1 == P) {
clearInterval(O);
var D = l.indexOf(t);
D >= 0 && (l = l.concat(), l.splice(D, 1)), Be(l, Ue, t == e.parent);
}
}
var a = [ e.x, e.y ], r = [ t.x || 0, t.y || 0 ], i = e.parent == t, n = t.children, l = e.children, v = (Ue[3], 
Ue[4]), f = Ue[5], s = [], h = [];
if (i) {
for (var c = n.length; c--; ) {
var u = n[c], d = kt(r, [ u.x || 0, u.y || 0 ]);
(null == v || d >= v && f >= d) && u != e && (s.push(u), h.push(d));
}
Ye(n);
} else Ye(n, Ue);
for (var c = (Tt(e), l.length); c--; ) {
var u = l[c];
u != t && (u.animStart = 0, u.alpha = 0);
}
e.hit = 0, i && (Me(t, 0, -ta, Jt), t.hit = -1);
var g = [ e.animX[1], e.animY[1] ], m = [ t.animX[1], t.animY[1] ], y = iv(a, r), w = iv(g, m), x = kt(a, r), b = kt(g, m);
Math.abs(x - b) > Math.PI && (x += x > b ? -_e : _e);
var S = (a[0] + r[0]) / 2, M = (a[1] + r[1]) / 2, T = (g[0] + m[0]) / 2 - S, F = (g[1] + m[1]) / 2 - M, I = b - x, C = w - y, P = 0, k = (Math.abs(I / _e) + .5) * Lt, D = Math.min(k / 8, Yt), A = new Date() - D, O = setInterval(Y, D), E = e.root ? $t : 1, R = t == e.parent ? Jt : Ht;
Y();
}
function xt(e, t) {
var a = new Date();
if (Ke) {
var r = +new Date(), i = Math.min(r - Ke[0], qt) / qt, n = Ke[3] + i * (Ke[2] - Ke[1]), l = n - Ke[3] + Ke[1];
Je.angle = n, Ke[0] = r, clearInterval(Ke[4]);
} else n = Je.angle || 0, Ke = [ new Date() ], l = kt(Ue, e);
var o = Ke[2] = kt(Ue, t), v = Yt;
Math.abs(l - o) > Math.PI && (l += l > o ? -_e : _e), v = Math.min(v, qt / (Math.abs(l - o) / .01)), 
Ke[0] -= v, Ke[1] = l, Ke[3] = n, Ke[4] = setInterval(bt, v), Ql(new Date() - a, "routeChild"), 
bt();
}
function bt() {
var e = new Date(), t = Math.min(+new Date() - Ke[0], qt) / qt, a = Ke[3] + t * (Ke[2] - Ke[1]);
return a == Je.angle && (t = 1, console.log("no angle changed!!!")), Je.angle = a, 
Tt(Je, Ue), Ql(new Date() - e, "routeAnimator"), 1 == t ? (Ke = clearInterval(Ke[4]), 
!0) : void 0;
}
function Tt(e, t) {
Ue = t || It(Je);
var a = Ue[0], r = Ue[1], i = Ue[2], n = e.angle || 0, l = e.children, o = l.length, v = Ue[3], f = 0, s = a, h = r;
if (v) {
s && (s -= ta, h -= ta), n += .25 * _e, f = Ft(o, n), n += f * v, n %= _e, f %= o, 
0 > f && (f += o);
var c = Ue[4], u = Ue[5], d = n - v / 2;
0 != f && (l = l.slice(f).concat(l.slice(0, f)));
} else v = _e / (o || 4), n %= _e, c = d = o ? n + v / 2 : n, u = c + _e;
e.hit = 0, Me(e, s, h, 1, 1);
var p = [ a, r, i, v, c, u, d, e ];
ke.apply(null, p);
for (var g = 0; o > g; g++) {
var m = a + i * Math.cos(n), y = r - i * Math.sin(n), w = l[g];
n > u && c && (v = (c + _e - u) / (o - g), c = 0), n += v, w.hit = 2 * f + 1, Me(l[g], m, y, Ht, 1), 
++f == o && (f = 0);
}
return p;
}
function Ft(e, t) {
var a = Ue[3], r = Ue[4], i = r - t;
return 0 | i / a;
}
function It(e) {
var t = e.children.length, a = Ht * ta;
if (5 > t || ea * Math.sin(Math.PI / t) - a > a / 3) return [ qe / 2, Le / 2, ea ];
var r = qe - a, i = Le - a;
Le > qe ? i -= a : r -= a;
var n = Math.min(r - a, i - a), l = 2 * Math.asin(1.5 * a / n), o = Math.PI / 2 - Math.asin((qe - r + a) / n), v = Math.PI + Math.asin((Le - i + a) / n), f = [ r, i ];
return f.push(n), f.push(l), f.push(o), f.push(v), f;
}
function Ct(e, t, a) {
var r = [ e, t ], i = Ue[2], n = i + ta, l = iv([ Je.x, Je.y ], r, n), o = Ue.length > 4, v = Gt * ta * 2;
if (ta >= l) return 0;
if (o && (l = iv(Ue, r, n)), n > l) {
var f = Math.abs(l - i);
if (ta > f) {
for (var s = Je.children, h = s.length, c = ta * Ht, u = a ? Math.max(ta >> 1, aa) : aa, d = 0; h > d; d++) {
var p = s[d], g = [ p.x, p.y ], m = iv(g, r, c);
if (c >= m) return 2 * d + 1;
}
if (u += 16, u > f && (u = Pt(i, h, u, r))) return u;
}
} else {
var y = Je.parent, w = y ? ta * Jt : v, x = y ? [ y.x, y.y ] : [ 0, 0 ];
if (iv(x, r, w) < n) return -1;
if (iv([ qe, 0 ], r, v) < n) return -2;
}
if (t > Le - v) {
var b = v, S = (qe - e) / b | 0;
return -3 - S;
}
}
function Pt(e, t, a, r) {
var i = kt(Ue, r), n = 2 * Math.asin(a / e), l = Je.angle || 0, o = Ue[3], v = t;
if (o) {
var f = Ue[5], s = Ft(t, l += _e / 4);
l += s * o - o / 2, s--, l %= _e, v = Math.floor((f - l) / o);
} else t ? (o = _e / t, l += o / 2) : (o = _e / 4, v = 4);
for (var h = 0; v > h; h++) {
var c = Math.abs(i - l) % _e;
if (n > c) return s && (h += s, h %= t, 0 > h && (h += t)), 2 * h + 2;
l += o;
}
}
function kt(e, t) {
var a = t[0] - e[0], r = t[1] - e[1], i = Math.acos(a / Math.sqrt(a * a + r * r)) || 0;
return r > 0 && (i = _e - i), i;
}
function ha(e, t, a, r, i) {
function u(e, t, a) {
e.fillStyle = "#ddd", e.fillRect(0, 0, t, a);
}
e.add(new Xo(r, i, u), 0, a), fa = t, sa = fa.data;
var n = a >> 3, l = a + n, o = 0 | .8 * a, v = l + o + n, f = i - v - n, s = .6 * o | 0, h = .3 * o | 0, c = [ "left:", n, "px;width:", r - n - n, "px;border:0;margin:0;padding:0;position:absolute;z-index:9;display:block;font-size:" ];
if (null == oa) {
var d = document.body;
oa = document.createElement("input"), va = document.createElement("textarea"), oa.placeholder = "输入显示标题", 
va.placeholder = "添加详细注备", oa.setAttribute("style", c.concat(s, "px;top:", l, "px;height:", o, "px").join("")), 
va.setAttribute("style", c.concat(h, "px;top:", v, "px;height:", f, "px").join("")), 
d.appendChild(oa), d.appendChild(va);
} else {
if ("block" == oa.style.display) return;
oa.style.display = "block", va.style.display = "block";
}
oa.value = sa.title || "", va.value = sa.content || "";
}
function ba(e, t, a, r, i) {
pa = t, da = .618 * a;
var n = r / 6, l = r - n - n, o = a + da / 2, v = o + 1.5 * da, f = i - v;
ga = new Xo(l, da, Ma, Ta), ma = new Xo(r, f), e.add(ga, n, o), e.add(ma, 0, v), 
xa = wa = ya = null, Sa(ca);
}
function Sa(e) {
switch (ca = e, ma.clear(), ga.repaint(), e) {
case 0:
return ya || (ya = Ca()), ma.add(ya);
case 1:
return wa || (wa = Fa()), ma.add(wa);
case 2:
return xa || (xa = Ia()), ma.add(xa);
}
}
function Ma(e, t, a) {
var r = ua.map(function(e, t) {
return 0 == t && pa.data.eventEnable && (e += "√"), e;
});
this.bound = Uo(e, 0, a, 0, t, ca, ev, r);
}
function Ta(e, t, a) {
if (-1 == e) for (var i = this.bound, n = i.length; n--; ) if (a > i[n]) {
ca != n && Sa(n);
break;
}
}
function Fa() {
var e = new ml(ma.width, ma.height, "投票功能开发中...", "#333");
return e;
}
function Ia() {
var e = new ml(ma.width, ma.height, "开发中...", "#333");
return e;
}
function Ca() {
function s(e) {
pa.data.eventEnable != e && ((pa.data.eventEnable = e) && (o.checked || v.checked || (v.checked = o.checked = !0, 
v.repaint(), o.repaint())), pa.dirty = !0, i.repaint(), ga.repaint(), f.repaint());
}
var e = ma.width, t = ma.height, a = new Xo(e, t), r = t - 6 * da, i = new Xo(e, .55 * r, ka), n = new Wl(e, .45 * r, Pa(), function(e, t, a, r, n) {
pa.data.eventStart = new Date(e, t, a, r, n).getTime(), s(!0), pa.dirty = !0, i.repaint();
}), l = .1 * e, o = new Dl(e / 2 - l, .8 * da, "使用声音"), v = new Dl(e / 2, .8 * da, "使用振动"), f = new Xo(e - l, da, Da, function(e) {
1 == e && s(!pa.data.eventEnable);
});
return v.event = o.event = function(e) {
1 == e && (this.repaint(), (this.checked = !this.checked) ? s(!0) : v.checked || o.checked || s(!1));
}, a.add(i), a.add(n), a.add(o, l, t - 5.4 * da), a.add(v, e / 2, t - 5.4 * da), 
a.add(f, (e - f.width) / 2, t - 1.6 * da), a;
}
function Pa() {
return new Date(pa.data.eventStart || +new Date() + 18e5);
}
function ka(e, t, a) {
m(e, pa, t / 3, a);
var r = pa.data.eventStart && Pa();
if (r) {
e.fillStyle = r >= new Date() ? "#666" : "#600";
var i = a / 6 | 0, n = sv(new Date(r)).replace(/^\s+|\s+$/g, "").split("\n");
} else {
n = pa.data.eventStart ? [ "", "事件未启用", "" ] : [ "", "请设置时间...", "(滑动时间选择器)", "" ];
var i = a / 8 | 0;
e.fillStyle = "#aaa";
}
e.textBaseline = "middle";
for (var l = .3 * a / n.length, o = (a - 2 * l) / n.length, v = l + o / 2, f = 0; f < n.length; f++) {
var s = Math.max(.4 * t, a), h = n[f], c = /[^\d\-]+/gm, u = c.exec(h), d = 0;
if (e.font = (u ? i : .8 * i | 0) + "px " + At, u) do {
var p = h.substring(d, d = u.index);
p && (e.fillText(p, s, v), s += e.measureText(p).width + (i >> 2));
var p = u[0];
d += p.length, e.font = (.65 * i | 0) + "px " + At, e.fillText(p, s, v), s += e.measureText(p).width + (i >> 2), 
e.font = i + "px " + At;
} while (u = c.exec(h));
e.fillText(h.substr(d), s, v), v += o;
}
}
function Da(e, t, a) {
pa.data.eventEnable ? Uo(e, 0, a, 0, t, 0, Zo, [ "停用提醒" ]) : Uo(e, 0, a, 0, t, 0, Zo, [ "启用提醒" ]);
}
function Ga(e, t, a, r, i) {
var n = .618 * a, l = i / 2.8, o = l + n, v = l + 1.2 * n, f = i - v, s = f - 3 * n;
Ra = n >> 1, Ea = r, Oa = t, La = new Xo(Ea, l - a, Qa, Ua), $a = new Xo(Ea, o - l, Ka, Za), 
Ja = new Xo(Ea, f, ar), Ja.supportScroll = !0, Ha = new Xo(Ea, f), Ha.add(new Xo(Ea, s, rr, ir)), 
Ha.add(new Xo(Ea, .9 * n, er, tr), 0, s + n / 2), Ha.add(new Xo(Ea, .9 * n, nr, or), 0, f - n), 
za = new Xo(Ea - Ra, f, vr, fr), e.add(La), e.add($a, 0, l), e.add(Ja, 0, v), _a ? Ja.add(za, Ra / 2) : Ja.add(Ha), 
Va(Oa);
}
function Qa(e, t, a) {
if (Xa > 0 && 0 == _a) var r = Na[Ya] || Na[0], i = Math.max(Ba, 0), n = 2 == Xa ? r.slice(i).concat(r.slice(0, i)) : [ Oa.data.fill || r[i] ];
this.iconRange = m(e, Oa, t, a, Oa.data.icon, n), Oa.childColor = n;
}
function Ua(e, t, a, r) {
var i = this.iconRange;
i && Oa.data.icon && a <= i[2] && r <= i[3] && a >= i[0] && r >= i[1] && (Oa.data.icon = "", 
Oa.dirty = !0, this.repaint());
}
function Ka(e, t, a) {
var r = Ra, i = t - r, n = Uo(e, 0, a, r, i, _a);
if (_a) {
n("颜色", .3);
var l = 1 == _a ? null : "#ddd", o = 2 == _a ? null : "#ddd";
qa ? (n("图标", .25, Vo, l), n(qa, .2, lr, o), this.bound = n("更多", .25, tv, "#ddd")) : (n("图标", .35, Vo, l), 
this.bound = n("更多", .35, tv, o));
} else n("颜色", .5, Vo), this.bound = n("图标", .5, tv);
}
function Za(e, t, a) {
if (1 == e) for (var i = this.bound, n = i.length; n--; ) if (a > i[n]) {
if (_a != n) {
if (!n != !_a) {
Ja.clear();
var l = n ? za : Ha;
Ja.add(l, (Ea - l.width) / 2);
} else za.resize(za.width, Ja.height);
Ja.offsetY = 0, Ja.drawOffsetY = 0, 3 == n && (n = 2, qa = ""), _a = n, this.repaint(), 
Ja.repaint();
}
break;
}
}
function Va(e) {
var t = e.data.fill || "", a = t.toUpperCase();
if (Wa >= 0 && (Ba = Na[Wa].indexOf(a), Ba >= 0)) return void (Ya = Wa);
Ya = 0, Ba = -1;
for (var r = Na.length; r; ) if (Ba = Na[--r].indexOf(a), Ba >= 0) {
Ya = Wa = r;
break;
}
}
function er(e, t, a) {
Uo(e, 0, a, Ra, t - Ra, Wa, null, ja);
}
function tr(e, t, a) {
-1 == e && (Wa = Math.min((a - Ra) / (Ea - Ra - Ra) * ja.length | 0, ja.length - 1), 
Ha.repaint());
}
function ar(e, t, a) {
e.fillStyle = "#FFF", e.fillRect(0, 0, t, a);
}
function rr(e, t, a) {
for (var r = Na[Wa], i = a / 4, n = (t - Ra - Ra) / 7, l = .309 * Math.min(i, n), o = Ya == Wa ? Ba : -1, v = 0, f = 0, s = i / 2; 4 > f; f++) {
for (var h = 0, c = Ra + n / 2; 7 > h; h++, v++) {
var u = e.fillStyle = r[v];
o == v && (e.strokeStyle = u, e.lineWidth = .1 * l, e.beginPath(), e.arc(c, s, 1.2 * l, 0, 2 * Math.PI, !1), 
e.stroke()), e.beginPath(), e.arc(c, s, l, 0, 2 * Math.PI, !1), e.fill(), c += n;
}
s += i;
}
}
function ir(e, t, a, r) {
if (1 == e) {
var i = this.height;
a = Math.min(6, 0 | (a - Ra) / (Ea - Ra - Ra) * 7), r = 0 | (4 * r - .1) / i;
var n = 7 * r + a, l = Na[Wa];
n >= 0 && (Wa != Ya || Ba != n) && (Ya = Wa, Ba = n, Oa.data.fill = l[n], Oa.dirty = !0, 
La.repaint(), Ha.repaint());
}
}
function nr(e, t, a) {
if (0 > Xa) Uo(e, 0, a, 0, t, -1, lr, [ "批量修改子节点颜色" ]); else {
var r = [ "重置", "设置同色", "自动变色" ];
Uo(e, 0, a, 0, t, Xa, lr, r);
}
}
function lr(e, t, a, r, i) {
e.fillRect(r, t, i - r, a - t);
}
function or(e, t, a) {
if (1 == e) if (0 > Xa) Xa = 0, this.repaint(); else {
var i = Math.min(0 | 3 * a / this.width, 2);
console.log(i, a, this.width, Xa), i != Xa && (Xa = i, console.log("new childColor:", Xa), 
La.repaint(), Ha.repaint());
}
}
function vr(e, t, a) {
e.fillStyle = "#FFF", e.fillRect(0, 0, t, a);
var r = this.parentWidget.height;
if (1 == _a) var i = Nr(t, a); else if (2 == _a) if (qa) var n = Ur.indexOf(qa), i = $r(n, t); else var i = Xr(t, a);
var l = i.height, o = this.parentWidget.offsetY;
if (this.resize(this.width, l), e.drawImage(i, 0, 0), l > r && o >= 0) {
var v = r >> 3, f = r - v + o, s = e.createLinearGradient(0, f, 0, f + v);
s.addColorStop(0, "rgba(255,255,255,.01)"), s.addColorStop(.1, "rgba(255,255,255,.2)"), 
s.addColorStop(.5, "rgba(255,255,255,.8)"), s.addColorStop(1, "rgba(255,255,255,1)"), 
e.fillStyle = s, e.fillRect(0, f, t, v);
}
}
function fr(e, t, a, r, i, n) {
if (1 == e && _a) {
var l = this.width, o = this.height;
if (2 != _a || qa) {
if (qa && 2 == _a) var v = Ur.indexOf(qa), f = Gr(v, i, n); else var f = Qr(i, n);
f && (Oa.data.icon = f, Oa.dirty = !0, La.repaint());
} else i = 0 | Math.min(3 * i / l, 2), n = 0 | Math.min(3 * n / o, 2), qa = Ur[3 * n + i], 
this.repaint(), $a.repaint();
}
}
function xr(e, t, a) {
ur = t, dr = a;
}
function br(e, t) {
sr = e, hr = Pr(e), pr = ur / 6 | 0, gr = t, Mr(e.data.title ? cr : 0), la();
}
function Sr() {
var e = JSON.stringify(hr), t = JSON.stringify(Pr(sr)), a = sr.childColors;
if (a) for (var r = sr.children, i = r.length; i--; ) r[i].data.fill = a[(i + 1) % a.length], 
r[i].dirty = 1;
delete sr.childColors, gr(e != t || a), gr = null;
}
function Mr(e) {
yr = Tr(e), e ? 1 == e ? Ga(yr, sr, pr, ur, dr) : ba(yr, sr, pr, ur, dr) : ha(yr, sr, pr, ur, dr);
}
function Tr(e) {
cr = e;
var t = new Xo(ur, dr, function(e) {
e.fillStyle = "#FFF", e.fillRect(0, pr, ur, dr - pr);
});
return t.add(new Xo(ur, pr, Fr, Cr)), t.attach(), t;
}
function Fr(e, t, a) {
e.clearRect(e, 0, 0, t, a), Uo(e, 0, a, 0, t, cr, Ir, mr), cr || window.scrollTo(0, 0);
}
function Ir(e, t, a, r, i) {
if (e.fillRect(r, t, i - r, a - t), 0 == r && i == ur) {
var n = a - t, l = i - r, o = r + 3.5 * l / 4, v = (t + a) / 2;
e.strokeStyle = "#888", e.beginPath(), e.lineWidth = 5, e.arc(o, v, .32 * n, 0, 2 * Math.PI, !1), 
e.stroke();
}
}
function Cr(e, t, a) {
if (-1 == e) {
var i = 0 | 4 * a / ur, n = mr.length - 1;
i && 0 == cr && na(), i >= n ? Sr() : i != cr && (Mr(i), i || la());
}
return !0;
}
function Pr(e) {
var t = e.data;
return {
title: t.title || "",
content: t.content || "",
fill: t.fill,
icon: t.icon,
eventEnable: t.eventEnable,
eventStart: t.eventStart
};
}
function Wr(e, t) {
Ar.push(e.split(","));
for (var a = Or.length >> 3, r = Or.push.apply(Or, t.split(",")) >> 3, i = r - a; i--; ) if (1 & a++) {
var n = 8 * a, l = n - 8;
Or = Or.slice(0, l).concat(Or.slice(l, n).reverse()).concat(Or.slice(n));
}
}
function Xr(e, t) {
var a = Dr(Xr), r = a[0];
if (a[1] != e || a[2] != t) {
a[1] = r.width = e, a[2] = r.height = t;
var i = r.getContext("2d");
i.save();
try {
var n = e / 3, l = 2 * n, o = t / 3, v = 2 * o, f = Math.min(n, o) / 3;
if (i.strokeStyle = "#ddd", i.lineWidth = 4, i.moveTo(0, o), i.lineTo(e, o), i.moveTo(0, v), 
i.lineTo(e, v), i.moveTo(n, 0), i.lineTo(n, t), i.moveTo(l, 0), i.lineTo(l, t), 
i.stroke(), i.textAlign = "left", i.fillStyle = "#3b88c3", Br) {
var s = f / Br;
i.scale(s, s), f = Br, o /= s, n /= s;
}
i.font = (0 | f) + "px " + At;
for (var h = 0; 9 > h; h++) {
var c = h % 3, u = (h - c) / 3;
jr(i, c * n, u * o, n, o, f, Ar[h]);
}
} finally {
i.restore();
}
}
return r;
}
function jr(e, t, a, r, i, n, l) {
var o = t + r / 2, v = a + i / 2;
e.fillText(l[0], o - n, v), e.fillText(l[1], o - n, v + n), e.fillText(l[2], o, v), 
e.fillText(l[3], o, v + n);
}
function Nr(e, t) {
var a = Dr(Nr), r = a[0];
if (a[1] != e || a[2] != t) {
a[1] = r.width = e, a[2] = r.height = t;
var i = r.getContext("2d"), n = e / 8, l = t / 8;
Lr(i, Or, n, l);
}
return r;
}
function _r(e, t, a, r, i) {
if (Br) {
e.save();
try {
var n = i / Br;
e.scale(n, n), e.textAlign = "center", e.fillStyle = "#3b88c3", a /= n, r /= n, 
i = Br, e.font = Br + "px " + At, zr(e, t, a, r, i);
} finally {
e.restore();
}
} else qr.apply(this, arguments);
}
function qr(e, t, a, r, i) {
e.font = (0 | i) + "px " + At, e.textAlign = "center", e.fillStyle = "#3b88c3", 
zr(e, t, a, r, i);
}
function Lr(e, t, a, r) {
Rr = a, Yr = r, e.save();
try {
var i = .8 * Math.min(a, r);
if (Br) {
var n = i / Br;
e.scale(n, n), a /= n, r /= n, i = Br;
}
e.font = (0 | i) + "px " + At, e.textAlign = "center", e.fillStyle = "#3b88c3";
for (var l = 0; l < t.length; l++) {
var o = l % 8, v = (l - o) / 8;
qr(e, t[l], o * a + (a - i) / 2, v * r + (r - i) / 2, i);
}
} finally {
e.restore();
}
}
function $r(e, t) {
var a = Dr($r), r = a[0], i = Er[e], n = t / 8 * Math.ceil(i.length / 8);
if (a[1] != e || a[2] != t) {
a[1] = e, a[2] = r.width = t, r.height = n;
var l = r.getContext("2d"), o = t / 8, v = o;
Lr(l, i, o, v);
}
return r;
}
function Jr(e, t, a, r, i, n) {
e.beginPath(), e.moveTo(t, a + n), e.lineTo(t, a + i - n), e.quadraticCurveTo(t, a + i, t + n, a + i), 
e.lineTo(t + r - n, a + i), e.quadraticCurveTo(t + r, a + i, t + r, a + i - n), 
e.lineTo(t + r, a + n), e.quadraticCurveTo(t + r, a, t + r - n, a), e.lineTo(t + n, a), 
e.quadraticCurveTo(t, a, t, a + n), e.fill();
}
function Hr(e, t, a, r, i) {
e.save();
try {
e.fillStyle = "#3b88c3", Jr(e, a - 1, r - 1, i + 2, i + 2, i / 6), e.fillStyle = "white", 
r += .9 * i, a += i / 2, e.fillText(t, a, r);
} finally {
e.restore();
}
}
function zr(e, t, a, r, i) {
var n = t.charAt(0);
if (n >= "#" && "9" >= n) return Hr(e, n, a, r, i);
if (n = "�" && 2 == t.length) {
var l = t.charCodeAt(1);
if (l >= 56806 && 56831 >= l) return Hr(e, String.fromCharCode(-56741 + l), a, r, i);
}
r += .88 * i, a += i / 2, e.fillText(t, a, r);
}
function Gr(e, t, a) {
var r = Math.min(t / Rr | 0, 7), i = a / Yr | 0;
return Er[e][8 * i + r];
}
function Qr(e, t) {
var a = Math.min(e / Rr | 0, 7), r = t / Yr | 0;
return Or[8 * r + a];
}
function fi(e) {
for (var r, t = e.split(/\r\n?|\n/), a = [], i = 0; i < t.length; i++) {
var n = t[i], l = n.search(/\S/);
if (l != n.length - 1) if ("#" == n.charAt(l)) {
var r = a[a.length - 1], o = n.substr(l + 1);
r.content ? r.content += "\n" + o : r.content = o;
} else {
var v = a[l - 1], r = {
children: []
};
v && v.children.push(r), a[l] = r, a.length = l + 1, si(n, r);
}
}
return a[0];
}
function si(e, t) {
var a = e.match(/\s*(.*?[^\\])(?:\{(\w*)(#\w+)?(?:,(.+))?\})?$/);
t.title = a[1], t.id = a[2], t.fill = a[3];
var r = a[4];
if (r) {
r = r.split(",");
for (var i = r.length; i--; ) e = r[i].split("="), t[e[0]] = e[1];
}
}
function mi(e) {
return new yi(e);
}
function yi(e) {
var t = e.id, a = pi[t];
return a ? a : (t && (pi[t] = this), this.id = gi++, void (this.data = e));
}
function wi(e, t) {
return e.order - t.order;
}
function Di(e) {
ki(!1), it(e);
}
function Ai() {
ki(!1), ut({}), Ci = null;
}
function Oi() {
if (!Ci) {
Ci = [];
for (var e = el(), t = e.length; t--; ) {
var a = e[t], r = Ci[t] = mi(a);
r.nodeCount = a.nodeCount, r.loaded = !1;
}
}
}
function Ei(e) {
e && (Ci = null), Oi(), Fi = null, ki(!0);
var t = new Xo(xi, bi);
Ii = new Xo(xi, bi - Si, function(e, t, a) {
e.fillStyle = "#fff", e.fillRect(0, 0, t, a);
}), Ii.add(Yi(!0), -xi, 0), Ii.add(Yi(), 0, 0), t.add(new Xo(xi, Si, ji, Xi)), t.add(Ii), 
Ii.event = Ni;
var a = new Xo(xi, bi, function(e, t, a) {
1 != r && (e.fillStyle = "#fff", e.globalAlpha = 1 - r, e.fillRect(0, 0, t, a));
});
t.add(a, 0, 0), t.attach();
var r = .1, i = setInterval(function() {
r = Math.min(r + .1, 1), t.repaint(), 1 == r && (clearInterval(i), t.remove(a));
}, 24);
}
function Ri(e, t, a) {
xi = e, bi = t, Mi = a, Ti = Mi * Qt, Si = Mi * Ut;
}
function Yi(e) {
var t = new Xo(xi, bi - Si, function(t, r, i) {
if (!a.length) {
var n = r / 12, l = r / 2, o = i / 3;
t.font = n + "px " + At, t.fillStyle = "#ddd", t.textAlign = "center", t.baseLine = 0, 
t.textBaseline = "middle", e ? t.fillText("未发现有效事件提醒", l, o) : t.fillText("点击(+) 添加创意", l, o), 
t.fillText("...", l, o + n);
}
}, null, !0), a = Ci;
if (e) {
a = [];
for (var r = tl(), i = r.length; i--; ) {
var n = r[i];
a[i] = mi(n);
}
a.sort(function(e, t) {
return e.data.eventStart - t.data.eventStart;
});
}
for (var i = 0; i < a.length; i++) {
var l = a[i], o = null;
if (e) for (var v = Ci.length - 1; v >= 0; v--) if (Ci[v].data.id == l.data.root) {
o = Ci[v];
break;
}
Wi(t, a, l, Si, e, o);
}
return t;
}
function Bi(e) {
il(e.data);
var t = Ci.indexOf(e);
t >= 0 && Ci.splice(t, 1);
}
function Wi(e, t, a, r, i, n) {
function v(e, t, r) {
var o = Pi(i ? v : h), f = o[0], s = this.slideX || 0, c = f.getContext("2d");
if ((o[1] != a.data.updateTime || o[2] != r) && (o[1] = a.data.updateTime, o[2] = r, 
f.width = t, f.height = r, i ? Ji(c, a, t, r, n) : $i(c, a, t, r)), s) {
e.fillStyle = "#eee";
var u = 0, p = (Math.PI / 2, .5 * l), g = 1.4 * p;
0 > s ? (u = t - l, e.fillRect(t + s, 0, -s, r)) : e.fillRect(0, 0, s, r), ov(e, u + .25 * l, (r - g) / 2, p, g, "#ddd");
}
e.drawImage(f, s, 0);
}
function s(r) {
t.splice(t.indexOf(a), 1);
var i = e.children, n = e.rangeY, l = i.indexOf(o), v = 2 * l, f = 10, s = o.height / f, h = setInterval(function() {
for (var t = n.length - 1; t >= v; t--) n[t] -= s;
--f || (clearInterval(h), r && r()), e.repaint();
}, 25);
l >= 0 && (i.splice(l, 1), e.rangeX.splice(v, 2), n.splice(v, 2)), e.repaint();
}
function h(e, t, r, n, o, v) {
var h = this.slideX || 0;
if (e >= 1) h ? o > xi + h ? s(function() {
Bi(a), a.data.eventCount && Ei();
}) : h > 0 && h > o ? (s(), delete a.data.eventStart, delete a.data.eventEnable, 
a.dirty = !0, nl(a.data)) : (Di(a), 2 == e && nt(-1)) : (Di(a), 2 == e && nt(-1)); else if (-1 == e) Fi && Fi != this && Li(); else if (-2 == e) {
null == f && (f = o);
var c = Math.abs((o - r) / (v - n));
if (c > .5) {
var u = h + o - f;
return u = i ? Math.max(Math.min(u, l), 0) : Math.min(Math.max(u, -l), 0), h != u && (this.slideX = u, 
this.repaint(), Fi = u ? this : null, f = o), !0;
}
f = o;
} else -3 == e && (f = null, 0 != h && h != l && h != -l && Fi && Li());
}
var l = .8 * r, o = new Xo(xi, r, v, h);
e.add(o), o.supportScroll = 1;
var f;
}
function Xi(e, t, a) {
var i = Y().height / 2, n = Ii.slideX || 0, l = n / xi, o = .2 * i;
o = o + (xi - 2 * (o + i)) * l + i, 1 == e && Math.abs(o - a) <= i && Ai();
}
function ji(e, t, a) {
var r = Y(), i = 40, n = r.height / 2, l = Ii.slideX || 0, o = l / xi, v = i + (a - i) / 2 - n, f = .2 * n;
f += (t - 2 * (f + n)) * o, e.strokeStyle = "#999", e.fillStyle = "#fff", e.fillRect(0, 0, t, a), 
e.strokeRect(0, 40, t, a - 40), e.translate(f + n, v + n), e.rotate(Math.PI * o), 
e.drawImage(r, -n, -n);
}
function Ni(e, t, a, r, i, n) {
if (-1 == e) this.latestX = i; else if (-2 == e) {
var l = Math.abs((i - a) / (n - r));
if (l > .5) {
var o = this.slideX || 0, v = Math.max(Math.min(o + i - this.latestX, xi), 0);
if (Fi) ; else if (o != v) return this.slideX = v, qi(this), this.latestX = i, !0;
}
this.latestX = i;
} else if (-3 == e) {
var o = this.slideX;
0 != o && o != -xi && _i(this, o > xi / 2 ? xi : 0);
}
}
function _i(e, t) {
var a = e.slideX, r = (t - a + t - xi / 2) / 10;
if (r) var i = setInterval(function() {
a += r, (0 > a || t > 0 && a > t) && (a = t, clearInterval(i)), e.slideX = a, qi(e);
}, 24);
}
function qi(e) {
var t = e.slideX, a = e.rangeX;
a[0] = t - xi, a[1] = a[2] = t, a[3] = xi + t, e.parentWidget.repaint();
}
function Li() {
var e = Si / 10, t = Fi, a = t.slideX, r = setInterval(function() {
a = Math.min(a + e, 0), a || clearInterval(r), t.slideX = a, t.repaint();
}, 10);
Fi = null;
}
function $i(e, t, a, r) {
t.scale = Ti / Mi;
var i = a / 3, n = w(t), l = t.data, o = r / 8 | 0, v = r / 4, f = 2 * i, s = i, h = v;
e.lineWidth = 4, e.fillStyle = "#fff", e.strokeStyle = "#f2f2f2", e.fillRect(0, 0, a, r), 
e.strokeRect(0, 0, a, r), e.drawImage(n, (i - n.width) / 2, .65 * (r - 2 * Ti)), 
e.font = "bold " + (.8 * o | 0) + "px " + At, e.fillStyle = "#333", e.textAlign = "left", 
e.baseLine = 0, e.textBaseline = "middle", e.fillText(Kt, s, h), e.fillText(Zt, f, h);
var c = n.width / 8;
h += v, e.fillStyle = "#666", e.font = o + "px " + At, e.fillText(vv(l.createTime), s + c, h, i - v), 
e.fillText(vv(l.updateTime), f + c, h, i - v), h += v;
var u = v / 3;
e.font = (.8 * o | 0) + "px " + At, e.beginPath(), e.fillStyle = "#669966", e.arc(s + u, h, u, 0, 2 * Math.PI, !0), 
e.fill(), e.fillStyle = "#999", e.fillText(t.nodeCount + "个节点", s + 2.5 * u, h);
var d = t.data.eventCount;
d && (e.beginPath(), e.fillStyle = "#9fd", e.arc(f - u, h, u, 0, 2 * Math.PI, !0), 
e.fill(), e.fillStyle = "#999", e.fillText(d + "个提醒", f + u, h));
}
function Ji(e, t, a, r, i) {
var n = t.data.eventStart, l = t == i ? Ti : .8 * Ti, o = .6 * Ti;
t.scale = l / Mi;
var v = t != i && (i.scale = o / Mi) && w(i), f = w(t), h = (t.data, r / 8 | 0), c = r / 5, u = n - new Date();
e.lineWidth = 4, e.fillStyle = 0 > u ? "#eee" : "#fff", e.strokeStyle = "#f2f2f2", 
e.fillRect(0, 0, a, r), e.strokeRect(0, 0, a, r);
var d = a - r, p = r - l, g = a - .6 * o, m = o, b = Math.sqrt(Math.pow(g - d, 2) + Math.pow(m - p, 2));
e.lineWidth = 4, v && v != f ? (e.strokeStyle = "#ddd", e.setLineDash([ 8, 8 ]), 
e.beginPath(), e.moveTo(d, p), e.lineTo(d + (g - d) * (b - o) / b, p + (m - p) * (b - o) / b), 
e.stroke(), e.globalAlpha = .4, e.drawImage(v, g - o, m - o), e.globalAlpha = 1) : (d += o / 2, 
p = r / 2), e.drawImage(f, d - o, p - l), e.font = "bold " + (0 | h) + "px " + At, 
e.textAlign = "left", e.baseLine = 0, e.textBaseline = "top";
var S = new Date(n), M = sv(S).replace(/^\s+|\s+$/g, "").split("\n"), T = h, F = c / 2, I = u / 36e5;
if (1 >= I) {
e.fillStyle = u > 18e5 ? "#fe9" : "#f9e", e.strokeStyle = "#f2f2f2";
var d = T, p = F + .8 * c;
Zo(e, p, p + c, d, a / 2);
}
for (e.fillStyle = 24 > I && S.getDay() == new Date().getDay() ? "#333" : "#aaa", 
e.fillText("提醒时间:", T, F), T *= 2, e.font = "" + h + "px " + At; M.length; ) F += c, 
e.fillText(M.shift(), T, F);
}
function an(e, t, a, r) {
Hi = t, zi = a, Gi = r, Qi = zi / 16, Vi = Qi / 2 / Gi, Ui = vn(e), a = Ui.length * Qi;
var i = Qi / 2, n = en(ln)[0], l = n.getContext("2d"), o = Ui.length;
n.width = Hi, n.height = Math.max(a, zi), l.fillStyle = "#fff", l.fillRect(0, 0, t, n.height);
for (var v = 0; o > v; v++) {
var e = Ui[v], f = Qi * e.depth, s = Qi * v;
if (v) {
var h = e.parent.children, c = h.indexOf(e), u = Ui.indexOf(c ? h[c - 1] : e.parent);
l.beginPath(), l.moveTo(f, s + i), l.lineTo(f - i, s + i), l.lineTo(f - i, Qi * u + (c ? i : Qi)), 
l.stroke();
}
x(l, e, Vi, f, s);
}
}
function rn(e, t, a, r) {
an(e, t, a, r);
for (var i = e.children.concat(e), n = i.length, l = Ui.indexOf(e) - .5; n--; ) e = i[n], 
Me(e, Qi * e.depth + Qi / 2, (Ui.indexOf(e) - l) * Qi, Vi, 1);
setTimeout(nn, Bt);
}
function nn() {
var e = new Xo(Hi, zi, function(e, t, a) {
e.fillStyle = "#999", e.fillRect(0, 0, t, a);
}, 0, !0), t = en(ln)[0], a = new Xo(Hi, t.height, ln, on);
e.supportScroll = 1, e.add(a), e.attach();
}
function ln(e) {
var t = en(ln)[0];
e.drawImage(t, 0, 0);
}
function on(e, t, a, r) {
if (e >= 1) {
var i = r / Qi | 0;
i < Ui.length && it(Ui[i]);
}
}
function vn(e) {
for (var t = []; e.parent; ) e = e.parent;
return fn(t, e, 0), t;
}
function fn(e, t, a) {
t.depth = a++, e.push(t);
for (var r = t.children, i = r.length, n = 0; i > n; n++) fn(e, r[n], a);
}
function Dn(e, t, a) {
var r = e.cmds;
switch (t) {
case mn:
case yn:
case wn:
case xn:
case bn:
var i = 255 * e.globalAlpha + .5;
case In:
if (!e._configJSON) {
var n = Yn(e);
Dn(e, Cn, n);
}
break;
case pn:
if (!a.cmds.length) return;
var i = a.nativeId || 0;
a = a.cmds.splice(0).join("");
}
var l = [ t, a.length ];
return null != i && (l[1]++, l.push(i)), l = l.map(Rn), l.push(a), r.push(l.join("")), 
In == t ? e.commit(!1) : void 0;
}
function On(e) {
this.style = {}, this.stack = [], this.saveCount = 0, this._style = {
font: "10px sans-serif",
fillStyle: "#000",
strokeStyle: "#000",
lineCap: "butt",
lineJoin: "miter",
lineWidth: 1,
miterLimit: 10,
textAlign: "left",
textBaseline: "alphabetic"
}, this._styleJSON, this.nativeId = kn.createCanvas(e >= 0 ? e : -1), this.canvas = this, 
this.globalAlpha = 1, this.cmds = [];
}
function En(e) {
return e && String.fromCharCode.apply(String, e);
}
function Rn(e) {
return String.fromCharCode(e);
}
function Yn(e) {
if (e._styleJSON) return e._styleJSON;
var t = e._style, a = [ '{"' ];
for (var r in t) a.push(r, '":'), (r = t[r]) instanceof Object ? a.push('"', String(r), '","') : "string" == typeof r ? a.push('"', Wn(r).replace(/["\\]/g, "\\$&"), '","') : a.push(r, ',"');
return a.push(a.pop().replace(',"', "}")), e._styleJSON = a.join("");
}
function Wn(e) {
var t = e.match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*([\.\d]+))?|^#[0-9a-f]+/i);
if (t) {
var a = t[1];
if (a) {
for (e = (255 * (t[4] || 1) << 24 | a << 16 | t[2] << 8 | t[3]).toString(16); e.length < 8; ) e = "0" + e;
e = "#" + e;
} else e = e.replace(/#(?:(.)(.)(.)$)?/, "#FF$1$1$2$2$3$3").toUpperCase();
} else {
var r = Bn.indexOf(e.toUpperCase());
r >= 0 && (e = Bn[r + 1]);
}
return e;
}
function Xn(e) {
return e._path || (e._path = []);
}
function jn(e) {
return e && (e = e % Pn || Pn, 0 > e && (e += Pn)), e / Pn * 4095;
}
function Nn(e) {
var t = [];
this.addColorStop = function(e, a) {
t.push(e + Wn(a));
}, this.toString = function() {
return e + t.sort().join(",");
};
}
function Vn() {
if ("function" == typeof callNativeMethod) {
var e = {};
return "clear(),length(),key(s),getItem(s),setItem(ss),removeItem(s)".replace(/(\w+)\(\w*\)?/g, function(t, a) {
var r = t.length - a.length - 2;
e[a] = function() {
var e = Array.prototype.map.call(arguments, String);
return e.length = r, callNativeMethod("localStorage", a, e);
};
}), e;
}
}
function el() {
for (var e = [], t = Zn.length; t--; ) e[t] = cl(Zn[t]);
return e;
}
function tl() {
for (var e = Zn.length, t = []; e--; ) {
var a = Zn[e], r = cl(a), i = r.eventCount;
console.log(i), i > 0 && r.eventEnable && (t.push(r), i--);
for (var n = i > 0 && hl(a), l = n.length; i > 0 && l-- > 0; ) r = cl(n[l]), r && r.eventEnable && t.push(r);
}
return t.sort(dl);
}
function al(e) {
return cl(e);
}
function rl(e) {
for (var t = (Un[e.id] || e).root, a = hl(t), r = [], i = a && a.length; i--; ) {
var n = cl(a[i]);
n && n.parent == e.id && r.push(n);
}
return r;
}
function il(e) {
var t = e.root;
if (t == e.id) {
var a = hl(0), r = a.indexOf(t);
for (a.splice(r, 1), sl(0, a), a = hl(t), r = a.length; r--; ) {
var i = a[r];
console.log("remove node ", $n + i), _n.removeItem($n + i), delete Un[i], delete Qn[i];
}
_n.removeItem(Ln + t), delete Kn[t];
} else {
var n = fl(e), l = cl(t), a = hl(t), r = n.length;
for (l.nodeCount -= r; r--; ) {
var o = n[r], i = o.id, v = a.indexOf(i);
v >= 0 ? (o.eventEnable && l.eventCount--, a.splice(v, 1)) : console.error("invalid status:unattached node:" + o.title + "#" + i), 
_n.removeItem($n + i), delete Un[i], delete Qn[i];
}
sl(t, a), nl(l);
}
}
function nl(e, t) {
var a = e.id, r = Un[a], i = e.root, n = !r, l = !i;
if (n) o = ol(e), a = e.id, r = Un[a]; else var o = t ? fl(e, r.root) : [ e ];
delete e.children;
for (var v = l || r.root != i, f = 0, s = 0, h = 0, c = o.length; c--; ) {
var u = o[c], d = Un[u.id], p = u.eventEnable;
p && f++, d.id || h++, p ^ (d && d.eventEnable) && (s += p ? 1 : -1);
}
if (l) {
var g = e;
e.parent = a, g.nodeCount = 0, g.eventCount = 0;
} else g = Qn[e.root];
if (v) {
g.eventCount += f, g.nodeCount += o.length;
var m = Qn[r.root], y = o.map(function(e) {
return e.id;
});
ll(g.root, y), m && (m.eventCount -= f, m.nodeCount -= o.length, ll(m.id, null, y), 
o.indexOf(m) < 0 && o.push(m));
} else g.eventCount += s, g.nodeCount += h;
for (o.indexOf(g) < 0 && o.push(g), c = o.length; c--; ) e = o[c], r = vl(e), r && _n.setItem($n + r.id, JSON.stringify(r));
}
function ll(e, t, a) {
var r = hl(e);
if (!r) {
r = [];
var i = !0;
}
if (t) for (var n = t.length; n--; ) {
var l = t[n];
l != e && r.indexOf(l) < 0 && r.push(l);
} else {
if (!a) return;
for (var n = a.length; n--; ) {
var l = a[n];
r.indexOf(l) >= 0 && r.splice(n, 1);
}
}
sl(e, r), i && (r = hl(0), r.indexOf(e) < 0 && (r.push(e), sl(0, r)));
}
function ol(e) {
for (var t = [ e ], a = t.concat(), r = e.root; a.length; ) {
var e = a.pop(), i = e.children, n = i && i.length, l = e.id;
for (Un[l] || (l || (l = e.id = gl()), Un[l] = {}, r || (r = l), e.root = r), delete e.children; n--; ) {
var o = i[n];
o.order = n, o.parent = l, t.push(o), a.push(o);
}
}
return t;
}
function vl(e) {
var t = !1, a = Un[e.id];
for (var r in e) {
var i = e[r];
i != a[r] && (a[r] = i, t = !0);
}
for (var r in a) r in e || (delete a[r], t = !0);
return t ? (a.updateTime = +new Date(), a) : void 0;
}
function fl(e, t) {
t = t || e.root;
var a = hl(t).map(cl), r = [ e ], i = [];
if (t == e.id) a.push(cl(t)), i = a; else for (;r.length; ) {
var n = r.pop(), l = n.id, o = a.length;
for (i.push(n); o--; ) {
var v = a[o];
v.parent == l && (a.splice(o, 1), r.push(v));
}
}
return i;
}
function sl(e, t) {
Kn[e] = t, _n.setItem(Ln + e, JSON.stringify(t));
}
function hl(e) {
if (Kn) return Kn[e];
Kn = {};
for (var t = _n.getItem(Ln + 0), a = (Kn[0] = t = t ? JSON.parse(t) : []).length; a--; ) {
var r = t[a];
Kn[r] = JSON.parse(_n.getItem(Ln + r));
}
return Kn[e];
}
function cl(e) {
var t = Qn[e];
if (t) return t;
var a = _n.getItem($n + e);
return a ? Qn[e] = fv(Un[e] = JSON.parse(a)) : void 0;
}
function dl(e, t) {
return e.eventStart - t.eventStart;
}
function gl() {
(null == Gn || zn >= 8) && (Gn = _n.getItem(Hn) || +new Date() / 1e3 | 0, _n.setItem(Hn, ++Gn), 
zn = 0), console.log(Gn);
var e = ((16777215 & Gn) << 8 | zn++).toString(16);
return e;
}
function ml(e, t, a, r, i) {
Xo.apply(this, [ e, t, wl, yl ]), this.text = a, this.color = r, this.font = i || "26px " + At, 
this.patterns = [], this.colors = [], this.fonts = [];
}
function yl() {}
function wl(e, t, a) {
this.background && (e.fillStyle = this.background, e.fillRect(0, 0, t, a));
var r = this.padding || 0, i = xl(this.text, this.width - 2 * r, this.font, this.patterns, this.fonts), n = this.textAlign, l = this.lineHeight || 1.5 * this.font.replace(/.*?([\d\.]+)px.*/, "$1") | 0, o = i.length, v = l + r, f = i.length * l + 2 * r;
if (f != a && (f > a && (this.parentWidget.supportScroll = !0), this.parentWidget.supportScroll)) return void this.resize(t, f);
for (var s = 0; o > s; s++) {
var h = i[s], c = r;
if ("center" == n) {
for (var u = 0, d = 0; d < h.length; d += 3) u += h[d + 1];
c += (t - u) / 2;
}
for (var d = 0; d < h.length; ) {
var p = h[d++], u = h[d++], g = h[d++], m = 0 > p ? this.font : this.fonts[p], y = 0 > p ? this.color : this.colors[p];
e.font = m, e.fillStyle = y, e.fillText(g, c, v), c += u;
}
v += l;
}
}
function xl(e, t, a, r, i) {
for (var r = Sl(e, r), n = Ml(e), l = n.length, o = 0, v = 0, f = [], s = [ f ], h = 0; l > h; h++) {
var c = n[h], u = bl(r, o), a = 0 > u ? a : i[u] || a, d = Tl(c, a), p = /\n|\r\n/.test(c);
if ((p || v + d > t) && (s.push(f = []), v = 0), !p) {
var g = f.length - 1, m = f[g];
f[g - 2] == u ? (f[g - 1] += d, m.push(c)) : (m && (f[g] = m.join()), f.push(u, d, [ c ])), 
v += d;
}
o += c.length;
}
for (var h = s.length - 1; h >= 0; h--) f = s[h], f.length && f.push(f.pop().join(""));
return s;
}
function bl(e, t) {
for (var a = 0; a < e.length; a++) {
for (var r = e[a], i = r.length - 1, n = 0, l = i >> 1; i > n; ) {
var o = r[l];
if (t > o) n = l + 1; else {
if (!(o > t)) return a;
i = l - 1;
}
l = n + i >> 1;
}
if (o = r[n], 0 == n) {
if (t >= o) return a;
} else if (1 & n ^ t > o) return a;
}
return -1;
}
function Sl(e, t) {
for (var a = [], r = 0; r < t.length; r++) {
var i = [], n = t[r], l = n.exec(e);
if (l && i.push(l.index, n.lastIndex - 1), n.global) for (;l = n.exec(e); ) i.push(l.index, n.lastIndex - 1);
a.push(i);
}
return a;
}
function Ml(e) {
return e.match(/[\ud800-\udbff][\udc00-\udfff]|\r\n|[\s\S]/g);
}
function Tl(e, t) {
var a = Fl(t);
return a.measureText(e).width;
}
function Fl(e) {
var t = Il[e];
return t || (t = document.createElement("canvas"), t.width = t.height = 0, t = t.getContext("2d"), 
t.font = e, Il[e] = t), t;
}
function Cl(e, t, a, r, i) {
Xo.apply(this, [ e, t, Pl, kl ]), this.options = a, this.offset = r, i && (this.onchange = i);
}
function Pl(e, t, a) {
var r = a / 3, i = Ot;
e.lineWidth = i, e.fillStyle = "#000", e.strokeStyle = "#4cd4bc", e.beginPath(), 
e.lineCap = "round", e.moveTo(i, r), e.lineTo(t - i, r), e.moveTo(i, 2 * r), e.lineTo(t - i, 2 * r), 
e.stroke();
var n = this.options.length, l = -2, o = -r - this.offset * r;
e.textBaseline = "middle", e.textAlign = "center";
do {
if (o > -r) {
if (o > a) break;
var v = Math.abs(o - r) / a, f = (l + n) % n;
this.drawOption(e, f, t / 2, o + r / 2, v);
}
o += r;
} while (l++ <= n);
}
function kl(e, t, a, r, i, n) {
if (-2 == e) {
var l = this.getIndex(), o = this.height / 3, v = (n - this.previousY) / o, f = this.offset, s = this.options.length;
f > s - 1 || 0 > f ? ((f > s || -1 > f) && (f = (f + s) % s), v /= 2) : v *= 10 * Math.log(Math.abs(n - this.height / 2) / o / 10 + 1), 
this.offset = f - v;
var h = this.getIndex();
h != l && this.onchange(h, l), this.repaint();
} else -3 == e && (this.offset = this.getIndex(), this.repaint());
}
function Dl(e, t, a) {
Xo.call(this, e, t, Ol, Al), this.text = a;
}
function Al(e) {
1 == e && (this.checked = !this.checked, this.repaint());
}
function Ol(e, t, a) {
var r = a / 8, i = a - 2 * r, n = r + r, l = r + i / 2;
e.fillStyle = "#000", e.strokeStyle = "#4cd4bc", e.lineWidth = r / 2, this.checked && (e.beginPath(), 
e.moveTo(n, l), e.lineTo(n + r / 2, l - r / 2), e.lineTo(l, a - n), e.lineTo(i, n - r / 2), 
e.stroke()), zo(e, r, r, i, i, r), e.stroke(), e.font = (.6 * a | 0) + "px " + At, 
e.textBaseline = "middle", e.fillText(this.text, a + i / 2, .5 * a);
}
function Wl(e, t, a, r) {
Xo.call(this, e, t), this.timesIndex = _l(a), this.onchange = r, Xl(this, this.timesIndex, 0, e, t);
}
function Xl(e, t, a, r, i) {
for (var n = r / 20, l = (r - 6 * n) / 4, o = l + n, v = [ El, Rl, Yl, Bl ], f = [ n, n + o, r - 2 * o, r - o ], s = 0; s < v.length; s++) {
var h = c, c = new Cl(l, i, v[s], t[s + 1], function(a, r) {
var i = a - r, n = this.previous, l = this.index + 1, o = !0;
if (t[l] = a, (i > 10 || -10 > i) && (i = i > 0 ? -1 : 1, n ? (o = !1, n.roll(i)) : t[l - 1] += i), 
(2 == l || 1 == l) && Nl(e, t), o && e.onchange) {
var v = t.concat();
v[2]++, e.onchange.apply(e, v);
}
});
c.drawOption = jl, c.index = s, c.previous = h, e.add(c, f[s], a);
}
Nl(e, t);
}
function jl(e, t, a, r, i) {
var n = this.options[t].split(/(?=[^\d])/), l = .2 - .1 * i, o = this.height * l | 0;
e.globalAlpha = Math.pow(Math.min(1 - i + .1, 1), 3), e.font = o + "px " + At, e.textAlign = "right", 
o /= 2, a += o / 2, e.fillText(n[0], a, r), e.textAlign = "left", e.font = o + "px " + At, 
e.fillText(n[1], a, r + o / 2);
}
function Nl(e, t) {
var a = e.children[1], r = t[0], i = t[1], n = t[2], l = 32 - new Date(r, 10 > n ? i - 1 : i, 32).getDate();
console.log("month length:", l), a.options.length != l && (a.options = Rl.slice(0, l), 
n > l && (a.offset = t[2] = l - 1), a.repaint());
}
function _l(e) {
return e = e ? new Date(e) : new Date(), [ e.getFullYear(), e.getMonth(), e.getDate() - 1, e.getHours(), e.getMinutes(), e.getSeconds() ];
}
function ql(e, t) {
return t + e;
}
function Ll(e, t) {
return 1 + t + e;
}
function Gl(e, t) {
if (ao++, io += e, no += t, ao > 20) {
var a = [ 1e3 * ao / (t - eo), (no - io) / ao, ro / ao ].map(function(e) {
return e.toFixed(1);
}).join("	");
to.push(a) > 4 && to.shift(), console.log("fps:" + a), eo = t, ao = io = no = ro = 0;
}
}
function Ql(e) {
ro += +e;
}
function Ul(e, t) {
Oo(t), Zl(e);
}
function Kl() {
var e = +new Date();
vo = -1;
var t = ho.getContext("2d");
if (so && (so = !1, console.info("painterChanged clearRect:", ho.width, ho.height), 
t.clearRect(0, 0, ho.width, ho.height)), null != ho.nativeId) {
Vl && console.error("invalid depth status!!!"), Vl++;
try {
var a = fo(t);
} finally {
ho.commit(!0);
}
Vl--;
} else a = fo(t);
a || vo > 0 ? (vo = 1, lo(Kl, "anima")) : vo = 0, Gl(e, +new Date());
}
function Zl(e) {
e != fo && (so = !0), fo = e, vo || lo(Kl), vo = 1;
}
function Do(e, t) {
if (ho != e) {
ho = e;
for (var a = co.length; a--; ) ho.addEventListener(co[a], Wo, !1);
t && Oo(t);
}
}
function Ao(e) {
for (var t = e.length; t--; ) ho.removeEventListener(e[t], Wo, !1);
}
function Oo(e) {
Bo(!0);
var t = uo;
return uo = e, t;
}
function Eo(e, t, a) {
po = new Date(), xo = 0, yo && clearTimeout(yo), yo = setTimeout(function() {
yo = 0, uo(0, e, To, Fo, 0 | So, 0 | Mo);
}, Rt), uo(-1, e, To = t, Fo = a, So = t, Mo = a);
}
function Ro(e, t, a) {
yo && (Math.abs(t - To) > wo || Math.abs(a - Fo) > wo) && (yo = clearTimeout(yo)), 
xo++, So = .8 * So + .2 * t, Mo = .8 * Mo + .2 * a, uo(-2, e, To, Fo, 0 | So, 0 | Mo);
}
function Yo(e, t, a) {
function r() {
yo && new Date() - po < Et ? mo = setTimeout(r, Et) : (0 > xo && uo(go, e, To, Fo, t, a), 
3 == go && prompt(to.join("\n")), mo = go = 0);
}
try {
yo && (yo = clearTimeout(yo), go ? (go++, clearTimeout(mo)) : go = 1, mo = setTimeout(r, Et)), 
uo(-3, e, To, Fo, t, a, go);
} finally {
Bo();
}
}
function Bo(e) {
yo && (yo = clearTimeout(yo)), e && mo && (mo = clearTimeout(mo), go = 0), xo = -1, 
bo = null;
}
function Wo(e) {
try {
var t = new Date(), a = e.changedTouches && e.changedTouches[0] || e, r = a.clientX - (bo || (bo = e.srcElement.getBoundingClientRect())).left, i = a.clientY - bo.top;
switch (e.type) {
case "touchstart":
var t = new Date();
co.length > 6 && Ao(co.splice(4));
case "mousedown":
e.preventDefault(), 0 > xo && Eo(e, r, i);
break;
case "mousemove":
co.length > 6 && Ao(co.splice(0, 4));
case "touchmove":
if (0 > xo) break;
Ro(e, r, i), e.preventDefault();
break;
case "touchend":
case "touchcancel":
case "mouseout":
case "mouseup":
if (e.preventDefault(), 0 > xo) break;
Yo(e, r, i);
break;
default:
console.warn("unknow event:", e.type, e);
}
} finally {
Ql(new Date() - t);
}
}
function Xo(e, t, a, r, i) {
this.width = e || ho.width, this.height = t || ho.height, this.draw = a, this.event = r, 
this.children = [], this.rangeX = [], this.rangeY = [], this.supportScroll = i, 
this.x = this.y = 0, this.offsetX = this.offsetY = 0, this.dirty = ko;
}
function jo(e, t, a, r, i) {
function S(e, r, i, n) {
for (var l = t; ;) {
if (e += l.x, r += l.y, !l.parentWidget) return a.push(e, r, i, n), [ e, r ];
l = l.parentWidget;
}
}
function M(v, f, s, h) {
r.push(t, r = []);
for (var d = 0, p = n.length; p > d; d++) {
var g = n[d], m = g.dirty;
if (m || i) {
var y = d << 1, w = l[y] - c, x = o[y] - u, b = l[++y] - c, S = o[y] - u;
if (g.x = w, g.y = x, v > b || f > S || w > v + s || x > f + h) continue;
try {
jo(e, g, a, r, i);
} finally {}
}
}
}
var n = t.children, l = t.rangeX, o = t.rangeY, v = t.width, f = t.height, s = o[o.length - 1], h = t.dirty, c = 0;
if (h & Po) {
{
var u = No(t.offsetY, s - f);
u - (t.drawOffsetY || 0);
}
t.drawOffsetY = u;
} else var u = t.drawOffsetY || 0;
if (i) M(0, 0, v, f); else if (h > Po) i = !0, M(0, 0, v, f), S(0, 0, v, f); else if (h == Po) {
i = !0, e.imageSmoothingEnabled = !1;
M(0, 0, v, f), S(0, 0, v, f);
} else M(0, 0, v, f);
}
function No(e, t) {
if (t > 0 && e > t || 0 > e) if (0 > e) {
var a = -e;
e = 50 * -Math.log(a / 50 + 1);
} else a = e - t, e = t + 50 * Math.log(a / 50 + 1);
return e || 0;
}
function _o(e, t, a, r, i, n, l) {
try {
if (l.event && l.event.apply(l, arguments)) return !0;
for (var o = l.children, v = o.length; v-- > 0; ) {
var f = o[v];
if (f) {
var s = f.x, h = f.y, c = s + f.width, u = h + f.height;
if (u >= r && r >= h && c >= a && a >= s && _o(e, t, a - s, r - h, i - s, n - h, f)) return !0;
}
}
l.supportScroll && qo(l, e, i, n);
} finally {
l.previousY = n;
}
}
function qo(e, t, a, r) {
var i = e.height, n = Math.max.apply(Math, e.rangeY), l = n - i;
if (-2 == t && l > 0) {
var o = r - e.previousY || 0;
e.offsetY -= o, o && e.repaint(Po);
} else if (-3 == t && l > 0) {
e.repaint(ko);
var v = e.offsetY;
(0 > v || v > l) && (e.restore && clearInterval(e.restore), e.restore = setInterval(function() {
0 > v ? (e.offsetY = v = Math.min(.9 * v + 10, 0), e.repaint(Po)) : v > l && (e.offsetY = v = Math.max(v - 10 - .1 * (v - l), l), 
e.repaint(Po)), v >= 0 && l >= v && (e.restore = clearInterval(e.restore), e.repaint(ko));
}, 20));
}
}
function zo(e, t, a, r, i, n) {
var l = r / 2 - n, o = i / 2 - n, v = t + r / 2, f = a + i / 2;
e.beginPath(), e.arc(v - l, f - o, n, Math.PI, 1.5 * Math.PI), e.arc(v + l, f - o, n, 1.5 * Math.PI, 0), 
e.arc(v + l, f + o, n, 0, .5 * Math.PI), e.arc(v - l, f + o, n, .5 * Math.PI, Math.PI), 
e.closePath();
}
function Uo(e, t, a, r, i, n, l, o) {
if (o) {
for (var v = o.length, f = 1 / v, s = Ko(e, t, a, r, i, n, l), h = 0; v > h; h++) var c = s(o[h], f, h == n && l);
return c;
}
return Ko.apply(null, arguments);
}
function Ko(e, t, a, r, i, n, l) {
var o = r, v = a - t, f = i - r, s = [ o ], h = .4 * v | 0, c = a - (v - h) / 2 | 0, u = -1;
return e.fillStyle = Lo, (l || Zo)(e, t, a, r, i, r, i), i--, function(l, v, d, p, g) {
var m = ++u == n, y = o + f * v, w = (o + y) / 2;
return e.fillStyle = Lo, e.strokeStyle = $o, (d || m) && (e.fillStyle = p || (m ? Jo : Lo), 
(d || Zo)(e, t, a, o, y, r, i)), l && (e.fillStyle = g || (m ? Ho : $o), e.font = (0 | h) + "px STHeiti serif", 
e.textAlign = "center", e.textBaseline = "bottom", e.fillText(l, w, c)), s.push(o = y), 
y > i ? s : arguments.callee;
};
}
function Zo(e, t, a, r, i) {
var n = (a - t) / 2;
e.beginPath(), e.arc(r + n, t + n, n, Math.PI / 2, 1.5 * Math.PI, !1), e.arc(i - n, t + n, n, -Math.PI / 2, Math.PI / 2, !1), 
e.closePath(), e.fill();
}
function Vo(e, t, a, r, i) {
var n = (a - t) / 2;
e.beginPath(), e.arc(r + n, t + n, n, Math.PI / 2, 1.5 * Math.PI, !1), e.lineTo(i, t), 
e.lineTo(i, a), e.closePath(), e.fill();
}
function ev(e, t, a, r, i, n, l) {
(r == n ? i == l ? Zo : Vo : i >= l - 1 ? tv : av).apply(null, arguments);
}
function tv(e, t, a, r, i) {
var n = (a - t) / 2;
e.beginPath(), e.moveTo(r, a), e.lineTo(r, t), e.arc(i - n, t + n, n, -Math.PI / 2, Math.PI / 2, !1), 
e.closePath(), e.fill();
}
function av(e, t, a, r, i) {
e.fillRect(r, t, i - r, a - t);
}
function rv(e, t, a) {
t = t || 16, a = a || "", "string" == typeof e && (e = nv(e));
var r = [], i = t - Math.min(t >> 2, 16);
return function(n) {
var l = n[a], o = r.lastIndexOf(l);
return o >= 0 ? i > o && (r.splice(o, 1), r.push(l)) : (l = [], l[0] = r.length > t ? e(r.shift().splice(0)[0]) : e(), 
r.push(n[a] = l)), l;
};
}
function iv(e, t, a) {
var r = e[0] - t[0], i = e[1] - t[1];
return a && (r > a || -a > r || i > a || -a > i) ? 2147483647 : Math.sqrt(r * r + i * i);
}
function nv() {
return function(e) {
return e || sn();
};
}
function ov(e, t, a, r, i, n) {
e.save(), e.translate(t, a), e.scale(r / 100, i / 140);
var l = Math.PI / 2;
e.beginPath(), e.fillStyle = "#666", e.strokeStyle = n || "#fff", e.arc(12, 50, 10, 2 * l, 3 * l, !1), 
e.arc(88, 50, 10, 3 * l, 4 * l, !1), e.arc(80, 130, 10, 0, l, !1), e.arc(20, 130, 10, l, 2 * l, !1), 
e.fill(), e.beginPath(), e.lineCap = "round", e.lineWidth = 10, e.moveTo(24, 60), 
e.lineTo(24, 120), e.moveTo(50, 60), e.lineTo(50, 120), e.moveTo(76, 60), e.lineTo(76, 120), 
e.stroke(), e.strokeStyle = "#666", e.lineWidth = 16, e.beginPath(), e.moveTo(8, 25), 
e.lineTo(92, 30), e.stroke(), e.lineCap = "rect", e.beginPath(), e.moveTo(45, 12), 
e.lineTo(55, 13), e.stroke(), e.restore();
}
function vv(e, t) {
function a(e, t) {
return t.length > 1 ? ("000" + e).slice(-t.length) : e;
}
function r(e) {
return e ? (e > 0 ? "-" : e *= -1, "+" + a(e / 60, "00") + ":" + a(e % 60, "00")) : "Z";
}
return e = e ? new Date(e) : new Date(), (t || "YYYY-MM-DD").replace(/([YMDhms])\1*|\.s|TZD$|'[^']+'|"[^"]+"/g, function(t) {
switch (t.charAt()) {
case "Y":
return a(e.getFullYear(), t);
case "M":
return a(e.getMonth() + 1, t);
case "D":
return a(e.getDate(), t);
case "h":
return a(e.getHours(), t);
case "m":
return a(e.getMinutes(), t);
case "s":
return a(e.getSeconds(), t);
case ".":
return "." + a(e.getMilliseconds(), "000");
case "T":
return r(e.getTimezoneOffset());
case "'":
case '"':
return t.slice(1, -1);
default:
return t;
}
});
}
function fv(e) {
var t = {};
for (var a in e) t[a] = e[a];
return t;
}
function sv(e) {
var t = e.getFullYear(), a = e.getMonth() + 1, r = e.getDate(), i = e.getHours(), n = e.getMinutes(), l = new Date(), o = (+e - l) / 1e3 / 60 + .5 | 0, v = Math.abs(o), f = [], s = [];
if (2880 >= v) {
var h = v / 60 | 0, c = v % 60;
h > 0 && f.push(h, "小时"), c > 0 && f.push(c, c > 0 ? "分" : "分钟"), (h > 0 || c > 0) && f.push(0 > o ? "前" : "后"), 
f.length || f.push("现在");
}
e.setHours(12), l.setHours(12);
var u = Math.round((e - l) / 24 / 36e5), d = hv(i);
if (0 == u) s.push(d); else {
var p = u > 0 ? "明" : "昨";
if (u > 0) var p = "明", g = "后"; else {
u = -u;
var p = "昨", g = "前";
}
if (1 == u) "上" == d.slice(-1) ? (d = d.substring(0, 1), s.push(p, d)) : s.push(d), 
f = [ p + "天" ]; else {
var m = 2 == u ? g + "天" : u + "天" + g;
f = [ m ], s.push(d);
}
}
s.push(i % 12, "点"), n && s.push(n, "分"), s.push("\n"), f.push("\n");
var y = [ t, 10 > a ? "-0" : "-", a, 10 > r ? "-0" : "-", r, "\n" ];
return f.join("") + s.join("") + y.join("");
}
function hv(e) {
return 5 > e ? "凌晨" : 9 > e ? "早上" : 12 > e ? "上午" : 14 > e ? "中午" : 17 > e ? "下午" : 19 > e ? "傍晚" : 22 > e ? "晚上" : "深夜";
}
var e, t, a, r, i, n, h, c, u, d, p, j, N, _, q, L, $, J, H, Q, K, Z, V, te, re, qe, Le, Je, He, Ke, Ze, Ve, Vt, ea, ta, aa, ra, oa, va, fa, sa, da, pa, ga, ma, ya, wa, xa, Oa, Ea, Ra, qa, La, $a, Ja, Ha, za, sr, hr, ur, dr, pr, gr, yr, Rr, Yr, s = rv("canvas", 128), R = [ Y, [] ], z = [], G = [], U = 7, ee = [], ie = -1, ue = 0, de = 0, pe = 0, Ne = function(e) {
return Pe(Je.children[e]);
}, _e = 2 * Math.PI, ze = [], Qe = l, Ue = [], At = "STHeiti serif", Ot = 1.5 * devicePixelRatio, Et = 240, Rt = 600, Yt = 128, Bt = Yt + 32, Wt = function(e, t) {
var a = Math.min(e, t) / 6;
ra = 0 | e, Vt = 0 | t, ea = 2.18 * a | 0, ta = 0 | a, aa = a / 48 + 8 * devicePixelRatio | 0;
}, Xt = 1.5 * devicePixelRatio, Wt = function(e, t) {
var a = Math.min(e, t) / 6;
ra = 0 | e, Vt = 0 | t, ea = 2.18 * a | 0, ta = 0 | a, aa = a / 48 + 8 * devicePixelRatio | 0;
}, qt = 128, Lt = 300, $t = 2, Jt = 2.8, Ht = .75, zt = .7, Gt = .5, Qt = .8, Ut = 2, Kt = "创建于：", Zt = "最后修改：", na = function() {
oa && (oa.blur(), va.blur(), fa.dirty = !0, sa.title = oa.value, sa.content = va.value, 
va.style.display = oa.style.display = "none");
}, la = function() {
oa && ("block" == oa.style.display, oa.focus());
}, ca = 0, ua = [ "提醒", "投票", "讲稿" ], Ya = 0, Ba = -1, Wa = 0, Xa = -1, ja = [ "经典", "炫彩" ], Na = [ "#2B8567#1D9C7E#22B59A#4CD4BC#1FE3BF#90D7C5#98C0B4#04576B#227580#4699A3#40BACA#52D6EB#7DCADC#88B8CC#611023#991924#C24924#DE6530#E67B63#CC8F8F#AE7D7D#484570#68638C#8B85A8#B3AFC5#C8C6D4#CDCDD1#A3A1A8".match(/#\w+/g), "#8000FF#FF00FF#FF0080#FF3D3D#FF9900#FFD83D#A0F000#5000F0#3D64FF#7A95FF#00B3FF#85E0D1#00B8B8#666600#333399#FF0033#990066#FFCC33#CCCC00#666666#0066CC#336699#669933#99CC33#00FF80#663366#660000#000000".match(/#\w+/g) ], _a = 0, cr = 0, mr = [ "内容", "样式", "功能", "√" ], Dr = rv("canvas", 2), Ar = [], Or = [], Er = [ "⛺,🎃,🎯,🏈,🏀,🎵,🎤,🎹,🎑,🎄,⚽,🎾,🎱,🎶,🎼,🎻,🎈,🎋,🏉,🎳,⛳,🎺,🎷,🎸,🎏,🎉,🚵,🚴,🏁,🎨,🎭,🎬,🗿,🎊,🏇,🏆,🎿,🏂,🏊,🏄,🎆,🎇,🎣,🚶,🏃,💃,⚾,🎐,♨,🎠,🎡,🎢,🗽,🌉,⛲".split(","), "🙇,👽,👍,💖,💟,😁,😂,😍,🎅,👻,👎,💛,💙,😜,😝,😛,👼,💀,👌,💜,💚,😃,😄,😀,👦,😈,👊,❤,💝,😊,😉,😘,👧,👿,✊,💔,💗,😚,😗,😙,👨,👹,👋,💓,💕,😳,😔,😌,👩,👺,✋,💞,💘,😒,😞,😣,👲,👾,👐,💌,💍,😢,😭,😪,👴,😺,👆,💋,💏,😥,😰,😅,👵,😸,👇,💑,👫,😓,😩,😫,👶,😻,👉,👬,👭,😨,😱,😠,👱,😽,👈,👪,🙌,😡,😤,😖,👸,😼,🙏,👏,✌,😆,😋,😷,🙆,🙀,☝,💪,👂,😎,😴,😵,🙅,😿,👀,👃,👅,😲,😟,😦,🙍,😹,👄,😾,🙈,😧,😮,😬,🙎,🙉,🙊,💩,🙋,😐,😕,😯,💁,💆,👰,👯,👳,😶,😇,😏,👮,👷,💂,💇,😑,☺,🙁,🙂".split(","), "#⃣,💹,💰,💴,💵,⌛,⏰,⌚,0⃣,📈,💷,💶,💳,🕐,⏳,📅,1⃣,📉,💸,💲,💱,📆,🕛,🕧,2⃣,📊,〰,〽,3⃣,🕜,🕑,🕝,4⃣,5⃣,6⃣,7⃣,8⃣,🕒,🕞,🕓,9⃣,🔢,🔟,✖,➕,🕟,🕔,🕠,➖,➗,🇦,🇧,🇨,🕕,🕖,🕗,🇩,🇪,🇫,🇬,🇭,🕘,🕙,🕚,🇮,🇯,🇰,🇱,🇲,🕡,🕢,🕣,🇳,🇴,🇵,🇶,🇷,🕤,🕥,🕦,🇸,🇹,🇺,🇻,🇼,🇽,🇾,🇿".split(","), "👓,💄,🎩,🎓,👑,☕,🍵,🍶,👒,👟,👞,👡,👠,🍼,🍺,🍻,👢,👕,👔,👚,👗,🍸,🍹,🍷,🎽,👖,👘,👙,💼,🍴,🍕,🍔,👜,👝,👛,🎀,🌂,🍟,🍗,🍖,📛,💅,🍝,🍛,🍤,🍱,🍣,🍥,🍙,🍘,🍚,🍜,🍲,🍢,🍡,🍳,🍞,🍩,🍮,🍦,🍨,🍧,🎂,🍰,🍪,🍫,🍬,🍭,🍯,🍎,🍏,🍊,🍋,🍒,🍇,🍉,🍓,🍑,🍈,🍌,🍐,🍍,🍠,🍆,🍅,🌽".split(","), "⛽,✂,🔓,🔒,🔐,🔔,🔕,📢,💺,✒,🔏,🔑,🔧,📣,🔊,🔉,💎,✏,🔩,🔨,⚓,🔈,🔇,🎧,🎍,📏,💣,🔪,🔫,🎥,📷,📹,🎒,📐,💡,🔦,🔎,💻,📻,📡,🔮,🔬,🔍,🔭,🛁,📺,📼,📱,🛀,🚿,🚽,🚪,🚬,📲,📟,🎮,💊,💉,🎲,🃏,🎴,🔌,🔋,🀄,🎫,🏮,🎰".split(","), "📞,☎,📌,📍,📎,👤,👥,💬,📠,📦,📝,📑,🔖,💭,💤,👣,🎁,📧,📜,📋,📇,📰,📁,📂,📥,📤,📃,📄,📖,📚,📕,📗,📩,📨,📘,📙,📓,📔,📒,💿,📫,📪,📀,💽,💾,📬,📭,✉,📯,📮".split(","), "☀,☁,🐾,💐,🌸,🐶,🐺,🐱,❄,🔆,🌷,🍀,🌹,🐭,🐹,🐰,🔅,🌞,🌻,🌺,🍁,🐸,🐯,🐨,⛅,⚡,🍃,🍂,🌿,🐻,🐷,🐽,✨,⛄,🌾,🍄,🌵,🐮,🐗,🐵,☔,🌀,🌴,🌲,🌳,🐒,🐴,🐑,🌊,🌁,🌰,🌱,🌼,🐘,🐼,🐧,🌈,🌋,🗻,🌄,🌅,🐦,🐤,🐥,🌌,🌠,⭐,🌐,🌍,🐣,🐔,🐍,🌎,🌏,🌝,🌚,🌑,🐢,🐛,🐝,🌒,🌓,🌔,🌕,🌖,🐜,🐞,🐌,🌗,🌘,🌜,🌛,🌙,🐙,🐚,🐠,🔥,🌟,💫,💥,💢,🐟,🐬,🐳,💦,💨,💧,🐋,🐄,🐏,🐀,🐃,🐅,🐇,🐉,🐎,🐐,🐓,🐕,🐖,🐁,🐂,🐲,🐡,🐊,🐫,🐪,🐆,🐈,🐩".split(","), "🏠,🏡,🏫,🎪,🏢,🚢,⛵,🚤,🏣,🏥,🏦,🏪,🏩,🚣,🚀,✈,🏨,💒,⛪,🏬,🏤,🚁,🚂,🚊,🌃,🌇,🌆,🏯,🏰,🚉,🚞,🚆,🏭,🚄,🚅,🚈,🚇,🚝,🚋,🚃,🚎,🚌,🚍,🚙,🚘,🚗,🚕,🚖,🚛,🚚,🚨,🚓,🚔,🚒,🚑,🚐,🚲,🚡,🚟,🚠,🚜".split(","), "㊙,🔝,🔱,‼,⁉,🚫,⛔,🚦,㊗,🔚,❎,✅,❌,🚥,⚠,🚧,🔺,🔙,❗,❓,❕,🔞,📵,🚯,🔲,🔛,❔,⭕,✔,🚱,🚳,🚷,🔳,🔜,☑,♻,💯,🚸,💈,🚏,⚫,🔃,ℹ,⬆,⬇,🚩,🚻,🚹,⚪,⬅,➡,↗,↖,🚺,🚼,🚾,🔴,↘,↙,↔,↕,🚰,🚮,🅿,🔵,↩,↪,⤵,⤴,♿,🚭,🛂,🔻,📳,📴,🔄,◀,🛄,🛅,🛃,⬜,▶,🔼,🔽,⏪,🏧,🇯🇵,🇰🇷,⬛,⏩,⏫,⏬,🆗,🇩🇪,🇨🇳,🇺🇸,🔶,🔀,🔁,🔂,🆕,🇫🇷,🇪🇸,🇮🇹,🔷,🆙,🆒,🆓,🆖,🇷🇺,🇬🇧,📶,🔸,🎦,🔹,◼,◻,◾,◽,▪,▫,💠,🔯,💮,🔘,🔗,🈲,🈶,🈚,🈳,🈵,🉑,🆘,🆔,🆑,✳,❇,✴,🆚,🅰,🅱,🆎,🅾,♠,♥,♣,♦,©,®,™,Ⓜ,➿,➰,♈,♉,♊,♋,♌,♍,♎,♏,♐,♑,♒,♓,⛎,🔣,🔠,🔡,🔤,🈯,🈴,🉐,🈹,🈺,🈷,🈸,🔰".split(",") ], Br = "iPhone" == navigator.platform && 20;
Wr("🎄,🎠,🏈,🎹", "🎄,🎤,🎶,🎣,🎯,⚽"), Wr("😀,👍,💗,🎅", "😀,😭,😥,😡,😴,😷,👽,👻,💘,💔,💓,👌,✌,👍,👎,🙏"), 
Wr("📅,💰,📈,⌛", "⏰,💰,💹"), Wr("🍴,🎂,🎀,👒", "🍭,🍲,🍎,🍸"), Wr("💣,📏,🔬,🔐", "🔓,🔒,⚓,🔧,🔍,🔔,🔕,💡,💎,💣"), 
Wr("📞,📌,👥,💬", "👤,👥,💬,💭,📞,📩"), Wr("🐧,🐣,🍄,🔆", "🐌,🌹,🔆,⛅,❄,☁,💧"), 
Wr("🚊,🚔,🏠,💒", "🏡,🚀,🚄,⛵,🚲"), Wr("⛔,🚭,🚦,✅", "✅,❎,❓,❗,⁉,㊙,🚩");
var Ur = "娱乐,表情,数字,居家,杂物,沟通,自然,城市,抽象".split(","), Zr = function() {
localStorage.clear(), nl(fi(ni.join("\n")), !0), nl(fi(li.join("\n")), !0);
}, ni = [ "亲情时刻产品设计{#FF3D3D,updateTime=1,icon=⏰}", "	场景闹钟{#7A95FF,icon=⌚}", "		结合位置优化提醒{#CCCC00,icon=🌍}", "			出差场景{}", "		完整作息优化提醒{,icon=💤}", "	倒计时{#FFCC33,icon=⏳}", "		生日{}", "		纪念日{}", "		传统节日{}", "	生活习惯{#52D6EB,icon=🍵}", "		正点吃饭{}", "		熬夜{}", "		用眼{}", "		注意颈椎{}", "		提醒喝水{}", "	亲情实景{#FF9900,icon=🚞}", "		街景实况{}", "		亲情授权{}", "	亲情协作{#0066CC,icon=👥}", "		孩子接送{#FFCC33,icon=👪}", "		路过买菜{#666600,icon=🍆}" ], li = [ "欢迎使用{#2B8567,icon=🎷,updateTime=1}", "	基本用法{#1FE3BF,icon=🎨}", "		单击展开{#22B59A,icon=🎯}", "		双击编辑{#4CD4BC,icon=📝}", "		长按移动{#1FE3BF,icon=👣}", "		剪切板{#90D7C5,icon=✂}", "	多端同步{#00B3FF,icon=📲}", "		Android{#99CC33}", "		iPhone{#FFCC33}", "		微信公众号{#00B8B8}", "	团队协作{#666666,icon=👥}", "		任务分发{#40BACA,icon=📌}", "		编辑同步{#1FE3BF,icon=📑}", "	时间管理{#7A95FF,icon=⌛}", "		利用碎片时间{#52D6EB}", "		事件提醒{#FFCC33}", "	创意分享{#8000FF,icon=💭}", "		连接投影 创意无限{#FF9900,icon=🎥}", "		QQ/微信/朋友圈{#00B8B8}", "		手机联系人{#52D6EB,icon=📞}", "		email{#7A95FF,icon=📩}", "	展望无限{#52D6EB}" ], pi = {}, gi = 0;
yi.prototype.cache = function() {
var e = this.data.id;
e && (pi[e] = this);
}, Object.defineProperty(yi.prototype, "children", {
get: function() {
var e = this._children;
if (!e) {
e = this._children = [];
var t = rl(this.data);
t.sort(wi);
for (var a = 0, r = t.length; r > a; a++) {
var i = new yi(t[a]);
i.parent = this, e.push(i);
}
}
return e;
}
}), Object.defineProperty(yi.prototype, "parent", {
get: function() {
var e = this._parent;
if (void 0 === e) {
var t = al(this.data.parent);
e = t && t.id != this.data.id ? new yi(t) : null, this._parent = e;
}
return e;
},
set: function(e) {
this._parent = e;
}
});
var xi, bi, Si, Mi, Ti, Fi, Ii, Ci, Hi, zi, Gi, Qi, Vi, Pi = rv("canvas", 12), ki = tt, Ui = [], en = rv("canvas", 2), sn = function(e) {
return kn ? new On(e) : document.createElement("canvas");
}, hn = 0, cn = 1, un = 2, dn = 3, pn = 0, gn = 1, mn = 2, yn = 3, wn = 4, xn = 5, bn = 6, Sn = 7, Mn = 8, Tn = 9, Fn = 10, In = 11, Cn = 12, Pn = 2 * Math.PI, kn = window.nativeHost;
On.prototype.commit = function(e) {
var t = kn.commit(this.nativeId, this.cmds.join(""), !!e);
return this.cmds = [], t;
}, "font,fillStyle,strokeStyle,lineCap,lineJoin,miterLimit,lineWidth,textAlign,textBaseline".replace(/\w+/g, function(e) {
Object.defineProperty(On.prototype, e, {
get: function() {
return this._style[e];
},
set: function(t) {
this._style[e] !== t && (this._styleJSON = 0, this._style[e] = t);
}
});
}), Object.defineProperty(On.prototype, "width", {
get: function() {
return this._width;
},
set: function(e) {
kn.setWidth(this.nativeId, e), this._width = e;
}
}), Object.defineProperty(On.prototype, "height", {
get: function() {
return this._height;
},
set: function(e) {
kn.setHeight(this.nativeId, e), this._height = e;
}
});
var Bn = "BLACK,#FF000000,DKGRAY,#FF444444,GRAY,#FF888888,LTGRAY,#FFCCCCCC,WHITE,#FFFFFFFF,RED,#FFFF0000,GREEN,#FF00FF00,BLUE,#FF0000FF,YELLOW,#FFFFFF00,CYAN,#FF00FFFF,MAGENTA,#FFFF00FF,TRANSPARENT,#00000000".split(",");
On.prototype.clip = function() {
Dn(this, gn, En(this._path));
}, On.prototype.fill = function() {
Dn(this, yn, En(this._path));
}, On.prototype.stroke = function() {
Dn(this, wn, En(this._path));
}, On.prototype.drawImage = function(e) {
var f = [];
switch (f.push.apply(f, arguments), f.length) {
case 3:
case 5:
case 9:
e.cmds.length && Dn(this, pn, e), f[0] = e.nativeId, console.log("image id:" + f[0]), 
Dn(this, mn, En(f));
break;
default:
console.error("error arguments" + f);
}
}, On.prototype.measureText = function(e) {
return {
width: Dn(this, In, e)
};
}, On.prototype.fillText = function(e, t, a, r) {
Dn(this, xn, En([ t, a, 0 | r ]) + e);
}, On.prototype.strokeText = function(e, t, a, r) {
Dn(this, bn, En([ t, a, 0 | r ]) + e);
}, On.prototype.clearRect = function(e, t, a, r) {
Dn(this, Sn, En([ e, t, a, r ]));
}, On.prototype.beginPath = function() {
this._path = [];
}, On.prototype.moveTo = function(e, t) {
Xn(this).push(hn, e, t);
}, On.prototype.lineTo = function(e, t) {
Xn(this).push(cn, e, t);
}, On.prototype.closePath = function() {
Xn(this).push(un);
}, On.prototype.arc = function(e, t, a, r, i, n) {
var l = jn(r), o = jn(i - r);
Xn(this).push(dn, e, t, a, l, l + o, n ? 1 : 0);
}, On.prototype.save = function() {
Dn(this, Mn, "");
}, On.prototype.restore = function() {
Dn(this, Tn, "");
}, On.prototype.translate = function(e, t) {
Dn(this, Fn, En([ e, t ]));
}, On.prototype.rotate = function() {}, On.prototype.setTransform = function() {}, 
On.prototype.scale = function() {}, On.prototype.transform = function() {}, On.prototype.resetTransform = function() {}, 
Nn.prototype = new String(), On.prototype.createLinearGradient = function(e, t, a, r) {
return new Nn("linear:" + [ 0 | e, 0 | t, 0 | a, 0 | r, "" ].join(","));
}, On.prototype.createRadialGradient = function(e, t, a, r, i, n) {
return new Nn("radial:" + [ 0 | e, 0 | t, 0 | a, 0 | r, 0 | i, 0 | n ].join(","));
}, On.prototype.getImageData = function() {}, On.prototype.putImageData = function() {}, 
On.prototype.rect = function(e, t, a, r) {
this.beginPath(), this.moveTo(e, t), this.lineTo(e + a, t), this.lineTo(e + a, t + r), 
this.lineTo(e, t + r), this.closePath();
}, On.prototype.strokeRect = function(e, t, a, r) {
this.rect(e, t, a, r), this.stroke();
}, On.prototype.fillRect = function(e, t, a, r) {
this.rect(e, t, a, r), this.fill();
}, On.prototype.getContext = function() {
return this;
}, On.prototype.addEventListener = function() {
console.log("native canvas not support event listener");
}, On.prototype.setLineDash = function() {}, On.prototype.arcTo = function() {}, 
On.prototype.bezierCurveTo = function() {}, On.prototype.createImageData = function() {}, 
On.prototype.createPattern = function() {}, On.prototype.drawFocusIfNeeded = function() {}, 
On.prototype.ellipse = function() {}, On.prototype.getLineDash = function() {}, 
On.prototype.isPointInPath = function() {}, On.prototype.isPointInStroke = function() {}, 
On.prototype.quadraticCurveTo = function() {};
var Gn, Kn, _n = Vn() || localStorage, qn = "CLUB.XIDEA.COMPASS.", Ln = qn + "index", $n = qn + "item.", Hn = qn + "uuidbase", zn = 0, Qn = {}, Un = {}, Zn = hl(0);
0 == Zn.length && (console.warn("reset your data!!!"), Zr(), Zn = Kn[0]), ml.prototype = Object.create(Xo.prototype), 
ml.prototype.addPattern = function(e, t) {
if ("string" == typeof e) {
var a = e.lastIndexOf("/");
e = new RegExp(e.slice(1, a), e.slice(a + 1));
}
this.patterns.push(e);
var r = t.split(";");
this.colors.push(r[0]), this.fonts.push(r[1] || this.font);
};
var Il = {};
Cl.prototype = Object.create(Xo.prototype), Cl.prototype.getIndex = function() {
var e = this.options.length;
return (e + Math.round(this.offset)) % e;
}, Cl.prototype.onchange = function() {}, Cl.prototype.getValue = function() {
return this.options[this.getIndex()];
}, Cl.prototype.roll = function(e) {
var t = this.getIndex(), a = this.options.length, r = (t + e) % a;
return this.offset = r = 0 > r ? r + a : r, this.onchange(r, t), this.repaint(), 
Math.abs(r - t) > a - 2;
}, Cl.prototype.drawOption = function(e, t, a, r, i) {
var n = .2 - .1 * i;
e.font = (this.height * n | 0) + "px " + At, e.globalAlpha = Math.pow(Math.min(1 - i + .1, 1), 3), 
e.fillText(this.options[t], a, r);
}, Dl.prototype = Object.create(Xo.prototype), String.prototype.repeat || (String.prototype.repeat = function(e) {
return new Array(e + 1).join(this);
});
var El = "月".repeat(12).replace(/./g, Ll).match(/\d+./g), Rl = "日".repeat(31).replace(/./g, Ll).match(/\d+./g), Yl = "点".repeat(24).replace(/./g, ql).match(/\d+./g), Bl = "分".repeat(60).replace(/./g, ql).match(/\d+./g);
Wl.prototype = Object.create(Xo.prototype);
var Jl = function(e, t, a) {
var r = {
type: e
};
switch (e) {
case "touchstart":
return Eo(r, t, a);
case "touchmove":
return Ro(r, t, a);
case "touchend":
case "touchcancel":
return Yo(r, t, a);
}
};
if (!window.requestAnimationFrame) {
for (var Hl = [ "webkit", "moz", "o", "ms" ], zl = Hl.length; zl--; ) if (requestAnimationFrame = window[Hl[zl] + "RequestAnimationFrame"], 
requestAnimationFrame) {
cancelAnimationFrame = window[Hl[zl] + "CancelAnimationFrame"];
break;
}
requestAnimationFrame || (requestAnimationFrame = function(e) {
return setTimeout(e, 1e3 / 60);
}, cancelAnimationFrame = function(e) {
return clearTimeout(e);
});
}
var vo, fo, so, ho, uo, po, go, mo, yo, bo, So, Mo, To, Fo, Vl = 0, eo = +new Date(), to = [], ao = 0, ro = 0, io = 0, no = 0, lo = requestAnimationFrame, oo = new Date(), lo = function(e) {
var a = new Date();
return oo = a, requestAnimationFrame(e, 30);
}, co = "touchstart,touchmove,touchend,touchcancel,mousedown,mousemove,mouseup,mouseout".split(","), wo = 10, xo = -1, zl = co.length, Co = 2, Po = 4, ko = 8;
window.matchMedia && window.matchMedia("(pointer:coarse)").matches && co.splice(4), 
Xo.prototype.attach = function() {
function t(t, a, r, i, n, l) {
return _o(t, a, r, i, n, l, e);
}
var e = this;
this.dispatchDraw || (this.dispatchDraw = function(t) {
function l(e, t, a) {
for (var r = 0; r < t.length; ) {
var i = t[r++], n = t[r++], o = i.width, v = i.height;
e.save();
try {
e.translate(i.x, i.y), e.beginPath(), e.rect(0, 0, o, v), e.closePath(), e.clip(), 
i.draw && i.draw(e, o, v), i.dirty = 0, l(e, n, a + 1);
} finally {
e.restore();
}
}
}
var a = [], r = [];
jo(t, e, a, r), t.save();
try {
t.beginPath();
for (var i = 0, n = a.length; n > i; ) t.rect(a[i++], a[i++], a[i++], a[i++]);
t.closePath(), t.clip(), l(t, r, 0);
} finally {
t.restore();
}
}), Ul(this.dispatchDraw, t);
}, Xo.prototype.resize = function(e, t) {
if (null != e && e != this.width) this.width = e; else {
if (null == t || t == this.height) return;
this.height = t;
}
var a = this.parentWidget, r = a.children.indexOf(this);
r >= 0 && (r <<= 1, a.rangeX[r + 1] = a.rangeX[r] + this.width, a.rangeY[r + 1] = a.rangeY[r] + this.height, 
this.repaint());
}, Xo.prototype.add = function(e, t, a) {
null == a && (a = this.rangeY.length ? Math.max.apply(Math, this.rangeY) : 0, null == t && (t = 0)), 
e.parentWidget = this, this.children.push(e), this.rangeX.push(t, e.width + t), 
this.rangeY.push(a, e.height + a), this.repaint(Co);
}, Xo.prototype.remove = function(e) {
var t = this.children.indexOf(e);
t >= 0 && (this.children.splice(t, 1), this.rangeX.splice(2 * t, 2), this.rangeY.splice(2 * t, 2)), 
this.repaint(Po);
}, Xo.prototype.clear = function() {
this.children.length = this.rangeX.length = this.rangeY.length = 0, this.repaint(ko);
}, Xo.prototype.repaint = function(e) {
this.dirty |= e || ko;
for (var t = this; t.parentWidget; ) t = t.parentWidget, t.dirty |= Co;
t.dispatchDraw && Zl(t.dispatchDraw);
};
var Lo = "#eee", $o = "#888", Jo = "#4cd4bc", Ho = "#EEE";
return {
dispatchEvent: Jl,
init: at
};
}();</script>
</head>
<body></body>
</html>